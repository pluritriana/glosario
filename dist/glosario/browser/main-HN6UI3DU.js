var YN=Object.defineProperty,JN=Object.defineProperties;var ZN=Object.getOwnPropertyDescriptors;var Ja=Object.getOwnPropertySymbols;var mE=Object.prototype.hasOwnProperty,yE=Object.prototype.propertyIsEnumerable;var gE=(t,e,n)=>e in t?YN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})mE.call(e,n)&&gE(t,n,e[n]);if(Ja)for(var n of Ja(e))yE.call(e,n)&&gE(t,n,e[n]);return t},ae=(t,e)=>JN(t,ZN(e));var ss=(t,e)=>{var n={};for(var r in t)mE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Ja)for(var r of Ja(t))e.indexOf(r)<0&&yE.call(t,r)&&(n[r]=t[r]);return n};var Ye=null,Za=!1,yf=1,XN=null,yt=Symbol("SIGNAL");function z(t){let e=Ye;return Ye=t,e}function ec(){return Ye}var as={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _f(t){if(Za)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(t);let e=Ye.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Ye.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Ye.producers,n!==void 0&&n.producer===t)){Ye.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Ye&&(!r||tR(i,Ye)))return;let o=Vi(Ye),s={producer:t,consumer:Ye,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Ye.producersTail=s,e!==void 0?e.nextProducer=s:Ye.producers=s,o&&IE(t,s)}function _E(){yf++}function vf(t){if(!(Vi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===yf)){if(!t.producerMustRecompute(t)&&!Tf(t)){mf(t);return}t.producerRecomputeValue(t),mf(t)}}function Ef(t){if(t.consumers===void 0)return;let e=Za;Za=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||eR(r)}}finally{Za=e}}function If(){return Ye?.consumerAllowSignalWrites!==!1}function eR(t){t.dirty=!0,Ef(t),t.consumerMarkedDirty?.(t)}function mf(t){t.dirty=!1,t.lastCleanEpoch=yf}function tc(t){return t&&vE(t),z(t)}function vE(t){t.producersTail=void 0,t.recomputing=!0}function wf(t,e){z(e),t&&EE(t)}function EE(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Vi(t))do n=Df(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Tf(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(vf(n),r!==n.version))return!0}return!1}function nc(t){if(Vi(t)){let e=t.producers;for(;e!==void 0;)e=Df(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function IE(t,e){let n=t.consumersTail,r=Vi(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)IE(i.producer,i)}function Df(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Vi(e)){let o=e.producers;for(;o!==void 0;)o=Df(o)}return n}function Vi(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function bf(t){XN?.(t)}function tR(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Cf(t,e){return Object.is(t,e)}function rc(t,e){let n=Object.create(nR);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(vf(n),_f(n),n.value===Xa)throw n.error;return n.value};return r[yt]=n,bf(n),r}var pf=Symbol("UNSET"),gf=Symbol("COMPUTING"),Xa=Symbol("ERRORED"),nR=ae(V({},as),{value:pf,dirty:!0,error:null,equal:Cf,kind:"computed",producerMustRecompute(t){return t.value===pf||t.value===gf},producerRecomputeValue(t){if(t.value===gf)throw new Error("");let e=t.value;t.value=gf;let n=tc(t),r,i=!1;try{r=t.computation(),z(null),i=e!==pf&&e!==Xa&&r!==Xa&&t.equal(e,r)}catch(o){r=Xa,t.error=o}finally{wf(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function rR(){throw new Error}var wE=rR;function TE(t){wE(t)}function Sf(t){wE=t}var iR=null;function Af(t,e){let n=Object.create(CE);n.value=t,e!==void 0&&(n.equal=e);let r=()=>DE(n);return r[yt]=n,bf(n),[r,s=>Nf(n,s),s=>bE(n,s)]}function DE(t){return _f(t),t.value}function Nf(t,e){If()||TE(t),t.equal(t.value,e)||(t.value=e,oR(t))}function bE(t,e){If()||TE(t),Nf(t,e(t.value))}var CE=ae(V({},as),{equal:Cf,value:void 0,kind:"signal"});function oR(t){t.version++,_E(),Ef(t),iR?.(t)}function Rf(t){let e=z(null);try{return t()}finally{z(e)}}function le(t){return typeof t=="function"}function ic(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var oc=ic(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function cs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var it=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(o){e=o instanceof oc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{SE(o)}catch(s){e=e??[],s instanceof oc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new oc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)SE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&cs(n,e)}remove(e){let{_finalizers:n}=this;n&&cs(n,e),e instanceof t&&e._removeParent(this)}};it.EMPTY=(()=>{let t=new it;return t.closed=!0,t})();var Mf=it.EMPTY;function sc(t){return t instanceof it||t&&"closed"in t&&le(t.remove)&&le(t.add)&&le(t.unsubscribe)}function SE(t){le(t)?t():t.unsubscribe()}var jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ji={setTimeout(t,e,...n){let{delegate:r}=ji;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ji;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ac(t){ji.setTimeout(()=>{let{onUnhandledError:e}=jt;if(e)e(t);else throw t})}function xf(){}var AE=Pf("C",void 0,void 0);function NE(t){return Pf("E",void 0,t)}function RE(t){return Pf("N",t,void 0)}function Pf(t,e,n){return{kind:t,value:e,error:n}}var Hr=null;function Bi(t){if(jt.useDeprecatedSynchronousErrorHandling){let e=!Hr;if(e&&(Hr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Hr;if(Hr=null,n)throw r}}else t()}function ME(t){jt.useDeprecatedSynchronousErrorHandling&&Hr&&(Hr.errorThrown=!0,Hr.error=t)}var $r=class extends it{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sc(e)&&e.add(this)):this.destination=cR}static create(e,n,r){return new Ui(e,n,r)}next(e){this.isStopped?kf(RE(e),this):this._next(e)}error(e){this.isStopped?kf(NE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kf(AE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sR=Function.prototype.bind;function Of(t,e){return sR.call(t,e)}var Ff=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){cc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){cc(r)}else cc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){cc(n)}}},Ui=class extends $r{constructor(e,n,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Of(e.next,o),error:e.error&&Of(e.error,o),complete:e.complete&&Of(e.complete,o)}):i=e}this.destination=new Ff(i)}};function cc(t){jt.useDeprecatedSynchronousErrorHandling?ME(t):ac(t)}function aR(t){throw t}function kf(t,e){let{onStoppedNotification:n}=jt;n&&ji.setTimeout(()=>n(t,e))}var cR={closed:!0,next:xf,error:aR,complete:xf};var Hi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xE(t){return t}function PE(t){return t.length===0?xE:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=lR(n)?n:new Ui(n,r,i);return Bi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=OE(r),new r((i,o)=>{let s=new Ui({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Hi](){return this}pipe(...n){return PE(n)(this)}toPromise(n){return n=OE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function OE(t){var e;return(e=t??jt.Promise)!==null&&e!==void 0?e:Promise}function uR(t){return t&&le(t.next)&&le(t.error)&&le(t.complete)}function lR(t){return t&&t instanceof $r||uR(t)&&sc(t)}function dR(t){return le(t?.lift)}function $i(t){return e=>{if(dR(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Gi(t,e,n,r,i){return new Lf(t,e,n,r,i)}var Lf=class extends $r{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var kE=ic(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var en=(()=>{class t extends Re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new uc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new kE}next(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Mf:(this.currentObservers=null,o.push(n),new it(()=>{this.currentObservers=null,cs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Re;return n.source=this,n}}return t.create=(e,n)=>new uc(e,n),t})(),uc=class extends en{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Mf}};var us=class extends en{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function FE(t){return t&&le(t.schedule)}function LE(t){return t[t.length-1]}function VE(t){return le(LE(t))?t.pop():void 0}function jE(t){return FE(LE(t))?t.pop():void 0}function UE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function BE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gr(t){return this instanceof Gr?(this.v=t,this):new Gr(t)}function HE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function c(y,C){r[y]&&(i[y]=function(A){return new Promise(function(N,L){o.push([y,A,N,L])>1||u(y,A)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(A){m(o[0][3],A)}}function l(y){y.value instanceof Gr?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function $E(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof BE=="function"?BE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var lc=t=>t&&typeof t.length=="number"&&typeof t!="function";function dc(t){return le(t?.then)}function fc(t){return le(t[Hi])}function hc(t){return Symbol.asyncIterator&&le(t?.[Symbol.asyncIterator])}function pc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gc=fR();function mc(t){return le(t?.[gc])}function yc(t){return HE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Gr(n.read());if(i)return yield Gr(void 0);yield yield Gr(r)}}finally{n.releaseLock()}})}function _c(t){return le(t?.getReader)}function er(t){if(t instanceof Re)return t;if(t!=null){if(fc(t))return hR(t);if(lc(t))return pR(t);if(dc(t))return gR(t);if(hc(t))return GE(t);if(mc(t))return mR(t);if(_c(t))return yR(t)}throw pc(t)}function hR(t){return new Re(e=>{let n=t[Hi]();if(le(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pR(t){return new Re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function gR(t){return new Re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ac)})}function mR(t){return new Re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function GE(t){return new Re(e=>{_R(t,e).catch(n=>e.error(n))})}function yR(t){return GE(yc(t))}function _R(t,e){var n,r,i,o;return UE(this,void 0,void 0,function*(){try{for(n=$E(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function tn(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function vc(t,e=0){return $i((n,r)=>{n.subscribe(Gi(r,i=>tn(r,t,()=>r.next(i),e),()=>tn(r,t,()=>r.complete(),e),i=>tn(r,t,()=>r.error(i),e)))})}function Ec(t,e=0){return $i((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function qE(t,e){return er(t).pipe(Ec(e),vc(e))}function zE(t,e){return er(t).pipe(Ec(e),vc(e))}function WE(t,e){return new Re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function KE(t,e){return new Re(n=>{let r;return tn(n,e,()=>{r=t[gc](),tn(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function Ic(t,e){if(!t)throw new Error("Iterable cannot be null");return new Re(n=>{tn(n,e,()=>{let r=t[Symbol.asyncIterator]();tn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function QE(t,e){return Ic(yc(t),e)}function YE(t,e){if(t!=null){if(fc(t))return qE(t,e);if(lc(t))return WE(t,e);if(dc(t))return zE(t,e);if(hc(t))return Ic(t,e);if(mc(t))return KE(t,e);if(_c(t))return QE(t,e)}throw pc(t)}function ls(t,e){return e?YE(t,e):er(t)}function Vf(...t){let e=jE(t);return ls(t,e)}function qr(t,e){return $i((n,r)=>{let i=0;n.subscribe(Gi(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:vR}=Array;function ER(t,e){return vR(e)?t(...e):t(e)}function JE(t){return qr(e=>ER(t,e))}var{isArray:IR}=Array,{getPrototypeOf:wR,prototype:TR,keys:DR}=Object;function ZE(t){if(t.length===1){let e=t[0];if(IR(e))return{args:e,keys:null};if(bR(e)){let n=DR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function bR(t){return t&&typeof t=="object"&&wR(t)===TR}function XE(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function jf(...t){let e=VE(t),{args:n,keys:r}=ZE(t),i=new Re(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;er(n[f]).subscribe(Gi(o,m=>{p||(p=!0,l--),c[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?XE(r,c):c),o.complete())}))}});return e?i.pipe(JE(e)):i}var Bf;function wc(){return Bf}function nn(t){let e=Bf;return Bf=t,e}var eI=Symbol("NotFound");function qi(t){return t===eI||t?.name==="\u0275NotFound"}var Sc="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",J=class extends Error{code;constructor(e,n){super(Yr(e,n)),this.code=e}};function AR(t){return`NG0${Math.abs(t)}`}function Yr(t,e){return`${AR(t)}${e?": "+e:""}`}var or=globalThis;function _e(t){for(let e in t)if(t[e]===_e)return e;throw Error("")}function oI(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function tr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(tr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Ac(t,e){return t?e?`${t} ${e}`:t:e||""}var NR=_e({__forward_ref__:_e});function Tn(t){return t.__forward_ref__=Tn,t.toString=function(){return tr(this())},t}function ze(t){return th(t)?t():t}function th(t){return typeof t=="function"&&t.hasOwnProperty(NR)&&t.__forward_ref__===Tn}function we(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nc(t){return RR(t,Rc)}function RR(t,e){return t.hasOwnProperty(e)&&t[e]||null}function MR(t){let e=t?.[Rc]??null;return e||null}function Hf(t){return t&&t.hasOwnProperty(Dc)?t[Dc]:null}var Rc=_e({\u0275prov:_e}),Dc=_e({\u0275inj:_e}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=we({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function nh(t){return t&&!!t.\u0275providers}var rh=_e({\u0275cmp:_e}),ih=_e({\u0275dir:_e}),oh=_e({\u0275pipe:_e});var fs=_e({\u0275fac:_e}),Jr=_e({__NG_ELEMENT_ID__:_e}),tI=_e({__NG_ENV_ID__:_e});function Mc(t){return typeof t=="string"?t:t==null?"":String(t)}function sI(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Mc(t)}var aI=_e({ngErrorCode:_e}),xR=_e({ngErrorMessage:_e}),PR=_e({ngTokenPath:_e});function sh(t,e){return cI("",-200,e)}function xc(t,e){throw new J(-201,!1)}function cI(t,e,n){let r=new J(e,t);return r[aI]=e,r[xR]=t,n&&(r[PR]=n),r}function OR(t){return t[aI]}var $f;function uI(){return $f}function ot(t){let e=$f;return $f=t,e}function ah(t,e,n){let r=Nc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;xc(t,"Injector")}var kR={},zr=kR,FR="__NG_DI_FLAG__",Gf=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Wr(n)||0;try{return this.injector.get(e,r&8?null:zr,r)}catch(i){if(qi(i))return i;throw i}}};function LR(t,e=0){let n=wc();if(n===void 0)throw new J(-203,!1);if(n===null)return ah(t,void 0,e);{let r=VR(e),i=n.retrieve(t,r);if(qi(i)){if(r.optional)return null;throw i}return i}}function me(t,e=0){return(uI()||LR)(ze(t),e)}function j(t,e){return me(t,Wr(e))}function Wr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function VR(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function qf(t){let e=[];for(let n=0;n<t.length;n++){let r=ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=jR(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(me(i,o))}else e.push(me(r))}return e}function jR(t){return t[FR]}function nr(t,e){let n=t.hasOwnProperty(fs);return n?t[fs]:null}function Pc(t,e){t.forEach(n=>Array.isArray(n)?Pc(n,e):e(n))}function lI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ch(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dI(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Oc(t,e,n){let r=Wi(t,e);return r>=0?t[r|1]=n:(r=~r,dI(t,r,e,n)),r}function kc(t,e){let n=Wi(t,e);if(n>=0)return t[n|1]}function Wi(t,e){return BR(t,e,1)}function BR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ar={},st=[],Dn=new $(""),uh=new $("",-1),lh=new $(""),hs=class{get(e,n=zr){if(n===zr){let i=cI("",-201);throw i.name="\u0275NotFound",i}return n}};function Ki(t){return t[rh]||null}function Fc(t){return t[ih]||null}function dh(t){return t[oh]||null}function cr(t){return{\u0275providers:t}}function fI(t){return cr([{provide:Dn,multi:!0,useValue:t}])}function hI(...t){return{\u0275providers:Lc(!0,t),\u0275fromNgModule:!0}}function Lc(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Pc(e,s=>{let c=s;bc(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&pI(i,o),n}function pI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];fh(i,o=>{e(o,r)})}}function bc(t,e,n,r){if(t=ze(t),!t)return!1;let i=null,o=Hf(t),s=!o&&Ki(t);if(!o&&!s){let u=t.ngModule;if(o=Hf(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)bc(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Pc(o.imports,f=>{bc(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&pI(l,e)}if(!c){let l=nr(i)||(()=>new i);e({provide:i,useFactory:l,deps:st},i),e({provide:lh,useValue:i,multi:!0},i),e({provide:Dn,useValue:()=>me(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;fh(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function fh(t,e){for(let n of t)nh(n)&&(n=n.\u0275providers),Array.isArray(n)?fh(n,e):e(n)}var UR=_e({provide:String,useValue:_e});function gI(t){return t!==null&&typeof t=="object"&&UR in t}function HR(t){return!!(t&&t.useExisting)}function $R(t){return!!(t&&t.useFactory)}function Kr(t){return typeof t=="function"}function mI(t){return!!t.useClass}var ms=new $(""),Tc={},nI={},Uf;function ys(){return Uf===void 0&&(Uf=new hs),Uf}var At=class{},Qr=class extends At{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Wf(e,s=>this.processProvider(s)),this.records.set(uh,zi(void 0,this)),i.has("environment")&&this.records.set(At,zi(void 0,this));let o=this.records.get(ms);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lh,st,{self:!0}))}retrieve(e,n){let r=Wr(n)||0;try{return this.get(e,zr,r)}catch(i){if(qi(i))return i;throw i}}destroy(){ds(this),this._destroyed=!0;let e=z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return ds(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ds(this);let n=nn(this),r=ot(void 0),i;try{return e()}finally{nn(n),ot(r)}}get(e,n=zr,r){if(ds(this),e.hasOwnProperty(tI))return e[tI](this);let i=Wr(r),o,s=nn(this),c=ot(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=KR(e)&&Nc(e);f&&this.injectableDefInScope(f)?l=zi(zf(e),Tc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?ys():this.parent;return n=i&8&&n===zr?null:n,u.get(e,n)}catch(u){let l=OR(u);throw l===-200||l===-201?new J(l,null):u}finally{ot(c),nn(s)}}resolveInjectorInitializers(){let e=z(null),n=nn(this),r=ot(void 0),i;try{let o=this.get(Dn,st,{self:!0});for(let s of o)s()}finally{nn(n),ot(r),z(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(tr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ze(e);let n=Kr(e)?e:ze(e&&e.provide),r=qR(e);if(!Kr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=zi(void 0,Tc,!0),i.factory=()=>qf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=z(null);try{if(n.value===nI)throw sh(tr(e));return n.value===Tc&&(n.value=nI,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&WR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zf(t){let e=Nc(t),n=e!==null?e.factory:nr(t);if(n!==null)return n;if(t instanceof $)throw new J(204,!1);if(t instanceof Function)return GR(t);throw new J(204,!1)}function GR(t){if(t.length>0)throw new J(204,!1);let n=MR(t);return n!==null?()=>n.factory(t):()=>new t}function qR(t){if(gI(t))return zi(void 0,t.useValue);{let e=hh(t);return zi(e,Tc)}}function hh(t,e,n){let r;if(Kr(t)){let i=ze(t);return nr(i)||zf(i)}else if(gI(t))r=()=>ze(t.useValue);else if($R(t))r=()=>t.useFactory(...qf(t.deps||[]));else if(HR(t))r=(i,o)=>me(ze(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ze(t&&(t.useClass||t.provide));if(zR(t))r=()=>new i(...qf(t.deps));else return nr(i)||zf(i)}return r}function ds(t){if(t.destroyed)throw new J(205,!1)}function zi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function zR(t){return!!t.deps}function WR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function KR(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Wf(t,e){for(let n of t)Array.isArray(n)?Wf(n,e):n&&nh(n)?Wf(n.\u0275providers,e):e(n)}function _s(t,e){let n;t instanceof Qr?(ds(t),n=t):n=new Gf(t);let r,i=nn(n),o=ot(void 0);try{return e()}finally{nn(i),ot(o)}}function yI(){return uI()!==void 0||wc()!=null}var at=0,U=1,Q=2,We=3,Nt=4,Ut=5,gt=6,Qi=7,Me=8,vt=9,on=10,ye=11,Yi=12,ph=13,Zr=14,ct=15,Xr=16,ei=17,ti=18,vs=19,gh=20,wn=21,Vc=22,Es=23,Et=24,ni=25,ri=26,Ie=27,_I=1,Ht=6,sn=7,vI=8,Is=9,xe=10;function It(t){return Array.isArray(t)&&typeof t[_I]=="object"}function $t(t){return Array.isArray(t)&&t[_I]===!0}function mh(t){return(t.flags&4)!==0}function bn(t){return t.componentOffset>-1}function jc(t){return(t.flags&1)===1}function an(t){return!!t.template}function ii(t){return(t[Q]&512)!==0}function ur(t){return(t[Q]&256)===256}var yh="svg",EI="math";function wt(t){for(;Array.isArray(t);)t=t[at];return t}function _h(t,e){return wt(e[t])}function Gt(t,e){return wt(e[t.index])}function oi(t,e){return t.data[e]}function II(t,e){return t[e]}function vh(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Rt(t,e){let n=e[t];return It(n)?n:n[at]}function Bc(t){return(t[Q]&128)===128}function lr(t,e){return e==null?null:t[e]}function Eh(t){t[ei]=0}function Ih(t){t[Q]&1024||(t[Q]|=1024,Bc(t)&&Ji(t))}function wI(t,e){for(;t>0;)e=e[Zr],t--;return e}function ws(t){return!!(t[Q]&9216||t[Et]?.dirty)}function Uc(t){t[on].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),ws(t)&&Ji(t)}function Ji(t){t[on].changeDetectionScheduler?.notify(0);let e=rr(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Bc(e)));)e=rr(e)}function wh(t,e){if(ur(t))throw new J(911,!1);t[wn]===null&&(t[wn]=[]),t[wn].push(e)}function TI(t,e){if(t[wn]===null)return;let n=t[wn].indexOf(e);n!==-1&&t[wn].splice(n,1)}function rr(t){let e=t[We];return $t(e)?e[We]:e}function DI(t){return t[Qi]??=[]}function bI(t){return t.cleanup??=[]}var ne={lFrame:HI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Kf=!1;function CI(){return ne.lFrame.elementDepthCount}function SI(){ne.lFrame.elementDepthCount++}function AI(){ne.lFrame.elementDepthCount--}function NI(){return ne.bindingsEnabled}function Th(){return ne.skipHydrationRootTNode!==null}function RI(t){return ne.skipHydrationRootTNode===t}function MI(t){ne.skipHydrationRootTNode=t}function xI(){ne.skipHydrationRootTNode=null}function de(){return ne.lFrame.lView}function Je(){return ne.lFrame.tView}function fe(t){return ne.lFrame.contextLView=t,t[Me]}function he(t){return ne.lFrame.contextLView=null,t}function Mt(){let t=Dh();for(;t!==null&&t.type===64;)t=t.parent;return t}function Dh(){return ne.lFrame.currentTNode}function PI(){let t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Zi(t,e){let n=ne.lFrame;n.currentTNode=t,n.isParent=e}function bh(){return ne.lFrame.isParent}function OI(){ne.lFrame.isParent=!1}function Ch(){return Kf}function Sh(t){let e=Kf;return Kf=t,e}function kI(){let t=ne.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function FI(t){return ne.lFrame.bindingIndex=t}function Xi(){return ne.lFrame.bindingIndex++}function Ah(t){let e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function LI(){return ne.lFrame.inI18n}function VI(t,e){let n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Hc(e)}function jI(){return ne.lFrame.currentDirectiveIndex}function Hc(t){ne.lFrame.currentDirectiveIndex=t}function BI(t){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Nh(t){ne.lFrame.currentQueryIndex=t}function QR(t){let e=t[U];return e.type===2?e.declTNode:e.type===1?t[Ut]:null}function Rh(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=QR(o),i===null||(o=o[Zr],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ne.lFrame=UI();return r.currentTNode=e,r.lView=t,!0}function $c(t){let e=UI(),n=t[U];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function UI(){let t=ne.lFrame,e=t===null?null:t.child;return e===null?HI(t):e}function HI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function $I(){let t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Mh=$I;function Gc(){let t=$I();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function GI(t){return(ne.lFrame.contextLView=wI(t,ne.lFrame.contextLView))[Me]}function Cn(){return ne.lFrame.selectedIndex}function dr(t){ne.lFrame.selectedIndex=t}function xh(){let t=ne.lFrame;return oi(t.tView,t.selectedIndex)}function qc(){ne.lFrame.currentNamespace=yh}function zc(){YR()}function YR(){ne.lFrame.currentNamespace=null}function Ph(){return ne.lFrame.currentNamespace}var qI=!0;function Wc(){return qI}function Sn(t){qI=t}function Qf(t,e=null,n=null,r){let i=zI(t,e,n,r);return i.resolveInjectorInitializers(),i}function zI(t,e=null,n=null,r,i=new Set){let o=[n||st,hI(t)];return r=r||(typeof t=="object"?void 0:tr(t)),new Qr(o,e||ys(),r||null,i)}var Bt=class t{static THROW_IF_NOT_FOUND=zr;static NULL=new hs;static create(e,n){if(Array.isArray(e))return Qf({name:""},n,e,"");{let r=e.name??"";return Qf({name:r},e.parent,e.providers,r)}}static \u0275prov=we({token:t,providedIn:"any",factory:()=>me(uh)});static __NG_ELEMENT_ID__=-1},ut=new $(""),An=(()=>{class t{static __NG_ELEMENT_ID__=JR;static __NG_ENV_ID__=n=>n}return t})(),Yf=class extends An{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ur(this._lView)}onDestroy(e){let n=this._lView;return wh(n,e),()=>TI(n,e)}};function JR(){return new Yf(de())}var WI=!1,fr=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new us(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Re(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=we({token:t,providedIn:"root",factory:()=>new t})}return t})(),Jf=class extends en{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,yI()&&(this.destroyRef=j(An,{optional:!0})??void 0,this.pendingTasks=j(fr,{optional:!0})??void 0)}emit(e){let n=z(null);try{super.next(e)}finally{z(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof it&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_t=Jf;function Cc(...t){}function Oh(t){let e,n;function r(){t=Cc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function kh(t){return queueMicrotask(()=>t()),()=>{t=Cc}}var Fh="isAngularZone",ps=Fh+"_ID",ZR=0,pt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _t(!1);onMicrotaskEmpty=new _t(!1);onStable=new _t(!1);onError=new _t(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=WI}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fh)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new J(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XR,Cc,Cc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},XR={};function Lh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Oh(()=>{t.callbackScheduled=!1,Zf(t),t.isCheckStableRunning=!0,Lh(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Zf(t)}function tM(t){let e=()=>{eM(t)},n=ZR++;t._inner=t._inner.fork({name:"angular",properties:{[Fh]:!0,[ps]:n,[ps+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(nM(u))return r.invokeTask(o,s,c,u);try{return rI(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),iI(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return rI(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rM(u)&&e(),iI(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Zf(t),Lh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Zf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function rI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function iI(t){t._nesting--,Lh(t)}var gs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _t;onMicrotaskEmpty=new _t;onStable=new _t;onError=new _t;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nM(t){return KI(t,"__ignore_ng_zone__")}function rM(t){return KI(t,"__scheduler_tick__")}function KI(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var rn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Nn=new $("",{factory:()=>{let t=j(pt),e=j(At),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(rn),n.handleError(r))})}}}),QI={provide:Dn,useValue:()=>{let t=j(rn,{optional:!0})},multi:!0},iM=new $("",{factory:()=>{let t=j(ut).defaultView;if(!t)return;let e=j(Nn),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),j(An).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Vh(){return cr([fI(()=>void j(iM))])}function ve(t,e){let[n,r,i]=Af(t,e?.equal),o=n,s=o[yt];return o.set=r,o.update=i,o.asReadonly=YI.bind(o),o}function YI(){let t=this[yt];if(t.readonlyFn===void 0){let e=()=>this();e[yt]=t,t.readonlyFn=e}return t.readonlyFn}var Kc=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=oM}return t})();function oM(){return new Kc(de(),Mt())}var ir=class{},Ts=new $("",{factory:()=>!0});var jh=new $(""),Qc=(()=>{class t{internalPendingTasks=j(fr);scheduler=j(ir);errorHandler=j(Nn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=we({token:t,providedIn:"root",factory:()=>new t})}return t})(),Bh=(()=>{class t{static \u0275prov=we({token:t,providedIn:"root",factory:()=>new Xf})}return t})(),Xf=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},eh=class{[yt];constructor(e){this[yt]=e}destroy(){this[yt].destroy()}};function cn(t){return Rf(t)}var Yc={JSACTION:"jsaction"};function xs(t){return{toString:t}.toString()}function Fw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var su=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},wu=(()=>{let t=()=>Lw;return t.ngInherit=!0,t})();function Lw(t){return t.type.prototype.ngOnChanges&&(t.setInput=pM),hM}function hM(){let t=jw(this),e=t?.current;if(e){let n=t.previous;if(n===ar)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function pM(t,e,n,r,i){let o=this.declaredInputs[r],s=jw(t)||gM(t,{previous:ar,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new su(l&&l.currentValue,n,u===ar),Fw(t,e,i,n)}var Vw="__ngSimpleChanges__";function jw(t){return t[Vw]||null}function gM(t,e){return t[Vw]=e}var JI=[];var pe=function(t,e=null,n){for(let r=0;r<JI.length;r++){let i=JI[r];i(t,e,n)}},ce=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(ce||{});function mM(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Lw(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function yM(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function tu(t,e,n){Bw(t,e,3,n)}function nu(t,e,n,r){(t[Q]&3)===n&&Bw(t,e,n,r)}function Uh(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function Bw(t,e,n,r){let i=r!==void 0?t[ei]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[ei]+=65536),(c<o||o==-1)&&(_M(t,n,e,u),t[ei]=(t[ei]&4294901760)+u+2),u++}function ZI(t,e){pe(ce.LifecycleHookStart,t,e);let n=z(null);try{e.call(t)}finally{z(n),pe(ce.LifecycleHookEnd,t,e)}}function _M(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[Q]>>14<t[ei]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,ZI(c,o)):ZI(c,o)}var to=-1,ai=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function vM(t){return(t.flags&8)!==0}function EM(t){return(t.flags&16)!==0}function IM(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];TM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function wM(t){return t===3||t===4||t===6}function TM(t){return t.charCodeAt(0)===64}function Cs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?XI(t,n,i,null,e[++r]):XI(t,n,i,null,null))}}return t}function XI(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function DM(t){return t!==to}function ep(t){return t&32767}function bM(t){return t>>16}function tp(t,e){let n=bM(t),r=e;for(;n>0;)r=r[Zr],n--;return r}var np=!0;function au(t){let e=np;return np=t,e}var CM=256,Uw=CM-1,Hw=5,SM=0,un={};function AM(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Jr)&&(r=n[Jr]),r==null&&(r=n[Jr]=SM++);let i=r&Uw,o=1<<i;e.data[t+(i>>Hw)]|=o}function cu(t,e){let n=$w(t,e);if(n!==-1)return n;let r=e[U];r.firstCreatePass&&(t.injectorIndex=e.length,Hh(r.data,t),Hh(e,null),Hh(r.blueprint,null));let i=Gw(t,e),o=t.injectorIndex;if(DM(i)){let s=ep(i),c=tp(i,e),u=c[U].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Hh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $w(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Gw(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Qw(i),r===null)return to;if(n++,i=i[Zr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return to}function rp(t,e,n){AM(t,e,n)}function qw(t,e,n){if(n&8||t!==void 0)return t;xc(e,"NodeInjector")}function zw(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[vt],o=ot(void 0);try{return i?i.get(e,r,n&8):ah(e,r,n&8)}finally{ot(o)}}return qw(r,e,n)}function Ww(t,e,n,r=0,i){if(t!==null){if(e[Q]&2048&&!(r&2)){let s=PM(t,e,n,r,un);if(s!==un)return s}let o=Kw(t,e,n,r,un);if(o!==un)return o}return zw(e,n,r,i)}function Kw(t,e,n,r,i){let o=MM(n);if(typeof o=="function"){if(!Rh(e,t,r))return r&1?qw(i,n,r):zw(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))xc(n);else return s}finally{Mh()}}else if(typeof o=="number"){let s=null,c=$w(t,e),u=to,l=r&1?e[ct][Ut]:null;for((c===-1||r&4)&&(u=c===-1?Gw(t,e):e[c+8],u===to||!tw(r,!1)?c=-1:(s=e[U],c=ep(u),e=tp(u,e)));c!==-1;){let f=e[U];if(ew(o,c,f.data)){let p=NM(c,e,n,s,r,l);if(p!==un)return p}u=e[c+8],u!==to&&tw(r,e[U].data[c+8]===l)&&ew(o,c,e)?(s=f,c=ep(u),e=tp(u,e)):c=-1}}return i}function NM(t,e,n,r,i,o){let s=e[U],c=s.data[t+8],u=r==null?bn(c)&&np:r!=s&&(c.type&3)!==0,l=i&1&&o===c,f=RM(c,s,n,u,l);return f!==null?uu(e,s,f,c,i):un}function RM(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,m=i?c+f:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&an(y)&&y.type===n)return u}return null}function uu(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ai){let c=o;if(c.resolving){let y=sI(s[n]);throw sh(y)}let u=au(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],f,p=c.injectImpl?ot(c.injectImpl):null,m=Rh(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&mM(n,s[n],e)}finally{p!==null&&ot(p),au(u),c.resolving=!1,Mh()}}return o}function MM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Jr)?t[Jr]:void 0;return typeof e=="number"?e>=0?e&Uw:xM:e}function ew(t,e,n){let r=1<<t;return!!(n[e+(t>>Hw)]&r)}function tw(t,e){return!(t&2)&&!(t&1&&e)}var lu=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Ww(this._tNode,this._lView,e,Wr(r),n)}};function xM(){return new lu(Mt(),de())}function Ps(t){return xs(()=>{let e=t.prototype.constructor,n=e[fs]||ip(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[fs]||ip(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ip(t){return th(t)?()=>{let e=ip(ze(t));return e&&e()}:nr(t)}function PM(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!ii(s);){let c=Kw(o,s,n,r|2,un);if(c!==un)return c;let u=o.parent;if(!u){let l=s[gh];if(l){let f=l.get(n,un,r);if(f!==un)return f}u=Qw(s),s=s[Zr]}o=u}return i}function Qw(t){let e=t[U],n=e.type;return n===2?e.declTNode:n===1?t[Ut]:null}function OM(){return Yw(Mt(),de())}function Yw(t,e){return new hr(Gt(t,e))}var hr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=OM}return t})();var Jw="ngSkipHydration",kM="ngskiphydration";function Zw(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===kM)return!0}return!1}function Xw(t){return t.hasAttribute(Jw)}function du(t){return(t.flags&128)===128}function eT(t){if(du(t))return!0;let e=t.parent;for(;e;){if(du(t)||Zw(e))return!0;e=e.parent}return!1}var Rp=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Rp||{}),tT=new Map,FM=0;function LM(){return FM++}function VM(t){tT.set(t[vs],t)}function op(t){tT.delete(t[vs])}var nw="__ngContext__";function io(t,e){It(e)?(t[nw]=e[vs],VM(e)):t[nw]=e}function nT(t){return iT(t[Yi])}function rT(t){return iT(t[Nt])}function iT(t){for(;t!==null&&!$t(t);)t=t[Nt];return t}var sp;function Mp(t){sp=t}function xp(){if(sp!==void 0)return sp;if(typeof document<"u")return document;throw new J(210,!1)}var dn=new $("",{factory:()=>jM}),jM="ng";var Tu=new $(""),Os=new $("",{providedIn:"platform",factory:()=>"unknown"});var Du=new $("",{factory:()=>j(ut).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ao=(()=>{class t{static \u0275prov=we({token:t,providedIn:"root",factory:()=>{let n=new t;return n.store=BM(j(ut),j(dn)),n}});store={};onSerializeCallbacks={};get(n,r){return this.store[n]!==void 0?this.store[n]:r}set(n,r){this.store[n]=r}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,r){this.onSerializeCallbacks[n]=r}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();function BM(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var oT="h",sT="b",UM="f",HM="n",aT="e",cT="t",bu="c",Pp="x",Ss="r",uT="i",lT="n",Op="d";var dT="di",fT="s",hT="p";var ks=new $(""),pT=!1,kp=new $("",{factory:()=>pT});var Fp=new $(""),gT=!1,mT=new $(""),Lp=new $("",{factory:()=>new Map});var Fs="ngb";var yT=(t,e,n)=>{let r=t,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(n),i.set(e,o),r.__jsaction_fns=i},_T=(t,e)=>{let n=t,r=n.getAttribute(Fs)??"",i=e.get(r)??new Set;i.has(n)||i.add(n),e.set(r,i)};var vT=t=>{t.removeAttribute(Yc.JSACTION),t.removeAttribute(Fs),t.__jsaction_fns=void 0},ET=new $("",{factory:()=>({})});function Vp(t,e){let n=e?.__jsaction_fns?.get(t.type);if(!(!n||!e?.isConnected))for(let r of n)r(t)}var ap=new Map;function IT(t,e){return ap.set(t,e),()=>ap.delete(t)}var rw=!1,wT=(t,e,n,r)=>{};function $M(t,e,n,r){wT(t,e,n,r)}function TT(){rw||(wT=(t,e,n,r)=>{let i=t[vt].get(dn);ap.get(i)?.(e,n,r)},rw=!0)}var Cu=new $("");function Su(t){return(t.flags&32)===32}var GM="__nghData__",jp=GM,qM="__nghDeferData__",DT=qM;var ru="ngh",bT="nghm",CT=()=>null;function zM(t,e,n=!1){let r=t.getAttribute(ru);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",c=n?i:s,u={};if(r!==""){let f=e.get(ao,null,{optional:!0});f!==null&&(u=f.get(jp,[])[Number(r)])}let l={data:u,firstChild:t.firstChild??null};return n&&(l.firstChild=t,Au(l,0,t.nextSibling)),c?t.setAttribute(ru,c):t.removeAttribute(ru),l}function ST(){CT=zM}function AT(t,e,n=!1){return CT(t,e,n)}function NT(t){let e=t._lView;return e[U].type===2?null:(ii(e)&&(e=e[Ie]),e)}function WM(t){return t.textContent?.replace(/\s/gm,"")}function KM(t){let e=xp(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=WM(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Au(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function cp(t,e){return t.segmentHeads?.[e]??null}function RT(t){return t.get(mT,!1,{optional:!0})}function QM(t,e){let n=t.data,r=n[aT]?.[e]??null;return r===null&&n[bu]?.[e]&&(r=Bp(t,e)),r}function MT(t,e){return t.data[bu]?.[e]??null}function Bp(t,e){let n=MT(t,e)??[],r=0;for(let i of n)r+=i[Ss]*(i[Pp]??1);return r}function YM(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[Op];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function xT(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[Op];t.disconnectedNodes=n?new Set(n):null}return!!YM(t)?.has(e)}function Nu(t,e){let n=t[gt];return n!==null&&!Th()&&!Su(e)&&!xT(n,e.index-Ie)}function JM(t,e){let n=e.get(Cu),i=e.get(ao).get(DT,{}),o=!1,s=t,c=null,u=[];for(;!o&&s;){o=n.has(s);let l=n.hydrating.get(s);if(c===null&&l!=null){c=l.promise;break}u.unshift(s),s=i[s][hT]}return{parentBlockPromise:c,hydrationQueue:u}}function $h(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===bT}function iw(t){for(;t&&t.nodeType===Node.TEXT_NODE;)t=t.previousSibling;return t}function PT(t){for(let r of t.body.childNodes)if($h(r))return;let e=iw(t.body.previousSibling);if($h(e))return;let n=iw(t.head.lastChild);if(!$h(n))throw new J(-507,!1)}function OT(t,e){let n=t.contentQueries;if(n!==null){let r=z(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];Nh(o),c.contentQueries(2,e[s],s)}}}finally{z(r)}}}function up(t,e,n){Nh(0);let r=z(null);try{e(t,n)}finally{z(r)}}function kT(t,e,n){if(mh(e)){let r=z(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{z(r)}}}var Wt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Wt||{});var Jc;function ZM(){if(Jc===void 0&&(Jc=null,or.trustedTypes))try{Jc=or.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Jc}function Ru(t){return ZM()?.createHTML(t)||t}var Zc;function XM(){if(Zc===void 0&&(Zc=null,or.trustedTypes))try{Zc=or.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Zc}function ow(t){return XM()?.createHTML(t)||t}var fu=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Sc})`}};function Ls(t){return t instanceof fu?t.changingThisBreaksApplicationSecurity:t}function Up(t,e){let n=FT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Sc})`)}return n===e}function FT(t){return t instanceof fu&&t.getTypeName()||null}function ex(t){let e=new dp(t);return tx()?new lp(e):e}var lp=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Ru(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},dp=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Ru(e),n}};function tx(){try{return!!new window.DOMParser().parseFromString(Ru(""),"text/html")}catch{return!1}}var nx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hp(t){return t=String(t),t.match(nx)?t:"unsafe:"+t}function Rn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Vs(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var LT=Rn("area,br,col,hr,img,wbr"),VT=Rn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jT=Rn("rp,rt"),rx=Vs(jT,VT),ix=Vs(VT,Rn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ox=Vs(jT,Rn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sw=Vs(LT,ix,ox,rx),BT=Rn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sx=Rn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ax=Rn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),cx=Vs(BT,sx,ax),ux=Rn("script,style,template"),fp=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=fx(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=dx(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=aw(e).toLowerCase();if(!sw.hasOwnProperty(n))return this.sanitizedSomething=!0,!ux.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,c=s.toLowerCase();if(!cx.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let u=o.value;BT[c]&&(u=Hp(u)),this.buf.push(" ",s,'="',cw(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=aw(e).toLowerCase();sw.hasOwnProperty(n)&&!LT.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(cw(e))}};function lx(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function dx(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw UT(e);return e}function fx(t){let e=t.firstChild;if(e&&lx(t,e))throw UT(e);return e}function aw(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function UT(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var hx=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,px=/([^\#-~ |!])/g;function cw(t){return t.replace(/&/g,"&amp;").replace(hx,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(px,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Xc;function $p(t,e){let n=null;try{Xc=Xc||ex(t);let r=e?String(e):"";n=Xc.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Xc.getInertBodyElement(r)}while(r!==o);let c=new fp().sanitizeChildren(uw(n)||n);return Ru(c)}finally{if(n){let r=uw(n)||n;for(;r.firstChild;)r.firstChild.remove()}}}function uw(t){return"content"in t&&gx(t)?t.content:null}function gx(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var mx=/^>|^->|<!--|-->|--!>|<!-$/g,yx=/(<|>)/g,_x="\u200B$1\u200B";function vx(t){return t.replace(mx,e=>e.replace(yx,_x))}function HT(t,e){return t.createText(e)}function Ex(t,e,n){t.setValue(e,n)}function $T(t,e){return t.createComment(vx(e))}function Gp(t,e,n){return t.createElement(e,n)}function hu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function GT(t,e,n){t.appendChild(e,n)}function lw(t,e,n,r,i){r!==null?hu(t,e,n,r,i):GT(t,e,n)}function qp(t,e,n,r){t.removeChild(null,e,n,r)}function qT(t){t.textContent=""}function Ix(t,e,n){t.setAttribute(e,"style",n)}function wx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function zT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&IM(t,e,r),i!==null&&wx(t,e,i),o!==null&&Ix(t,e,o)}var Mu=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Mu||{});function xu(t){let e=Tx();return e?ow(e.sanitize(Mu.HTML,t)||""):Up(t,"HTML")?ow(Ls(t)):$p(xp(),Mc(t))}function Tx(){let t=de();return t&&t[on].sanitizer}function WT(t){return t.ownerDocument.body}function Dx(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var KT="ng-template";function bx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Dx(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(zp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function zp(t){return t.type===4&&t.value!==KT}function Cx(t,e,n){let r=t.type===4&&!n?KT:t.value;return e===r}function Sx(t,e,n){let r=4,i=t.attrs,o=i!==null?Rx(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!qt(r)&&!qt(u))return!1;if(s&&qt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Cx(t,u,n)||u===""&&e.length===1){if(qt(r))return!1;s=!0}}else if(r&8){if(i===null||!bx(t,i,u,n)){if(qt(r))return!1;s=!0}}else{let l=e[++c],f=Ax(u,i,zp(t),n);if(f===-1){if(qt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(qt(r))return!1;s=!0}}}}return qt(r)||s}function qt(t){return(t&1)===0}function Ax(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Mx(e,t)}function Nx(t,e,n=!1){for(let r=0;r<e.length;r++)if(Sx(t,e[r],n))return!0;return!1}function Rx(t){for(let e=0;e<t.length;e++){let n=t[e];if(wM(n))return e}return t.length}function Mx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function dw(t,e){return t?":not("+e.trim()+")":e}function xx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!qt(s)&&(e+=dw(o,i),i=""),r=s,o=o||!qt(r);n++}return i!==""&&(e+=dw(o,i)),e}function Px(t){return t.map(xx).join(",")}function Ox(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!qt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var xt={};function Wp(t,e,n,r,i,o,s,c,u,l,f){let p=Ie+r,m=p+i,y=kx(p,m),C=typeof l=="function"?l():l;return y[U]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:f}}function kx(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:xt);return n}function Fx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Wp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Kp(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[at]=i,p[Q]=r|4|128|8|64|1024,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),Eh(p),p[We]=p[Zr]=t,p[Me]=n,p[on]=s||t&&t[on],p[ye]=c||t&&t[ye],p[vt]=u||t&&t[vt]||null,p[Ut]=o,p[vs]=LM(),p[gt]=f,p[gh]=l,p[ct]=e.type==2?t[ct]:p,p}function Lx(t,e,n){let r=Gt(e,t),i=Fx(n),o=t[on].rendererFactory,s=JT(t,Kp(t,i,null,QT(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function QT(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function YT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function JT(t,e){return t[Yi]?t[ph][Nt]=e:t[Yi]=e,t[ph]=e,e}function W(t=1){ZT(Je(),de(),Cn()+t,!1)}function ZT(t,e,n,r){if(!r)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&tu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&nu(e,o,0,n)}dr(n)}var Pu=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Pu||{});function hp(t,e,n,r){let i=z(null);try{let[o,s,c]=t.inputs[n],u=null;(s&Pu.SignalBased)!==0&&(u=e[o][yt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):Fw(e,u,o,r)}finally{z(i)}}var ln=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(ln||{}),Vx;function Qp(t,e){return Vx(t,e)}var ci=new Set,Ou=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Ou||{}),pr=new $(""),fw=new Set;function Kt(t){fw.has(t)||(fw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Yp=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=we({token:t,providedIn:"root",factory:()=>new t})}return t})(),XT=[0,1,2,3],eD=(()=>{class t{ngZone=j(pt);scheduler=j(ir);errorHandler=j(rn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){j(pr,{optional:!0})}execute(){let n=this.sequences.size>0;n&&pe(ce.AfterRenderHooksStart),this.executing=!0;for(let r of XT)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&pe(ce.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[ni]??=[]).push(n),Ji(r),r[Q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Ou.AFTER_NEXT_RENDER,n):n()}static \u0275prov=we({token:t,providedIn:"root",factory:()=>new t})}return t})(),pu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ni];e&&(this.view[ni]=e.filter(n=>n!==this))}};function ku(t,e){let n=e?.injector??j(Bt);return Kt("NgAfterNextRender"),Bx(t,n,e,!0)}function jx(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Bx(t,e,n,r){let i=e.get(Yp);i.impl??=e.get(eD);let o=e.get(pr,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(An):null,c=e.get(Kc,null,{optional:!0}),u=new pu(i.impl,jx(t),c?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var tD=new $("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function nD(t,e,n){let r=t.get(tD);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Ux(t,e){let n=t.get(tD);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function Hx(t,e){for(let[n,r]of e)nD(t,r.animateFns)}function hw(t,e,n,r){let i=t?.[ri]?.enter;e!==null&&i&&i.has(n.index)&&Hx(r,i)}function eo(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;$t(i)?u=i:It(i)&&(l=!0,i=i[at]);let f=wt(i);t===0&&r!==null?(hw(c,r,o,n),s==null?GT(e,r,f):hu(e,r,f,s||null,!0)):t===1&&r!==null?(hw(c,r,o,n),hu(e,r,f,s||null,!0)):t===2?pw(c,o,n,p=>{qp(e,f,l,p)}):t===3&&pw(c,o,n,()=>{e.destroyNode(f)}),u!=null&&tP(e,t,n,u,o,r,s)}}function $x(t,e){rD(t,e),e[at]=null,e[Ut]=null}function Gx(t,e,n,r,i,o){r[at]=i,r[Ut]=e,Fu(t,r,n,1,i,o)}function rD(t,e){e[on].changeDetectionScheduler?.notify(9),Fu(t,e,e[ye],2,null,null)}function qx(t){let e=t[Yi];if(!e)return Gh(t[U],t);for(;e;){let n=null;if(It(e))n=e[Yi];else{let r=e[xe];r&&(n=r)}if(!n){for(;e&&!e[Nt]&&e!==t;)It(e)&&Gh(e[U],e),e=e[We];e===null&&(e=t),It(e)&&Gh(e[U],e),n=e&&e[Nt]}e=n}}function Jp(t,e){let n=t[Is],r=n.indexOf(e);n.splice(r,1)}function Zp(t,e){if(ur(e))return;let n=e[ye];n.destroyNode&&Fu(t,e,n,3,null,null),qx(e)}function Gh(t,e){if(ur(e))return;let n=z(null);try{e[Q]&=-129,e[Q]|=256,e[Et]&&nc(e[Et]),Kx(t,e),Wx(t,e),e[U].type===1&&e[ye].destroy();let r=e[Xr];if(r!==null&&$t(e[We])){r!==e[We]&&Jp(r,e);let i=e[ti];i!==null&&i.detachView(t)}op(e)}finally{z(n)}}function pw(t,e,n,r){let i=t?.[ri];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&ci.add(t),nD(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();c.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),zx(t,r)}else t&&ci.delete(t),r(!1)},i)}function zx(t,e){let n=t[ri]?.running;if(n){n.then(()=>{t[ri].running=void 0,ci.delete(t),e(!0)});return}e(!1)}function Wx(t,e){let n=t.cleanup,r=e[Qi];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[Qi]=null);let i=e[wn];if(i!==null){e[wn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Es];if(o!==null){e[Es]=null;for(let s of o)s.destroy()}}function Kx(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ai)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];pe(ce.LifecycleHookStart,c,u);try{u.call(c)}finally{pe(ce.LifecycleHookEnd,c,u)}}else{pe(ce.LifecycleHookStart,i,o);try{o.call(i)}finally{pe(ce.LifecycleHookEnd,i,o)}}}}}function Qx(t,e,n){return Yx(t,e.parent,n)}function Yx(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[at];if(bn(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Wt.None||i===Wt.Emulated)return null}return Gt(r,n)}function Jx(t,e,n){return Xx(t,e,n)}function Zx(t,e,n){return t.type&40?Gt(t,n):null}var Xx=Zx,gw;function Xp(t,e,n,r){let i=Qx(t,r,e),o=e[ye],s=r.parent||e[Ut],c=Jx(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)lw(o,i,n[u],c,!1);else lw(o,i,n,c,!1);gw!==void 0&&gw(o,r,e,n,i)}function Ds(t,e){if(e!==null){let n=e.type;if(n&3)return Gt(e,t);if(n&4)return pp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ds(t,r);{let i=t[e.index];return $t(i)?pp(-1,i):wt(i)}}else{if(n&128)return Ds(t,e.next);if(n&32)return Qp(e,t)()||wt(t[e.index]);{let r=iD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=rr(t[ct]);return Ds(i,r)}else return Ds(t,e.next)}}}return null}function iD(t,e){if(e!==null){let r=t[ct][Ut],i=e.projection;return r.projection[i]}return null}function pp(t,e){let n=xe+t+1;if(n<e.length){let r=e[n],i=r[U].firstChild;if(i!==null)return Ds(r,i)}return e[sn]}function eg(t,e,n,r,i,o,s){for(;n!=null;){let c=r[vt];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&io(wt(u),r),n.flags|=2),!Su(n))if(l&8)eg(t,e,n.child,r,i,o,!1),eo(e,t,c,i,u,n,o,r);else if(l&32){let f=Qp(n,r),p;for(;p=f();)eo(e,t,c,i,p,n,o,r);eo(e,t,c,i,u,n,o,r)}else l&16?eP(t,e,r,n,i,o):eo(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Fu(t,e,n,r,i,o){eg(n,r,t.firstChild,e,i,o,!1)}function eP(t,e,n,r,i,o){let s=n[ct],u=s[Ut].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];eo(e,t,n[vt],i,f,r,o,n)}else{let l=u,f=s[We];du(r)&&(l.flags|=128),eg(t,e,l,f,i,o,!0)}}function tP(t,e,n,r,i,o,s){let c=r[sn],u=wt(r);c!==u&&eo(e,t,n,o,c,i,s);for(let l=xe;l<r.length;l++){let f=r[l];Fu(f[U],f,t,e,o,c)}}function nP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:ln.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ln.Important),t.setStyle(n,r,i,o))}}function oD(t,e,n,r,i){let o=Cn(),s=r&2;try{dr(-1),s&&e.length>Ie&&ZT(t,e,Ie,!1);let c=s?ce.TemplateUpdateStart:ce.TemplateCreateStart;pe(c,i,n),n(r,i)}finally{dr(o);let c=s?ce.TemplateUpdateEnd:ce.TemplateCreateEnd;pe(c,i,n)}}function sD(t,e,n){uP(t,e,n),(n.flags&64)===64&&lP(t,e,n)}function aD(t,e,n=Gt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function rP(t,e,n,r){let o=r.get(kp,pT)||n===Wt.ShadowDom||n===Wt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return iP(s),s}function iP(t){cD(t)}var cD=()=>null;function oP(t){Xw(t)?qT(t):KM(t)}function uD(){cD=oP}function sP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function lD(t,e,n,r,i,o){let s=e[U];if(ng(t,s,e,n,r)){bn(t)&&cP(e,t.index);return}t.type&3&&(n=sP(n)),aP(t,e,n,r,i,o)}function aP(t,e,n,r,i,o){if(t.type&3){let s=Gt(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function cP(t,e){let n=Rt(e,t);n[Q]&16||(n[Q]|=64)}function uP(t,e,n){let r=n.directiveStart,i=n.directiveEnd;bn(n)&&Lx(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||cu(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=uu(e,t,s,n);if(io(u,e),o!==null&&hP(e,s-r,u,c,n,o),an(c)){let l=Rt(n.index,e);l[Me]=uu(e,t,s,n)}}}function lP(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=jI();try{dr(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Hc(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&dP(u,l)}}finally{dr(-1),Hc(s)}}function dP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function fP(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Nx(e,o.selectors,!1)&&(r??=[],an(o)?r.unshift(o):r.push(o))}return r}function hP(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];hp(r,n,u,l)}}function pP(t,e,n,r,i){let o=Ie+n,s=e[U],c=i(s,e,t,r,n);e[o]=c,Zi(t,!0);let u=t.type===2;return u?(zT(e[ye],c,t),(CI()===0||jc(t))&&io(c,e),SI()):io(c,e),Wc()&&(!u||!Su(t))&&Xp(s,e,c,t),t}function gP(t){let e=t;return bh()?OI():(e=e.parent,Zi(e,!1)),e}function tg(t,e){let n=t[vt];if(!n)return;let r;try{r=n.get(Nn,null)}catch{r=null}r?.(e)}function ng(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];hp(p,n[l],f,i),c=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];hp(f,l,r,i),c=!0}return c}function mP(t,e){let n=Rt(e,t),r=n[U];yP(r,n);let i=n[at];i!==null&&n[gt]===null&&(n[gt]=AT(i,n[vt])),pe(ce.ComponentStart);try{rg(r,n,n[Me])}finally{pe(ce.ComponentEnd,n[Me])}}function yP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function rg(t,e,n){$c(e);try{let r=t.viewQuery;r!==null&&up(1,r,n);let i=t.template;i!==null&&oD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ti]?.finishViewCreation(t),t.staticContentQueries&&OT(t,e),t.staticViewQueries&&up(2,t.viewQuery,n);let o=t.components;o!==null&&_P(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,Gc()}}function _P(t,e){for(let n=0;n<e.length;n++)mP(t,e[n])}function Lu(t,e,n,r){let i=z(null);try{let o=e.tView,c=t[Q]&4096?4096:16,u=Kp(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Xr]=l;let f=t[ti];return f!==null&&(u[ti]=f.createEmbeddedView(o)),rg(o,u,n),u}finally{z(i)}}function Vu(t,e){return!e||e.firstChild===null||du(t)}function As(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(wt(o)),$t(o)&&dD(o,r);let s=n.type;if(s&8)As(t,e,n.child,r);else if(s&32){let c=Qp(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=iD(e,n);if(Array.isArray(c))r.push(...c);else{let u=rr(e[ct]);As(u[U],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function dD(t,e){for(let n=xe;n<t.length;n++){let r=t[n],i=r[U].firstChild;i!==null&&As(r[U],r,i,e)}t[sn]!==t[at]&&e.push(t[sn])}function fD(t){if(t[ni]!==null){for(let e of t[ni])e.impl.addSequence(e);t[ni].length=0}}var hD=[];function vP(t){return t[Et]??EP(t)}function EP(t){let e=hD.pop()??Object.create(wP);return e.lView=t,e}function IP(t){t.lView[Et]!==t&&(t.lView=null,hD.push(t))}var wP=ae(V({},as),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ji(t.lView)},consumerOnSignalRead(){this.lView[Et]=this}});function TP(t){let e=t[Et]??Object.create(DP);return e.lView=t,e}var DP=ae(V({},as),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=rr(t.lView);for(;e&&!pD(e[U]);)e=rr(e);e&&Ih(e)},consumerOnSignalRead(){this.lView[Et]=this}});function pD(t){return t.type!==2}function gD(t){if(t[Es]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Es])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Q]&8192)}}var bP=100;function mD(t,e=0){let r=t[on].rendererFactory,i=!1;i||r.begin?.();try{CP(t,e)}finally{i||r.end?.()}}function CP(t,e){let n=Ch();try{Sh(!0),gp(t,e);let r=0;for(;ws(t);){if(r===bP)throw new J(103,!1);r++,gp(t,1)}}finally{Sh(n)}}function SP(t,e,n,r){if(ur(e))return;let i=e[Q],o=!1,s=!1;$c(e);let c=!0,u=null,l=null;o||(pD(t)?(l=vP(e),u=tc(l)):ec()===null?(c=!1,l=TP(e),u=tc(l)):e[Et]&&(nc(e[Et]),e[Et]=null));try{Eh(e),FI(t.bindingStartIndex),n!==null&&oD(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&tu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&nu(e,y,0,null),Uh(e,0)}if(s||AP(e),gD(e),yD(e,0),t.contentQueries!==null&&OT(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&tu(e,y)}else{let y=t.contentHooks;y!==null&&nu(e,y,1),Uh(e,1)}RP(t,e);let p=t.components;p!==null&&vD(e,p,0);let m=t.viewQuery;if(m!==null&&up(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&tu(e,y)}else{let y=t.viewHooks;y!==null&&nu(e,y,2),Uh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Vc]){for(let y of e[Vc])y();e[Vc]=null}o||(fD(e),e[Q]&=-73)}catch(f){throw o||Ji(e),f}finally{l!==null&&(wf(l,u),c&&IP(l)),Gc()}}function yD(t,e){for(let n=nT(t);n!==null;n=rT(n))for(let r=xe;r<n.length;r++){let i=n[r];_D(i,e)}}function AP(t){for(let e=nT(t);e!==null;e=rT(e)){if(!(e[Q]&2))continue;let n=e[Is];for(let r=0;r<n.length;r++){let i=n[r];Ih(i)}}}function NP(t,e,n){pe(ce.ComponentStart);let r=Rt(e,t);try{_D(r,n)}finally{pe(ce.ComponentEnd,r[Me])}}function _D(t,e){Bc(t)&&gp(t,e)}function gp(t,e){let r=t[U],i=t[Q],o=t[Et],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Tf(o)),s||=!1,o&&(o.dirty=!1),t[Q]&=-9217,s)SP(r,t,r.template,t[Me]);else if(i&8192){let c=z(null);try{gD(t),yD(t,1);let u=r.components;u!==null&&vD(t,u,1),fD(t)}finally{z(c)}}}function vD(t,e,n){for(let r=0;r<e.length;r++)NP(t,e[r],n)}function RP(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)dr(~i);else{let o=i,s=n[++r],c=n[++r];VI(s,o);let u=e[o];pe(ce.HostBindingsUpdateStart,u);try{c(2,u)}finally{pe(ce.HostBindingsUpdateEnd,u)}}}}finally{dr(-1)}}function ju(t,e){let n=Ch()?64:1088;for(t[on].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=rr(t);if(ii(t)&&!r)return t;t=r}return null}function MP(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function ED(t,e){let n=xe+e;if(n<t.length)return t[n]}function Bu(t,e,n,r=!0){let i=e[U];if(xP(i,e,t,n),r){let s=pp(n,t),c=e[ye],u=c.parentNode(t[sn]);u!==null&&Gx(i,t[Ut],c,e,u,s)}let o=e[gt];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ig(t,e){let n=og(t,e);return n!==void 0&&Zp(n[U],n),n}function og(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n];if(r){let i=r[Xr];i!==null&&i!==t&&Jp(i,r),e>0&&(t[n-1][Nt]=r[Nt]);let o=ch(t,xe+e);$x(r[U],r);let s=o[ti];s!==null&&s.detachView(o[U]),r[We]=null,r[Nt]=null,r[Q]&=-129}return r}function xP(t,e,n,r){let i=xe+r,o=n.length;r>0&&(n[i-1][Nt]=e),r<o-xe?(e[Nt]=n[i],lI(n,xe+r,e)):(n.push(e),e[Nt]=null),e[We]=n;let s=e[Xr];s!==null&&n!==s&&ID(s,e);let c=e[ti];c!==null&&c.insertView(t),Uc(e),e[Q]|=128}function ID(t,e){let n=t[Is],r=e[We];if(It(r))t[Q]|=2;else{let i=r[We][ct];e[ct]!==i&&(t[Q]|=2)}n===null?t[Is]=[e]:n.push(e)}var oo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[U];return As(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Me]}set context(e){this._lView[Me]=e}get destroyed(){return ur(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if($t(e)){let n=e[vI],r=n?n.indexOf(this):-1;r>-1&&(og(e,r),ch(n,r))}this._attachedToViewContainer=!1}Zp(this._lView[U],this._lView)}onDestroy(e){wh(this._lView,e)}markForCheck(){ju(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){Uc(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,mD(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ii(this._lView),n=this._lView[Xr];n!==null&&!e&&Jp(n,this._lView),rD(this._lView[U],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let n=ii(this._lView),r=this._lView[Xr];r!==null&&!n&&ID(r,this._lView),Uc(this._lView)}};function sg(t,e,n,r,i){let o=t.data[e];if(o===null)o=PP(t,e,n,r,i),LI()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=PI();o.injectorIndex=s===null?-1:s.injectorIndex}return Zi(o,!0),o}function PP(t,e,n,r,i){let o=Dh(),s=bh(),c=s?o:o&&o.parent,u=t.data[e]=kP(t,c,n,e,r,i);return OP(t,u,o,s),u}function OP(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function kP(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Th()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var FP=new RegExp(`^(\\d+)*(${sT}|${oT})*(.*)`);function LP(t){let e=t.match(FP),[n,r,i,o]=e,s=r?parseInt(r,10):i,c=[];for(let[u,l,f]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(f,10)||1;c.push(l,p)}return[s,...c]}function VP(t){return!t.prev&&t.parent?.type===8}function qh(t){return t.index-Ie}function jP(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function Uu(t,e,n,r){let i=qh(r),o=jP(t,i);if(o===void 0){let s=t.data[lT];if(s?.[i])o=UP(s[i],n);else if(e.firstChild===r)o=t.firstChild;else{let c=r.prev===null,u=r.prev??r.parent;if(VP(r)){let l=qh(r.parent);o=cp(t,l)}else{let l=Gt(u,n);if(c)o=l.firstChild;else{let f=qh(u),p=cp(t,f);if(u.type===2&&p){let y=Bp(t,f)+1;o=Hu(y,p)}else o=l.nextSibling}}}}return o}function Hu(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function BP(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case UM:n=n.firstChild;break;case HM:n=n.nextSibling;break}}return n}function UP(t,e){let[n,...r]=LP(t),i;if(n===oT)i=e[ct][at];else if(n===sT)i=WT(e[ct][at]);else{let o=Number(n);i=wt(e[o+Ie])}return BP(i,r)}var HP=!1;function wD(t){HP=t}function $P(t){let e=t[gt];if(e){let{i18nNodes:n,dehydratedIcuData:r}=e;if(n&&r){let i=t[ye];for(let o of r.values())GP(i,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function GP(t,e,n){for(let r of n.node.cases[n.case]){let i=e.get(r.index-Ie);i&&qp(t,i,!1)}}function $u(t){let e=t[Ht]??[],r=t[We][ye],i=[];for(let o of e)o.data[dT]!==void 0?i.push(o):TD(o,r);t[Ht]=i}function qP(t){let{lContainer:e}=t,n=e[Ht];if(n===null)return;let i=e[We][ye];for(let o of n)TD(o,i)}function TD(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[Ss];for(;n<i;){let o=r.nextSibling;qp(e,r,!1),r=o,n++}}}function Gu(t){$u(t);let e=t[at];It(e)&&gu(e);for(let n=xe;n<t.length;n++)gu(t[n])}function gu(t){$P(t);let e=t[U];for(let n=Ie;n<e.bindingStartIndex;n++)if($t(t[n])){let r=t[n];Gu(r)}else It(t[n])&&gu(t[n])}function ag(t){let e=t._views;for(let n of e){let r=NT(n);r!==null&&r[at]!==null&&(It(r)?gu(r):Gu(r))}}function zP(t,e,n,r){t!==null&&(n.cleanup(e),Gu(t.lContainer),ag(r))}function WP(t,e){let n=[];for(let r of e)for(let i=0;i<(r[Pp]??1);i++){let o={data:r,firstChild:null};r[Ss]>0&&(o.firstChild=t,t=Hu(r[Ss],t)),n.push(o)}return[t,n]}var DD=()=>null,bD=()=>null;function CD(){DD=KP,bD=QP}function KP(t,e){return ND(t,e)?t[Ht].shift():($u(t),null)}function SD(t,e){return DD(t,e)}function QP(t,e,n){if(e.tView.ssrId===null)return null;let r=SD(t,e.tView.ssrId);return n[U].firstUpdatePass&&r===null&&YP(n,e),r}function AD(t,e,n){return bD(t,e,n)}function YP(t,e){let n=e;for(;n;){if(mw(t,n))return;if((n.flags&256)===256)break;n=n.prev}for(n=e.next;n&&(n.flags&512)===512;){if(mw(t,n))return;n=n.next}}function ND(t,e){let n=t[Ht];return!e||n===null||n.length===0?!1:n[0].data[uT]===e}function mw(t,e){let n=e.tView?.ssrId;if(n==null)return!1;let r=t[e.index];return $t(r)&&ND(r,n)?($u(r),!0):!1}var RD=class{},qu=class{},mp=class{resolveComponentFactory(e){throw new J(917,!1)}},zu=class{static NULL=new mp},ui=class{},di=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>JP()}return t})();function JP(){let t=de(),e=Mt(),n=Rt(e.index,t);return(It(n)?n:t)[ye]}var MD=(()=>{class t{static \u0275prov=we({token:t,providedIn:"root",factory:()=>null})}return t})();var iu={},no=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,iu,r);return i!==iu||n===iu?i:this.parentInjector.get(e,n,r)}};function yw(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Ac(i,c);else if(o==2){let u=c,l=e[++s];r=Ac(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function be(t,e=0){let n=de();if(n===null)return me(t,e);let r=Mt();return Ww(r,n,ze(t),e)}function ZP(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,l]=f.resolveHostDirectives(s);break}tO(t,e,n,c,o,u,l)}o!==null&&r!==null&&XP(n,r,o)}function XP(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}function eO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tO(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&an(y)&&(u=!0,eO(t,n,m)),rp(cu(n,e),t,y.type)}aO(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=YT(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=Cs(n.mergedAttrs,y.hostAttrs),rO(t,n,e,p,y),sO(p,y,i),s!==null&&s.has(y)){let[A,N]=s.get(y);n.directiveToIndex.set(y.type,[p,A+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}nO(t,n,o)}function nO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))_w(0,e,i,r),_w(1,e,i,r),Ew(e,r,!1);else{let o=n.get(i);vw(0,e,o,r),vw(1,e,o,r),Ew(e,r,!0)}}}function _w(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),xD(e,o)}}function vw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),xD(e,s)}}function xD(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Ew(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||zp(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function rO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=nr(i.type,!0)),s=new ai(o,an(i),be,null);t.blueprint[r]=s,n[r]=s,iO(t,e,r,YT(t,n,i.hostVars,xt),i)}function iO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;oO(s)!=c&&s.push(c),s.push(n,r,o)}}function oO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function sO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;an(e)&&(n[""]=t)}}function aO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function PD(t,e,n,r,i,o,s,c){let u=e[U],l=u.consts,f=lr(l,s),p=sg(u,t,n,r,f);return o&&ZP(u,e,p,lr(l,c),i),p.mergedAttrs=Cs(p.mergedAttrs,p.attrs),p.attrs!==null&&yw(p,p.attrs,!1),p.mergedAttrs!==null&&yw(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function OD(t,e){yM(t,e),mh(e)&&t.queries.elementEnd(e)}function cO(t,e,n){return t[e]=n}function gr(t,e,n){if(n===xt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function zh(t,e,n){return function r(i){let o=bn(t)?Rt(t.index,e):e;ju(o,5);let s=e[Me],c=Iw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=Iw(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function Iw(t,e,n,r){let i=z(null);try{return pe(ce.OutputStart,e,n),n(r)!==!1}catch(o){return tg(t,o),!1}finally{pe(ce.OutputEnd,e,n),z(i)}}function uO(t,e,n,r,i,o,s,c){let u=jc(t),l=!1,f=null;if(!r&&u&&(f=dO(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=Gt(t,n),m=r?r(p):p;$M(n,m,o,c);let y=i.listen(m,o,c);if(!lO(o)){let C=r?A=>r(wt(A[t.index])):t.index;kD(C,e,n,o,c,y,!1)}}return l}function lO(t){return t.startsWith("animation")||t.startsWith("transition")}function dO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[Qi],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function kD(t,e,n,r,i,o,s){let c=e.firstCreatePass?bI(e):null,u=DI(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function ww(t,e,n,r,i,o){let s=e[n],c=e[U],l=c.data[n].outputs[r],p=s[l].subscribe(o);kD(t.index,c,e,i,o,p,!0)}var yp=Symbol("BINDING");var _p=class extends zu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ki(e);return new mu(n,this.ngModule)}};function fO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Pu.SignalBased)!==0};return i&&(o.transform=i),o})}function hO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function pO(t,e,n){let r=e instanceof At?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new no(n,r):n}function gO(t){let e=t.get(ui,null);if(e===null)throw new J(407,!1);let n=t.get(MD,null),r=t.get(ir,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function mO(t,e){let n=FD(t);return Gp(e,n,n==="svg"?yh:n==="math"?EI:null)}function FD(t){return(t.selectors[0][0]||"div").toLowerCase()}var mu=class extends qu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=fO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=hO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Px(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){pe(ce.DynamicComponentStart);let c=z(null);try{let u=this.componentDef,l=yO(r,u,s,o),f=pO(u,i||this.ngModule,e),p=gO(f),m=p.rendererFactory.createRenderer(null,u),y=r?rP(m,r,u.encapsulation,f):mO(u,m),C=s?.some(Tw)||o?.some(L=>typeof L!="function"&&L.bindings.some(Tw)),A=Kp(null,l,null,512|QT(u),null,null,p,m,f,null,AT(y,f,!0));A[Ie]=y,$c(A);let N=null;try{let L=PD(Ie,A,2,"#host",()=>l.directiveRegistry,!0,0);zT(m,y,L),io(y,A),sD(l,A,L),kT(l,L,A),OD(l,L),n!==void 0&&vO(L,this.ngContentSelectors,n),N=Rt(L.index,A),A[Me]=N[Me],rg(l,A,null)}catch(L){throw N!==null&&op(N),op(A),L}finally{pe(ce.DynamicComponentEnd),Gc()}return new yu(this.componentType,A,!!C)}finally{z(c)}}};function yO(t,e,n,r){let i=t?["ng-version","21.0.2"]:Ox(e.selectors[0]),o=null,s=null,c=0;if(n)for(let f of n)c+=f[yp].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){c+=m[yp].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=Fc(p);u.push(m)}return Wp(0,null,_O(o,s),1,c,u,null,null,null,[i],null)}function _O(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function Tw(t){let e=t[yp].kind;return e==="input"||e==="twoWay"}var yu=class extends RD{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=oi(n[U],Ie),this.location=Yw(this._tNode,n),this.instance=Rt(this._tNode.index,n)[Me],this.hostView=this.changeDetectorRef=new oo(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=ng(r,i[U],i,e,n);this.previousInputValues.set(e,n);let s=Rt(r.index,i);ju(s,1)}get injector(){return new lu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function vO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}function EO(t,e){let n=t[ye],r=n.createComment(""),i=Gt(e,t),o=n.parentNode(i);return hu(n,o,r,n.nextSibling(i),!1),r}var IO=LD,cg=()=>!1;function wO(t,e,n){return cg(t,e,n)}function LD(t,e,n,r){if(t[sn])return;let i;n.type&8?i=wt(r):i=EO(e,n),t[sn]=i}function TO(t,e,n){if(t[sn]&&t[Ht])return!0;let r=n[gt],i=e.index-Ie;if(!r||eT(e)||xT(r,i))return!1;let s=cp(r,i),c=r.data[bu]?.[i],[u,l]=WP(s,c);return t[sn]=u,t[Ht]=l,!0}function DO(t,e,n,r){cg(t,n,e)||LD(t,e,n,r)}function VD(){IO=DO,cg=TO}var Ns=class{};var Rs=class extends Ns{injector;componentFactoryResolver=new _p(this);instance=null;constructor(e){super();let n=new Qr([...e.providers,{provide:Ns,useValue:this},{provide:zu,useValue:this.componentFactoryResolver}],e.parent||ys(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ug(t,e,n=null){return new Rs({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var bO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Lc(!1,n.type),i=r.length>0?ug([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=we({token:t,providedIn:"environment",factory:()=>new t(me(At))})}return t})();function lg(t){return xs(()=>{let e=jD(t),n=ae(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Rp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(bO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Wt.Emulated,styles:t.styles||st,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Kt("NgStandalone"),BD(n);let r=t.dependencies;return n.directiveDefs=Dw(r,CO),n.pipeDefs=Dw(r,dh),n.id=NO(n),n})}function CO(t){return Ki(t)||Fc(t)}function fi(t){return xs(()=>({type:t.type,bootstrap:t.bootstrap||st,declarations:t.declarations||st,imports:t.imports||st,exports:t.exports||st,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function SO(t,e){if(t==null)return ar;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Pu.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function AO(t){if(t==null)return ar;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Pt(t){return xs(()=>{let e=jD(t);return BD(e),e})}function dg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function jD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ar,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||st,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:SO(t.inputs,e),outputs:AO(t.outputs),debugInfo:null}}function BD(t){t.features?.forEach(e=>e(t))}function Dw(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function NO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function RO(t){return Object.getPrototypeOf(t.prototype).constructor}function Mn(t){let e=RO(t.type),n=!0,r=[t];for(;e;){let i;if(an(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Wh(t.inputs),s.declaredInputs=Wh(t.declaredInputs),s.outputs=Wh(t.outputs);let c=i.hostBindings;c&&kO(t,c);let u=i.viewQuery,l=i.contentQueries;if(u&&PO(t,u),l&&OO(t,l),MO(t,i),oI(t.outputs,i.outputs),an(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===Mn&&(n=!1)}}e=Object.getPrototypeOf(e)}xO(r)}function MO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function xO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Cs(i.hostAttrs,n=Cs(n,i.hostAttrs))}}function Wh(t){return t===ar?{}:t===st?[]:t}function PO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function OO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function kO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function FO(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=Cs(t.mergedAttrs,t.attrs);let f=t.tView=Wp(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),Zi(t,!1);let u=UD(n,e,t,r);Wc()&&Xp(n,e,u,t),io(u,e);let l=MP(u,e,u,t);e[r+Ie]=l,JT(e,l),wO(l,t,e)}function _u(t,e,n,r,i,o,s,c,u,l,f){let p=n+Ie,m;if(e.firstCreatePass){if(m=sg(e,p,4,s||null,c||null),l!=null){let y=lr(e.consts,l);m.localNames=[];for(let C=0;C<y.length;C+=2)m.localNames.push(y[C],-1)}}else m=e.data[p];return FO(m,t,e,n,r,i,o,u),l!=null&&aD(t,m,f),m}var UD=HD;function HD(t,e,n,r){return Sn(!0),e[ye].createComment("")}function LO(t,e,n,r){let i=!Nu(e,n);Sn(i);let o=e[gt]?.data[cT]?.[r]??null;if(o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o),i)return HD(t,e);let s=e[gt],c=Uu(s,t,e,n);Au(s,r,c);let u=Bp(s,r);return Hu(u,c)}function $D(){UD=LO}var Tt=(function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t})(Tt||{}),bw=0,VO=1,Pe=(function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t})(Pe||{});var jO=0,js=1;var BO=4,UO=5;var HO=7,ro=8,$O=9,fg=(function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t})(fg||{});function ou(t,e){let n=qO(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function GO(t){ou(1,t),ou(0,t),ou(2,t)}function qO(t){let e=BO;return t===1?e=UO:t===2&&(e=$O),e}function GD(t){return t+1}function co(t,e){let n=t[U],r=GD(e.index);return t[r]}function Bs(t,e){let n=GD(e.index);return t.data[n]}function zO(t,e,n){let r=e[U],i=Bs(r,n);switch(t){case Pe.Complete:return i.primaryTmplIndex;case Pe.Loading:return i.loadingTmplIndex;case Pe.Error:return i.errorTmplIndex;case Pe.Placeholder:return i.placeholderTmplIndex;default:return null}}function Cw(t,e){return e===Pe.Placeholder?t.placeholderBlockConfig?.[bw]??null:e===Pe.Loading?t.loadingBlockConfig?.[bw]??null:null}function WO(t){return t.loadingBlockConfig?.[VO]??null}function Sw(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function KO(t,e){let n=e.primaryTmplIndex+Ie;return oi(t,n)}var QO=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?ug(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=we({token:t,providedIn:"environment",factory:()=>new t})}return t})();var qD=new $("");function Kh(t,e,n){return t.get(QO).getOrCreateInjector(e,t,n,"")}function YO(t,e,n){if(t instanceof no){let i=t.injector,o=t.parentInjector,s=Kh(o,e,n);return new no(i,s)}let r=t.get(At);if(r!==t){let i=Kh(r,e,n);return new no(t,i)}return Kh(t,e,n)}function si(t,e,n,r=!1){let i=n[We],o=i[U];if(ur(i))return;let s=co(i,e),c=s[js],u=s[HO];if(!(u!==null&&t<u)&&Aw(c,t)&&Aw(s[jO]??-1,t)){let l=Bs(o,e),p=!r&&!0&&(WO(l)!==null||Cw(l,Pe.Loading)!==null||Cw(l,Pe.Placeholder))?XO:ZO;try{p(t,s,n,e,i)}catch(m){tg(i,m)}}}function JO(t,e){let n=t[Ht]?.findIndex(i=>i.data[fT]===e[js])??-1;return{dehydratedView:n>-1?t[Ht][n]:null,dehydratedViewIx:n}}function ZO(t,e,n,r,i){pe(ce.DeferBlockStateStart);let o=zO(t,i,r);if(o!==null){e[js]=t;let s=i[U],c=o+Ie,u=oi(s,c),l=0;ig(n,l);let f;if(t===Pe.Complete){let C=Bs(s,r),A=C.providers;A&&A.length>0&&(f=YO(i[vt],C,A))}let{dehydratedView:p,dehydratedViewIx:m}=JO(n,e),y=Lu(i,u,null,{injector:f,dehydratedView:p});if(Bu(n,y,l,Vu(u,p)),ju(y,2),m>-1&&n[Ht]?.splice(m,1),(t===Pe.Complete||t===Pe.Error)&&Array.isArray(e[ro])){for(let C of e[ro])C();e[ro]=null}}pe(ce.DeferBlockStateEnd)}function Aw(t,e){return t<e}function Nw(t,e,n){t.loadingPromise.then(()=>{t.loadingState===Tt.COMPLETE?si(Pe.Complete,e,n):t.loadingState===Tt.FAILED&&si(Pe.Error,e,n)})}var XO=null;function zD(t){return typeof t=="function"&&t[yt]!==void 0}function hg(t){return zD(t)&&typeof t.set=="function"}var pg=new $("");function uo(t){return!!t&&typeof t.then=="function"}function gg(t){return!!t&&typeof t.subscribe=="function"}var WD=new $("");var mg=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=j(WD,{optional:!0})??[];injector=j(Bt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=_s(this.injector,i);if(uo(o))n.push(o);else if(gg(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lo=new $("");function KD(){Sf(()=>{let t="";throw new J(600,t)})}function QD(t){return t.isBoundToModule}var ek=10;var Dt=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=j(Nn);afterRenderManager=j(Yp);zonelessEnabled=j(Ts);rootEffectScheduler=j(Bh);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new en;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=j(fr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(qr(n=>!n))}constructor(){j(pr,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=j(At);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Bt.NULL){return this._injector.get(pt).run(()=>{pe(ce.BootstrapComponentStart);let s=n instanceof qu;if(!this._injector.get(mg).done){let C="";throw new J(405,C)}let u;s?u=n:u=this._injector.get(zu).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=QD(u)?void 0:this._injector.get(Ns),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(pg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),bs(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),pe(ce.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(ce.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ou.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw pe(ce.ChangeDetectionEnd),new J(101,!1);let n=z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(n),this.afterTick.next(),pe(ce.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ui,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<ek;){pe(ce.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{pe(ce.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ws(i))continue;let o=r&&!this.zonelessEnabled?0:1;mD(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ws(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;bs(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(lo,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>bs(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new J(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bs(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function tk(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function YD(t,e,n){let r=e[vt],i=e[U];if(t.loadingState!==Tt.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=co(e,n),s=KO(i,t);t.loadingState=Tt.IN_PROGRESS,ou(1,o);let c=t.dependencyResolverFn,u=r.get(Qc).add();return c?(t.loadingPromise=Promise.allSettled(c()).then(l=>{let f=!1,p=[],m=[];for(let y of l)if(y.status==="fulfilled"){let C=y.value,A=Ki(C)||Fc(C);if(A)p.push(A);else{let N=dh(C);N&&m.push(N)}}else{f=!0;break}if(f){if(t.loadingState=Tt.FAILED,t.errorTmplIndex===null){let C=new J(-750,!1);tg(e,C)}}else{t.loadingState=Tt.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=Sw(y.directiveRegistry,p);let C=p.map(N=>N.type),A=Lc(!1,...C);t.providers=A}m.length>0&&(y.pipeRegistry=Sw(y.pipeRegistry,m))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,u()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=Tt.COMPLETE,u()}),t.loadingPromise)}function nk(t,e){return e[vt].get(qD,null,{optional:!0})?.behavior!==fg.Manual}function rk(t,e,n){let r=e[U],i=e[n.index];if(!nk(t,e))return;let o=co(e,n),s=Bs(r,n);switch(GO(o),s.loadingState){case Tt.NOT_STARTED:si(Pe.Loading,n,i),YD(s,e,n),s.loadingState===Tt.IN_PROGRESS&&Nw(s,n,i);break;case Tt.IN_PROGRESS:si(Pe.Loading,n,i),Nw(s,n,i);break;case Tt.COMPLETE:si(Pe.Complete,n,i);break;case Tt.FAILED:si(Pe.Error,n,i);break;default:}}async function JD(t,e,n){let r=t.get(Cu);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=JM(e,t);if(s.length===0)return;o!==null&&s.shift(),sk(r,s),o!==null&&await o;let c=s[0];r.has(c)?await Rw(t,s,n):r.awaitParentBlock(c,async()=>await Rw(t,s,n))}async function Rw(t,e,n){let r=t.get(Cu),i=r.hydrating,o=t.get(fr),s=o.add();for(let u=0;u<e.length;u++){let l=e[u],f=r.get(l);if(f!=null){if(await ck(f),await ak(t),ik(f)){qP(f),Mw(e.slice(u),r);break}i.get(l).resolve()}else{ok(u,e,r),Mw(e.slice(u),r);break}}let c=e[e.length-1];await i.get(c)?.promise,o.remove(s),n&&n(e),zP(r.get(c),e,r,t.get(Dt))}function ik(t){return co(t.lView,t.tNode)[js]===Pe.Error}function ok(t,e,n){let r=t-1,i=r>-1?n.get(e[r]):null;i&&Gu(i.lContainer)}function Mw(t,e){let n=e.hydrating;for(let r in t)n.get(r)?.reject();e.cleanup(t)}function sk(t,e){for(let n of e)t.hydrating.set(n,tk())}function ak(t){return new Promise(e=>ku(e,{injector:t}))}async function ck(t){let{tNode:e,lView:n}=t,r=co(n,e);return new Promise(i=>{uk(r,i),rk(2,n,e)})}function uk(t,e){Array.isArray(t[ro])||(t[ro]=[]),t[ro].push(e)}var X6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var vp=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Qh(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function lk(t,e,n,r){let i,o,s=0,c=t.length-1,u=void 0;if(Array.isArray(e)){z(r);let l=e.length-1;for(z(null);s<=c&&s<=l;){let f=t.at(s),p=e[s],m=Qh(s,f,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(c),C=e[l],A=Qh(c,y,l,C,n);if(A!==0){A<0&&t.updateValue(c,C),c--,l--;continue}let N=n(s,f),L=n(c,y),X=n(s,p);if(Object.is(X,L)){let ie=n(l,C);Object.is(ie,N)?(t.swap(s,c),t.updateValue(c,C),l--,c--):t.move(c,s),t.updateValue(s,p),s++;continue}if(i??=new vu,o??=Pw(t,s,c,n),Ep(t,i,s,X))t.updateValue(s,p),s++,c++;else if(o.has(X))i.set(N,t.detach(s)),c--;else{let ie=t.create(s,e[s]);t.attach(s,ie),s++,c++}}for(;s<=l;)xw(t,i,n,s,e[s]),s++}else if(e!=null){z(r);let l=e[Symbol.iterator]();z(null);let f=l.next();for(;!f.done&&s<=c;){let p=t.at(s),m=f.value,y=Qh(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,f=l.next();else{i??=new vu,o??=Pw(t,s,c,n);let C=n(s,m);if(Ep(t,i,s,C))t.updateValue(s,m),s++,c++,f=l.next();else if(!o.has(C))t.attach(s,t.create(s,m)),s++,c++,f=l.next();else{let A=n(s,p);i.set(A,t.detach(s)),c--}}}for(;!f.done;)xw(t,i,n,t.length,f.value),f=l.next()}for(;s<=c;)t.destroy(t.detach(c--));i?.forEach(l=>{t.destroy(l)})}function Ep(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function xw(t,e,n,r,i){if(Ep(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Pw(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var vu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Ot(t,e,n,r,i,o,s,c){Kt("NgControlFlow");let u=de(),l=Je(),f=lr(l.consts,o);return _u(u,l,t,e,n,r,i,f,256,s,c),yg}function yg(t,e,n,r,i,o,s,c){Kt("NgControlFlow");let u=de(),l=Je(),f=lr(l.consts,o);return _u(u,l,t,e,n,r,i,f,512,s,c),yg}function kt(t,e){Kt("NgControlFlow");let n=de(),r=Xi(),i=n[r]!==xt?n[r]:-1,o=i!==-1?Eu(n,Ie+i):void 0,s=0;if(gr(n,r,t)){let c=z(null);try{if(o!==void 0&&ig(o,s),t!==-1){let u=Ie+t,l=Eu(n,u),f=Dp(n[U],u),p=AD(l,f,n),m=Lu(n,f,e,{dehydratedView:p});Bu(l,m,s,Vu(f,p))}}finally{z(c)}}else if(o!==void 0){let c=ED(o,s);c!==void 0&&(c[Me]=e)}}var Ip=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-xe}};function Wu(t,e){return e}var wp=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Us(t,e,n,r,i,o,s,c,u,l,f,p,m){Kt("NgControlFlow");let y=de(),C=Je(),A=u!==void 0,N=de(),L=c?s.bind(N[ct][Me]):s,X=new wp(A,L);N[Ie+t]=X,_u(y,C,t+1,e,n,r,i,lr(C.consts,o),256),A&&_u(y,C,t+2,u,l,f,p,lr(C.consts,m),512)}var Tp=class extends vp{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-xe}at(e){return this.getLView(e)[Me].$implicit}attach(e,n){let r=n[gt];this.needsIndexUpdate||=e!==this.length,Bu(this.lContainer,n,e,Vu(this.templateTNode,r)),dk(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,fk(this.lContainer,e),hk(this.lContainer,e)}create(e,n){let r=SD(this.lContainer,this.templateTNode.tView.ssrId),i=Lu(this.hostLView,this.templateTNode,new Ip(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Zp(e[U],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Me].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Me].$index=e}getLView(e){return pk(this.lContainer,e)}};function Hs(t){let e=z(null),n=Cn();try{let r=de(),i=r[U],o=r[n],s=n+1,c=Eu(r,s);if(o.liveCollection===void 0){let l=Dp(i,s);o.liveCollection=new Tp(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(lk(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=Xi(),f=u.length===0;if(gr(r,l,f)){let p=n+2,m=Eu(r,p);if(f){let y=Dp(i,p),C=AD(m,y,r),A=Lu(r,y,void 0,{dehydratedView:C});Bu(m,A,0,Vu(y,C))}else i.firstUpdatePass&&$u(m),ig(m,0)}}}finally{z(e)}}function Eu(t,e){return t[e]}function dk(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[ri]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[vt];Ux(o,i),ci.delete(r),i.detachedLeaveAnimationFns=void 0}}function fk(t,e){if(t.length<=xe)return;let n=xe+e,r=t[n],i=r?r[ri]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function hk(t,e){return og(t,e)}function pk(t,e){return ED(t,e)}function Dp(t,e){return oi(t,e)}function xn(t,e,n){let r=de(),i=Xi();if(gr(r,i,e)){let o=Je(),s=xh();lD(s,r,t,e,r[ye],n)}return xn}function bp(t,e,n,r,i){ng(e,t,n,i?"class":"style",r)}function x(t,e,n,r){let i=de(),o=i[U],s=t+Ie,c=o.firstCreatePass?PD(s,i,2,e,fP,NI(),n,r):o.data[s];if(pP(c,i,t,e,ZD),jc(c)){let u=i[U];sD(u,i,c),kT(u,c,i)}return r!=null&&aD(i,c),x}function P(){let t=Je(),e=Mt(),n=gP(e);return t.firstCreatePass&&OD(t,n),RI(n)&&xI(),AI(),n.classesWithoutHost!=null&&vM(n)&&bp(t,n,de(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&EM(n)&&bp(t,n,de(),n.stylesWithoutHost,!1),P}function hi(t,e,n,r){return x(t,e,n,r),P(),hi}var ZD=(t,e,n,r,i)=>(Sn(!0),Gp(e[ye],r,Ph()));function gk(t,e,n,r,i){let o=!Nu(e,n);if(Sn(o),o)return Gp(e[ye],r,Ph());let s=e[gt],c=Uu(s,t,e,n);return MT(s,i)&&Au(s,i,c.nextSibling),s&&(Zw(n)||Xw(c))&&bn(n)&&(MI(n),qT(c)),c}function XD(){ZD=gk}var mk=(t,e,n,r,i)=>(Sn(!0),$T(e[ye],""));function yk(t,e,n,r,i){let o,s=!Nu(e,n);if(Sn(s),s)return $T(e[ye],"");let c=e[gt],u=Uu(c,t,e,n),l=QM(c,i);return Au(c,i,u),o=Hu(l,u),o}function eb(){mk=yk}function Ft(){return de()}var $s="en-US";var _k=$s;function tb(t){typeof t=="string"&&(_k=t.toLowerCase().replace(/_/g,"-"))}function Te(t,e,n){let r=de(),i=Je(),o=Mt();return nb(i,r,r[ye],o,t,e,n),Te}function nb(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=zh(r,e,o),uO(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=zh(r,e,o),ww(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=zh(r,e,o),ww(r,e,p,i,i,u)}}function ee(t=1){return GI(t)}function eu(t,e){return t<<17|e<<2}function li(t){return t>>17&32767}function vk(t){return(t&2)==2}function Ek(t,e){return t&131071|e<<17}function Cp(t){return t|2}function so(t){return(t&131068)>>2}function Yh(t,e){return t&-131069|e<<2}function Ik(t){return(t&1)===1}function Sp(t){return t|1}function wk(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=li(s),u=so(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Wi(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=li(t[c+1]);t[r+1]=eu(m,c),m!==0&&(t[m+1]=Yh(t[m+1],r)),t[c+1]=Ek(t[c+1],r)}else t[r+1]=eu(c,0),c!==0&&(t[c+1]=Yh(t[c+1],r)),c=r;else t[r+1]=eu(u,0),c===0?c=r:t[u+1]=Yh(t[u+1],r),u=r;l&&(t[r+1]=Cp(t[r+1])),Ow(t,f,r,!0),Ow(t,f,r,!1),Tk(e,f,t,r,o),s=eu(c,u),o?e.classBindings=s:e.styleBindings=s}function Tk(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Wi(o,e)>=0&&(n[r+1]=Sp(n[r+1]))}function Ow(t,e,n,r){let i=t[n+1],o=e===null,s=r?li(i):so(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];Dk(u,e)&&(c=!0,t[s+1]=r?Sp(l):Cp(l)),s=r?li(l):so(l)}c&&(t[n+1]=r?Cp(i):Sp(i))}function Dk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Wi(t,e)>=0:!1}var zt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bk(t){return t.substring(zt.key,zt.keyEnd)}function Ck(t){return Sk(t),rb(t,ib(t,0,zt.textEnd))}function rb(t,e){let n=zt.textEnd;return n===e?-1:(e=zt.keyEnd=Ak(t,zt.key=e,n),ib(t,e,n))}function Sk(t){zt.key=0,zt.keyEnd=0,zt.value=0,zt.valueEnd=0,zt.textEnd=t.length}function ib(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ak(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function pi(t,e){return Rk(t,e,null,!0),pi}function Gs(t){Mk(Lk,Nk,t,!0)}function Nk(t,e){for(let n=Ck(e);n>=0;n=rb(e,n))Oc(t,bk(e),!0)}function Rk(t,e,n,r){let i=de(),o=Je(),s=Ah(2);if(o.firstUpdatePass&&sb(o,t,s,r),e!==xt&&gr(i,s,e)){let c=o.data[Cn()];ab(o,c,i,i[ye],t,i[s+1]=jk(e,n),r,s)}}function Mk(t,e,n,r){let i=Je(),o=Ah(2);i.firstUpdatePass&&sb(i,null,o,r);let s=de();if(n!==xt&&gr(s,o,n)){let c=i.data[Cn()];if(cb(c,r)&&!ob(i,o)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=Ac(u,n||"")),bp(i,c,s,n,r)}else Vk(i,c,s,s[ye],s[o+1],s[o+1]=Fk(t,e,n),r,o)}}function ob(t,e){return e>=t.expandoStartIndex}function sb(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Cn()],s=ob(t,n);cb(o,r)&&e===null&&!s&&(e=!1),e=xk(i,o,e,r),wk(i,o,e,n,s,r)}}function xk(t,e,n,r){let i=BI(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Jh(null,t,e,n,r),n=Ms(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Jh(i,t,e,n,r),o===null){let u=Pk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Jh(null,t,e,u[1],r),u=Ms(u,e.attrs,r),Ok(t,e,r,u))}else o=kk(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function Pk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(so(r)!==0)return t[li(r)]}function Ok(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[li(i)]=r}function kk(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ms(r,s,n)}return Ms(r,e.attrs,n)}function Jh(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=Ms(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function Ms(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Oc(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Fk(t,e,n){if(n==null||n==="")return st;let r=[],i=Ls(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Lk(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Oc(t,r,n)}function Vk(t,e,n,r,i,o,s,c){i===xt&&(i=st);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,C=null,A;f===p?(u+=2,l+=2,m!==y&&(C=p,A=y)):p===null||f!==null&&f<p?(u+=2,C=f):(l+=2,C=p,A=y),C!==null&&ab(t,e,n,r,C,A,s,c),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function ab(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=Ik(l)?kw(u,e,n,i,so(l),s):void 0;if(!Iu(f)){Iu(o)||vk(l)&&(o=kw(u,null,n,i,c,s));let p=_h(Cn(),n);nP(r,s,p,i,o)}}function kw(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===xt&&(m=p?st:void 0);let y=p?kc(m,r):f===r?m:void 0;if(l&&!Iu(y)&&(y=kc(u,r)),Iu(y)&&(c=y,s))return c;let C=t[i+1];i=s?li(C):so(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=kc(u,r))}return c}function Iu(t){return t!==void 0}function jk(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=tr(Ls(t)))),t}function cb(t,e){return(t.flags&(e?8:16))!==0}function k(t,e=""){let n=de(),r=Je(),i=t+Ie,o=r.firstCreatePass?sg(r,i,1,e,null):r.data[i],s=ub(r,n,o,e,t);n[i]=s,Wc()&&Xp(r,n,s,o),Zi(o,!1)}var ub=(t,e,n,r,i)=>(Sn(!0),HT(e[ye],r));function Bk(t,e,n,r,i){let o=!Nu(e,n);if(Sn(o),o)return HT(e[ye],r);let s=e[gt];return Uu(s,t,e,n)}function lb(){ub=Bk}function Uk(t,e,n,r=""){return gr(t,Xi(),n)?e+Mc(n)+r:xt}function fn(t){return mr("",t),fn}function mr(t,e,n){let r=de(),i=Uk(r,t,e,n);return i!==xt&&Hk(r,Cn(),i),mr}function Hk(t,e,n){let r=_h(e,t);Ex(t[ye],r,n)}function Ze(t,e,n){hg(e)&&(e=e());let r=de(),i=Xi();if(gr(r,i,e)){let o=Je(),s=xh();lD(s,r,t,e,r[ye],n)}return Ze}function lt(t,e){let n=hg(t);return n&&t.set(e),n}function Xe(t,e){let n=de(),r=Je(),i=Mt();return nb(r,n,n[ye],i,t,e),Xe}function $k(t,e,n){let r=Je();if(r.firstCreatePass){let i=an(t);Ap(n,r.data,r.blueprint,i,!0),Ap(e,r.data,r.blueprint,i,!1)}}function Ap(t,e,n,r,i){if(t=ze(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ap(t[o],e,n,r,i);else{let o=Je(),s=de(),c=Mt(),u=Kr(t)?t:ze(t.provide),l=hh(t),f=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(Kr(t)||!t.multi){let y=new ai(l,i,be,null),C=Xh(u,e,i?f:f+m,p);C===-1?(rp(cu(c,s),o,u),Zh(o,t,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=Xh(u,e,f+m,p),C=Xh(u,e,f,f+m),A=y>=0&&n[y],N=C>=0&&n[C];if(i&&!N||!i&&!A){rp(cu(c,s),o,u);let L=zk(i?qk:Gk,n.length,i,r,l,t);!i&&N&&(n[C].providerFactory=L),Zh(o,t,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(L),s.push(L)}else{let L=db(n[i?C:y],l,!i&&r);Zh(o,t,y>-1?y:C,L)}!i&&r&&N&&n[C].componentProviders++}}}function Zh(t,e,n,r){let i=Kr(e),o=mI(e);if(i||o){let u=(o?ze(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function db(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Xh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Gk(t,e,n,r,i){return Np(this.multi,[])}function qk(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=uu(r,r[U],this.providerFactory.index,i);s=u.slice(0,c),Np(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],Np(o,s);return s}function Np(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function zk(t,e,n,r,i,o){let s=new ai(t,n,be,null);return s.multi=[],s.index=e,s.componentProviders=0,db(s,i,r&&!n),s}function fo(t,e=[]){return n=>{n.providersResolver=(r,i)=>$k(r,i?i(t):t,e)}}function Wk(t,e){let n=t[e];return n===xt?void 0:n}function Kk(t,e,n,r,i,o){let s=e+n;return gr(t,s,i)?cO(t,s+1,o?r.call(o,i):r(i)):Wk(t,s+1)}function _g(t,e){let n=Je(),r,i=t+Ie;n.firstCreatePass?(r=Qk(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=nr(r.type,!0)),s,c=ot(be);try{let u=au(!1),l=o();return au(u),vh(n,de(),i,l),l}finally{ot(c)}}function Qk(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function vg(t,e,n){let r=t+Ie,i=de(),o=II(i,r);return Yk(i,r)?Kk(i,kI(),e,o.transform,n,o):o.transform(n)}function Yk(t,e){return t[U].data[e].pure}var fb=(()=>{class t{applicationErrorHandler=j(Nn);appRef=j(Dt);taskService=j(fr);ngZone=j(pt);zonelessEnabled=j(Ts);tracing=j(pr,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new it;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ps):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(jh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?kh:Oh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ps+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,kh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=we({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hb(){return[{provide:ir,useExisting:fb},{provide:pt,useClass:gs},{provide:Ts,useValue:!0}]}function Jk(){return typeof $localize<"u"&&$localize.locale||$s}var Ku=new $("",{factory:()=>j(Ku,{optional:!0,skipSelf:!0})||Jk()});function Pn(t,e){return rc(t,e?.equal)}var Dg={JSACTION:"__jsaction",OWNER:"__owner"},yb={};function Zk(t){return t[Dg.JSACTION]}function pb(t,e){t[Dg.JSACTION]=e}function Xk(t){return yb[t]}function e1(t,e){yb[t]=e}var H={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},t1=[H.MOUSEENTER,H.MOUSELEAVE,"pointerenter","pointerleave"],o8=[H.CLICK,H.DBLCLICK,H.FOCUSIN,H.FOCUSOUT,H.KEYDOWN,H.KEYUP,H.KEYPRESS,H.MOUSEOVER,H.MOUSEOUT,H.SUBMIT,H.TOUCHSTART,H.TOUCHEND,H.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],n1=[H.FOCUS,H.BLUR,H.ERROR,H.LOAD,H.TOGGLE],bg=t=>n1.indexOf(t)>=0;function r1(t){return t===H.MOUSEENTER?H.MOUSEOVER:t===H.MOUSELEAVE?H.MOUSEOUT:t===H.POINTERENTER?H.POINTEROVER:t===H.POINTERLEAVE?H.POINTEROUT:t}function i1(t,e,n,r){let i=!1;bg(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return t.addEventListener(e,n,o),{eventType:e,handler:n,capture:i,passive:r}}function o1(t,e){if(t.removeEventListener){let n=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;t.removeEventListener(e.eventType,e.handler,n)}else t.detachEvent&&t.detachEvent(`on${e.eventType}`,e.handler)}function s1(t){t.preventDefault?t.preventDefault():t.returnValue=!1}var gb=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function a1(t){return t.which===2||t.which==null&&t.button===4}function c1(t){return gb&&t.metaKey||!gb&&t.ctrlKey||a1(t)||t.shiftKey}function u1(t,e,n){let r=t.relatedTarget;return(t.type===H.MOUSEOVER&&e===H.MOUSEENTER||t.type===H.MOUSEOUT&&e===H.MOUSELEAVE||t.type===H.POINTEROVER&&e===H.POINTERENTER||t.type===H.POINTEROUT&&e===H.POINTERLEAVE)&&(!r||r!==n&&!n.contains(r))}function l1(t,e){let n={};for(let r in t){if(r==="srcElement"||r==="target")continue;let i=r,o=t[i];typeof o!="function"&&(n[i]=o)}return t.type===H.MOUSEOVER?n.type=H.MOUSEENTER:t.type===H.MOUSEOUT?n.type=H.MOUSELEAVE:t.type===H.POINTEROVER?n.type=H.POINTERENTER:n.type=H.POINTERLEAVE,n.target=n.srcElement=e,n.bubbles=!1,n._originalEvent=t,n}var d1=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Zu=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,n,r){d1&&(this.element.style.cursor="pointer"),this.handlerInfos.push(i1(this.element,e,n(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)o1(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},f1={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function yr(t){return t.eventType}function Cg(t,e){t.eventType=e}function Yu(t){return t.event}function _b(t,e){t.event=e}function vb(t){return t.targetElement}function Eb(t,e){t.targetElement=e}function Ib(t){return t.eic}function h1(t,e){t.eic=e}function p1(t){return t.timeStamp}function g1(t,e){t.timeStamp=e}function Ju(t){return t.eia}function wb(t,e,n){t.eia=[e,n]}function Eg(t){t.eia=void 0}function Qu(t){return t[1]}function m1(t){return t.eirp}function Tb(t,e){t.eirp=e}function Db(t){return t.eir}function bb(t,e){t.eir=e}function Cb(t){return{eventType:t.eventType,event:t.event,targetElement:t.targetElement,eic:t.eic,eia:t.eia,timeStamp:t.timeStamp,eirp:t.eirp,eiack:t.eiack,eir:t.eir}}function y1(t,e,n,r,i,o,s,c){return{eventType:t,event:e,targetElement:n,eic:r,timeStamp:i,eia:o,eirp:s,eiack:c}}var Ig=class t{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return yr(this.eventInfo)}setEventType(e){Cg(this.eventInfo,e)}getEvent(){return Yu(this.eventInfo)}setEvent(e){_b(this.eventInfo,e)}getTargetElement(){return vb(this.eventInfo)}setTargetElement(e){Eb(this.eventInfo,e)}getContainer(){return Ib(this.eventInfo)}setContainer(e){h1(this.eventInfo,e)}getTimestamp(){return p1(this.eventInfo)}setTimestamp(e){g1(this.eventInfo,e)}getAction(){let e=Ju(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){Eg(this.eventInfo);return}wb(this.eventInfo,e.name,e.element)}getIsReplay(){return m1(this.eventInfo)}setIsReplay(e){Tb(this.eventInfo,e)}getResolved(){return Db(this.eventInfo)}setResolved(e){bb(this.eventInfo,e)}clone(){return new t(Cb(this.eventInfo))}},_1={},v1=/\s*;\s*/,E1=H.CLICK,wg=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:n=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=n}resolveEventType(e){this.clickModSupport&&yr(e)===H.CLICK&&c1(Yu(e))?Cg(e,H.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){Db(e)||(this.populateAction(e,vb(e)),bb(e,!0))}resolveParentAction(e){let n=Ju(e),r=n&&Qu(n);Eg(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,n){let r=n;for(;r&&r!==Ib(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Ju(e));)r=this.getParentNode(r);let i=Ju(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(yr(e)===H.MOUSEENTER||yr(e)===H.MOUSELEAVE||yr(e)===H.POINTERENTER||yr(e)===H.POINTERLEAVE)))if(u1(Yu(e),yr(e),Qu(i))){let o=l1(Yu(e),Qu(i));_b(e,o),Eb(e,Qu(i))}else Eg(e)}getParentNode(e){let n=e[Dg.OWNER];if(n)return n;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,n){let r=this.parseActions(e),i=r[yr(n)];i!==void 0&&wb(n,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,n,r)}parseActions(e){let n=Zk(e);if(!n){let r=e.getAttribute(Yc.JSACTION);if(!r)n=_1,pb(e,n);else{if(n=Xk(r),!n){n={};let i=r.split(v1);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let c=s.indexOf(f1.EVENT_ACTION_SEPARATOR),u=c!==-1,l=u?s.substr(0,c).trim():E1,f=u?s.substr(c+1).trim():s;n[l]=f}e1(r,n)}pb(e,n)}}return n}addA11yClickSupport(e,n,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=n,this.populateClickOnlyAction=r}},Sb=(function(t){return t[t.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",t})(Sb||{}),Tg=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:n,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=n,this.eventReplayer=r}dispatch(e){let n=new Ig(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=n.getAction();if(r&&I1(r.element,n)&&s1(n.getEvent()),this.eventReplayer&&n.getIsReplay()){this.scheduleEventInfoWrapperReplay(n);return}this.dispatchDelegate(n)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function I1(t,e){return t.tagName==="A"&&(e.getEventType()===H.CLICK||e.getEventType()===H.CLICKMOD)}var Ab=Symbol.for("propagationStopped"),Sg={REPLAY:101};var w1="`preventDefault` called during event replay.";var T1="`composedPath` called during event replay.",Xu=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,n=!0){this.dispatchDelegate=e,this.clickModSupport=n,this.actionResolver=new wg({clickModSupport:n}),this.dispatcher=new Tg(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&C1(e),D1(e);e.getAction();){if(S1(e),bg(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),b1(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function D1(t){let e=t.getEvent(),n=t.getEvent().stopPropagation.bind(e),r=()=>{e[Ab]=!0,n()};gi(e,"stopPropagation",r),gi(e,"stopImmediatePropagation",r)}function b1(t){return!!t.getEvent()[Ab]}function C1(t){let e=t.getEvent(),n=t.getTargetElement(),r=e.preventDefault.bind(e);gi(e,"target",n),gi(e,"eventPhase",Sg.REPLAY),gi(e,"preventDefault",()=>{throw r(),new Error(w1+"")}),gi(e,"composedPath",()=>{throw new Error(T1+"")})}function S1(t){let e=t.getEvent(),n=t.getAction()?.element;n&&gi(e,"currentTarget",n,{configurable:!0})}function gi(t,e,n,{configurable:r=!1}={}){Object.defineProperty(t,e,{value:n,configurable:r})}function Nb(t,e){t.ecrd(n=>{e.dispatch(n)},Sb.I_AM_THE_JSACTION_FRAMEWORK)}function A1(t){return t?.q??[]}function N1(t){t&&(mb(t.c,t.et,t.h),mb(t.c,t.etc,t.h,!0))}function mb(t,e,n,r){for(let i=0;i<e.length;i++)t.removeEventListener(e[i],n,r)}var R1=!1,Rb=(()=>{class t{static MOUSE_SPECIAL_SUPPORT=R1;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(n){this.containerManager=n}handleEvent(n,r,i){let o=y1(n,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(n){if(!this.dispatcher){Tb(n,!0),this.queuedEventInfos?.push(n);return}this.dispatcher(n)}addEvent(n,r,i){if(n in this.eventHandlers||!this.containerManager||!t.MOUSE_SPECIAL_SUPPORT&&t1.indexOf(n)>=0)return;let o=(c,u,l)=>{this.handleEvent(c,u,l)};this.eventHandlers[n]=o;let s=r1(r||n);if(s!==n){let c=this.browserEventTypeToExtraEventTypes[s]||[];c.push(n),this.browserEventTypeToExtraEventTypes[s]=c}this.containerManager.addEventListener(s,c=>u=>{o(n,u,c)},i)}replayEarlyEvents(n=window._ejsa){n&&(this.replayEarlyEventInfos(n.q),N1(n),delete window._ejsa)}replayEarlyEventInfos(n){for(let r=0;r<n.length;r++){let i=n[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let c=Cb(i);Cg(c,o[s]),this.handleEventInfo(c)}}}getEventTypesForBrowserEventType(n){let r=[];return this.eventHandlers[n]&&r.push(n),this.browserEventTypeToExtraEventTypes[n]&&r.push(...this.browserEventTypeToExtraEventTypes[n]),r}handler(n){return this.eventHandlers[n]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(n,r){this.ecrd(n,r)}ecrd(n,r){if(this.dispatcher=n,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return t})();function Mb(t,e=window){return A1(e._ejsas?.[t])}function Ag(t,e=window){e._ejsas&&(e._ejsas[t]=void 0)}var Ng=new $(""),oF=new $("");function qs(t){return!t.moduleRef}function sF(t){let e=qs(t)?t.r3Injector:t.moduleRef.injector,n=e.get(pt);return n.run(()=>{qs(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Nn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),qs(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Ng);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Ng);s.add(o),t.moduleRef.onDestroy(()=>{bs(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return cF(r,n,()=>{let o=e.get(fr),s=o.add(),c=e.get(mg);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Ku,$s);if(tb(u||$s),!e.get(oF,!0))return qs(t)?e.get(Dt):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(qs(t)){let f=e.get(Dt);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return aF?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var aF;function cF(t,e,n){try{let r=n();return uo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var tl=null;function uF(t=[],e){return Bt.create({name:e,providers:[{provide:ms,useValue:"platform"},{provide:Ng,useValue:new Set([()=>tl=null])},...t]})}function lF(t=[]){if(tl)return tl;let e=uF(t);return tl=e,KD(),dF(e),e}function dF(t){let e=t.get(Tu,null);_s(t,()=>{e?.forEach(n=>n())})}var rl=(()=>{class t{static __NG_ELEMENT_ID__=fF}return t})();function fF(t){return hF(Mt(),de(),(t&16)===16)}function hF(t,e,n){if(bn(t)&&!n){let r=Rt(t.index,e);return new oo(r,r)}else if(t.type&175){let r=e[ct];return new oo(r,e)}return null}function Fb(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;pe(ce.BootstrapApplicationStart);try{let o=i?.injector??lF(r),s=[hb(),QI,...n||[]],c=new Rs({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return sF({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{pe(ce.BootstrapApplicationEnd)}}var el=new WeakSet,xb="",nl=[];function Pb(t){return t.get(Fp,gT)}function Lb(){let t=[{provide:Fp,useFactory:()=>{let e=!0;{let n=j(dn);e=!!window._ejsas?.[n]}return e&&Kt("NgEventReplay"),e}}];return t.push({provide:Dn,useValue:()=>{let e=j(Dt),{injector:n}=e;if(!el.has(e)){let r=j(Lp);if(Pb(n)){TT();let i=n.get(dn),o=IT(i,(s,c,u)=>{s.nodeType===Node.ELEMENT_NODE&&(yT(s,c,u),_T(s,r))});e.onDestroy(o)}}},multi:!0},{provide:lo,useFactory:()=>{let e=j(Dt),{injector:n}=e;return()=>{if(!Pb(n)||el.has(e))return;el.add(e);let r=n.get(dn);e.onDestroy(()=>{el.delete(e),Ag(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=n.get(ET);pF(i,n);let o=n.get(Lp);o.get(xb)?.forEach(vT),o.delete(xb);let s=i.instance;RT(n)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),t}var pF=(t,e)=>{let n=e.get(dn),r=window._ejsas[n],i=t.instance=new Rb(new Zu(r.c));for(let c of r.et)i.addEvent(c);for(let c of r.etc)i.addEvent(c);let o=Mb(n);i.replayEarlyEventInfos(o),Ag(n);let s=new Xu(c=>{gF(e,c,c.currentTarget)});Nb(i,s)};function gF(t,e,n){let r=(n&&n.getAttribute(Fs))??"";/d\d+/.test(r)?mF(r,t,e,n):e.eventPhase===Sg.REPLAY&&Vp(e,n)}function mF(t,e,n,r){nl.push({event:n,currentTarget:r}),JD(e,t,yF)}function yF(t){let e=[...nl],n=new Set(t);nl=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(Fs);n.has(o)?Vp(r,i):nl.push({event:r,currentTarget:i})}}var Ob=!1;function _F(){Ob||(Ob=!0,ST(),XD(),lb(),eb(),$D(),VD(),CD(),uD())}function vF(t){return t.whenStable()}function Vb(){let t=[{provide:ks,useFactory:()=>{let e=!0;return e=!!j(ao,{optional:!0})?.get(jp,null),e&&Kt("NgHydration"),e}},{provide:Dn,useValue:()=>{wD(!1);let e=j(ut);j(ks)&&(PT(e),_F())},multi:!0}];return t.push({provide:kp,useFactory:()=>j(ks)},{provide:lo,useFactory:()=>{if(j(ks)){let e=j(Dt);return()=>{vF(e).then(()=>{e.destroyed||ag(e)})}}return()=>{}},multi:!0}),cr(t)}function jb(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Bb=null;function _r(){return Bb}function Rg(t){Bb??=t}var Ws=class{};function EF(t,e){return new J(2100,!1)}var Mg=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw EF(t,n);return n.toUpperCase()}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=dg({name:"uppercase",type:t,pure:!0})}return t})();var il=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=fi({type:t});static \u0275inj=sr({})}return t})();function xg(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ks=class{};var Ub="browser";var Qs=class{_doc;constructor(e){this._doc=e}manager},ol=(()=>{class t extends Qs{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(me(ut))};static \u0275prov=we({token:t,factory:t.\u0275fac})}return t})(),cl=new $(""),Fg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof ol));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof ol);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(me(cl),me(pt))};static \u0275prov=we({token:t,factory:t.\u0275fac})}return t})(),Pg="ng-app-id";function Hb(t){for(let e of t)e.remove()}function $b(t,e){let n=e.createElement("style");return n.textContent=t,n}function TF(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Pg}="${e}"],link[${Pg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Pg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function kg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Lg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,TF(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,$b);r?.forEach(i=>this.addUsage(i,this.external,kg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Hb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Hb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,$b(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,kg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(me(ut),me(dn),me(Du,8),me(Os))};static \u0275prov=we({token:t,factory:t.\u0275fac})}return t})(),Og={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Vg=/%COMP%/g;var qb="%COMP%",DF=`_nghost-${qb}`,bF=`_ngcontent-${qb}`,CF=!0,SF=new $("",{factory:()=>CF});function AF(t){return bF.replace(Vg,t)}function NF(t){return DF.replace(Vg,t)}function zb(t,e){return e.map(n=>n.replace(Vg,t))}var jg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Ys(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof al?i.applyToHost(n):i instanceof Js&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Wt.Emulated:o=new al(u,l,r,this.appId,f,s,c,p,m);break;case Wt.ShadowDom:return new sl(u,n,r,s,c,this.nonce,p,m,l);case Wt.ExperimentalIsolatedShadowDom:return new sl(u,n,r,s,c,this.nonce,p,m);default:o=new Js(u,l,r,f,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(me(Fg),me(Lg),me(dn),me(SF),me(ut),me(pt),me(Du),me(pr,8))};static \u0275prov=we({token:t,factory:t.\u0275fac})}return t})(),Ys=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Og[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Gb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Gb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Og[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Og[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ln.DashCase|ln.Important)?e.style.setProperty(n,r,i&ln.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ln.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=_r().getGlobalEventTarget(this.doc,e),!e))throw new J(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Gb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var sl=class extends Ys{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,c,u,l){super(e,i,o,c,u),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=zb(r.id,f);for(let m of f){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=kg(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Js=class extends Ys{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?zb(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&ci.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},al=class extends Js{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,c,u,l,f),this.contentAttr=AF(f),this.hostAttr=NF(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var ul=class t extends Ws{supportsDOMEvents=!0;static makeCurrent(){Rg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=RF();return n==null?null:MF(n)}resetBaseElement(){Zs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return xg(document.cookie,e)}},Zs=null;function RF(){return Zs=Zs||document.head.querySelector("base"),Zs?Zs.getAttribute("href"):null}function MF(t){return new URL(t,document.baseURI).pathname}var xF=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=we({token:t,factory:t.\u0275fac})}return t})(),Wb=["alt","control","meta","shift"],PF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Kb=(()=>{class t extends Qs{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_r().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),Wb.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=PF[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Wb.forEach(s=>{if(s!==i){let c=OF[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(me(ut))};static \u0275prov=we({token:t,factory:t.\u0275fac})}return t})();function Bg(t,e,n){let r=V({rootComponent:t,platformRef:n?.platformRef},kF(e));return Fb(r)}function kF(t){return{appProviders:[...BF,...t?.providers??[]],platformProviders:jF}}function FF(){ul.makeCurrent()}function LF(){return new rn}function VF(){return Mp(document),document}var jF=[{provide:Os,useValue:Ub},{provide:Tu,useValue:FF,multi:!0},{provide:ut,useFactory:VF}];var BF=[{provide:ms,useValue:"root"},{provide:rn,useFactory:LF},{provide:cl,useClass:ol,multi:!0},{provide:cl,useClass:Kb,multi:!0},jg,Lg,Fg,{provide:ui,useExisting:jg},{provide:Ks,useClass:xF},[]];var Xs=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var UF="text/plain",HF="application/json",R7=`${HF}, ${UF}, */*`;var Hg=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Hg||{}),Ug=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,r="OK"){this.headers=e.headers||new Xs,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}};var ll=class t extends Ug{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Hg.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}};var Qb=new $("");var $F=new $(""),GF="b",qF="h",zF="s",WF="st",KF="u",QF="rt",$g=new $(""),YF=["GET","HEAD"];function JF(t,e){let y=j($g),{isCacheActive:n}=y,r=ss(y,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!YF.includes(o)||!r.includeRequestsWithAuthHeaders&&ZF(t)||r.filter?.(t)===!1)return e(t);let s=j(ao);if(j($F,{optional:!0}))throw new J(2803,!1);let u=t.url,l=XF(t,u),f=s.get(l,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),f){let{[GF]:C,[QF]:A,[qF]:N,[zF]:L,[WF]:X,[KF]:ie}=f,Ve=C;switch(A){case"arraybuffer":Ve=new TextEncoder().encode(C).buffer;break;case"blob":Ve=new Blob([C]);break}let Ke=new Xs(N);return Vf(new ll({body:Ve,headers:Ke,status:L,statusText:X,url:ie}))}return e(t)}function ZF(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function Yb(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function XF(t,e){let{params:n,method:r,responseType:i}=t,o=Yb(n),s=t.serializeBody();s instanceof URLSearchParams?s=Yb(s):typeof s!="string"&&(s="");let c=[r,i,e,s,o].join("|"),u=eL(c);return u}function eL(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Jb(t){return[{provide:$g,useFactory:()=>(Kt("NgHttpTransferCache"),V({isCacheActive:!0},t))},{provide:Qb,useValue:JF,multi:!0},{provide:lo,multi:!0,useFactory:()=>{let e=j(Dt),n=j($g);return()=>{e.whenStable().then(()=>{n.isCacheActive=!1})}}}]}var dl=(function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t[t.IncrementalHydration=4]="IncrementalHydration",t})(dl||{});function tL(t,e=[],n={}){return{\u0275kind:t,\u0275providers:e}}function Zb(){return tL(dl.EventReplay,Lb())}function Xb(...t){let e=[],n=new Set;for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);let r=n.has(dl.HttpTransferCacheOptions);return cr([[],Vb(),n.has(dl.NoHttpTransferCache)||r?[]:Jb({}),e])}var eC={providers:[Vh(),Xb(Zb())]};var uC=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(be(di),be(hr))};static \u0275dir=Pt({type:t})}return t})(),Qg=(()=>{class t extends uC{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ps(t)))(i||t)}})();static \u0275dir=Pt({type:t,features:[Mn]})}return t})(),ml=new $("");var nL={provide:ml,useExisting:Tn(()=>yl),multi:!0};function rL(){let t=_r()?_r().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var iL=new $(""),yl=(()=>{class t extends uC{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!rL())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(be(di),be(hr),be(iL,8))};static \u0275dir=Pt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Te("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[fo([nL]),Mn]})}return t})();var oL=new $(""),sL=new $("");function lC(t){return t!=null}function dC(t){return uo(t)?ls(t):t}function fC(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function hC(t,e){return e.map(n=>n(t))}function aL(t){return!t.validate}function pC(t){return t.map(e=>aL(e)?e:n=>e.validate(n))}function cL(t){if(!t)return null;let e=t.filter(lC);return e.length==0?null:function(n){return fC(hC(n,e))}}function gC(t){return t!=null?cL(pC(t)):null}function uL(t){if(!t)return null;let e=t.filter(lC);return e.length==0?null:function(n){let r=hC(n,e).map(dC);return jf(r).pipe(qr(fC))}}function mC(t){return t!=null?uL(pC(t)):null}function tC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function lL(t){return t._rawValidators}function dL(t){return t._rawAsyncValidators}function Gg(t){return t?Array.isArray(t)?t:[t]:[]}function hl(t,e){return Array.isArray(t)?t.includes(e):t===e}function nC(t,e){let n=Gg(e);return Gg(t).forEach(i=>{hl(n,i)||n.push(i)}),n}function rC(t,e){return Gg(e).filter(n=>!hl(t,n))}var pl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},qg=class extends pl{name;get formDirective(){return null}get path(){return null}},ia=class extends pl{_parent=null;name=null;valueAccessor=null},zg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var yC=(()=>{class t extends zg{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(be(ia,2))};static \u0275dir=Pt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Mn]})}return t})();var ea="VALID",fl="INVALID",ho="PENDING",ta="DISABLED",mi=class{},gl=class extends mi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},na=class extends mi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},ra=class extends mi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},po=class extends mi{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var Wg=class extends mi{source;constructor(e){super(),this.source=e}};function fL(t){return(_l(t)?t.validators:t)||null}function hL(t){return Array.isArray(t)?gC(t):t||null}function pL(t,e){return(_l(e)?e.asyncValidators:t)||null}function gL(t){return Array.isArray(t)?mC(t):t||null}function _l(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Kg=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return cn(this.statusReactive)}set status(e){cn(()=>this.statusReactive.set(e))}_status=Pn(()=>this.statusReactive(),{});statusReactive=ve(void 0,{});get valid(){return this.status===ea}get invalid(){return this.status===fl}get pending(){return this.status==ho}get disabled(){return this.status===ta}get enabled(){return this.status!==ta}errors;get pristine(){return cn(this.pristineReactive)}set pristine(e){cn(()=>this.pristineReactive.set(e))}_pristine=Pn(()=>this.pristineReactive(),{});pristineReactive=ve(!0,{});get dirty(){return!this.pristine}get touched(){return cn(this.touchedReactive)}set touched(e){cn(()=>this.touchedReactive.set(e))}_touched=Pn(()=>this.touchedReactive(),{});touchedReactive=ve(!1,{});get untouched(){return!this.touched}_events=new en;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(nC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rC(e,this._rawAsyncValidators))}hasValidator(e){return hl(this._rawValidators,e)}hasAsyncValidator(e){return hl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ae(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ra(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ra(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ae(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new na(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new na(!0,r))}markAsPending(e={}){this.status=ho;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new po(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ae(V({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ta,this.errors=null,this._forEachChild(i=>{i.disable(ae(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gl(this.value,r)),this._events.next(new po(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ea,this._forEachChild(r=>{r.enable(ae(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ea||this.status===ho)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gl(this.value,n)),this._events.next(new po(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ae(V({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ta:ea}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ho,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=dC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new po(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?ta:this.errors?fl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ho)?ho:this._anyControlsHaveStatus(fl)?fl:ea}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new na(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ra(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){_l(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=hL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=gL(this._rawAsyncValidators)}};var _C=new $("",{factory:()=>Yg}),Yg="always";function mL(t,e){return[...e.path,t]}function yL(t,e,n=Yg){vL(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),EL(t,e),wL(t,e),IL(t,e),_L(t,e)}function iC(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function _L(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function vL(t,e){let n=lL(t);e.validator!==null?t.setValidators(tC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=dL(t);e.asyncValidator!==null?t.setAsyncValidators(tC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();iC(e._rawValidators,i),iC(e._rawAsyncValidators,i)}function EL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&vC(t,e)})}function IL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&vC(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function vC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function wL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function TL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function DL(t){return Object.getPrototypeOf(t.constructor)===Qg}function bL(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===yl?n=o:DL(o)?r=o:i=o}),i||r||n||null}function oC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function sC(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var CL=class extends Kg{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(fL(n),pL(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_l(n)&&(n.nonNullable||n.initialValueIsDefault)&&(sC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Wg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){sC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var SL={provide:ia,useExisting:Tn(()=>Jg)},aC=Promise.resolve(),Jg=(()=>{class t extends ia{_changeDetectorRef;callSetDisabledState;control=new CL;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new _t;constructor(n,r,i,o,s,c){super(),this._changeDetectorRef=s,this.callSetDisabledState=c,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=bL(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),TL(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){aC.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&jb(r);aC.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?mL(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(be(qg,9),be(oL,10),be(sL,10),be(ml,10),be(rl,8),be(_C,8))};static \u0275dir=Pt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[fo([SL]),Mn,wu]})}return t})();var AL={provide:ml,useExisting:Tn(()=>vl),multi:!0};function EC(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function NL(t){return t.split(":")[0]}var vl=(()=>{class t extends Qg{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=j(Dt).injector;destroyRef=j(An);cdr=j(rl);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,ku({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=EC(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=NL(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ps(t)))(i||t)}})();static \u0275dir=Pt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fo([AL]),Mn]})}return t})(),IC=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(EC(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(be(hr),be(di),be(vl,9))};static \u0275dir=Pt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),RL={provide:ml,useExisting:Tn(()=>wC),multi:!0};function cC(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function ML(t){return t.split(":")[0]}var wC=(()=>{class t extends Qg{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let c=0;c<s.length;c++){let u=s[c],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let c=0;c<s.length;c++){let u=s[c];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=ML(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ps(t)))(i||t)}})();static \u0275dir=Pt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Te("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[fo([RL]),Mn]})}return t})(),TC=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(cC(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(cC(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(be(hr),be(di),be(wC,9))};static \u0275dir=Pt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var xL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=fi({type:t});static \u0275inj=sr({})}return t})();var DC=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:_C,useValue:n.callSetDisabledState??Yg}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=fi({type:t});static \u0275inj=sr({imports:[xL]})}return t})();var bC=()=>{};var AC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},OL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},NC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Xg;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Xg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},kL=function(t){let e=AC(t);return NC.encodeByteArray(e,!0)},sa=function(t){return kL(t).replace(/\./g,"")},Il=function(t){try{return NC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function RC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var FL=()=>RC().__FIREBASE_DEFAULTS__,LL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Il(t[1]);return e&&JSON.parse(e)},wl=()=>{try{return bC()||FL()||LL()||VL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tm=t=>wl()?.emulatorHosts?.[t],MC=t=>{let e=tm(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nm=()=>wl()?.config,rm=t=>wl()?.[`_${t}`];var El=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function vr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Tl(t){return(await fetch(t,{credentials:"include"})).ok}function xC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=V({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sa(JSON.stringify(n)),sa(JSON.stringify(s)),""].join(".")}var oa={};function jL(){let t={prod:[],emulator:[]};for(let e of Object.keys(oa))oa[e]?t.emulator.push(e):t.prod.push(e);return t}function BL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var CC=!1;function Dl(t,e){if(typeof window>"u"||typeof document>"u"||!vr(window.location.host)||oa[t]===e||oa[t]||CC)return;oa[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=jL().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{CC=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=BL(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),N=document.getElementById(A)||document.createElement("a"),L=n("preprendIcon"),X=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let ie=m.element;c(ie),f(N,A);let Ve=l();u(X,L),ie.append(X,C,N,Ve),document.body.appendChild(ie)}o?(C.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function $e(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function UL(){let t=wl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LC(){let t=$e();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VC(){return!UL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function im(){try{return typeof indexedDB=="object"}catch{return!1}}function jC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var HL="FirebaseError",bt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=HL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,On.prototype.create)}},On=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?$L(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new bt(i,c,r)}};function $L(t,e){return t.replace(GL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var GL=/\{\$([^}]+)}/g;function BC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(SC(o)&&SC(s)){if(!hn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function SC(t){return t!==null&&typeof t=="object"}function aa(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function UC(t,e){let n=new em(t,e);return n.subscribe.bind(n)}var em=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zg),i.error===void 0&&(i.error=Zg),i.complete===void 0&&(i.complete=Zg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function qL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zg(){}var AK=14400*1e3;function dt(t){return t&&t._delegate?t._delegate:t}var Lt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var yi="[DEFAULT]";var om=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new El;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WL(e))try{this.getOrInitializeService({instanceIdentifier:yi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yi){return this.instances.has(e)}getOptions(e=yi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yi){return this.component?this.component.multipleInstances?e:yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zL(t){return t===yi?void 0:t}function WL(t){return t.instantiationMode==="EAGER"}var bl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new om(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var KL=[],re=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(re||{}),QL={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},YL=re.INFO,JL={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},ZL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=JL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Er=class{constructor(e){this.name=e,this._logLevel=YL,this._logHandler=ZL,this._userLogHandler=null,KL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var XL=(t,e)=>e.some(n=>t instanceof n),HC,$C;function eV(){return HC||(HC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tV(){return $C||($C=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GC=new WeakMap,am=new WeakMap,qC=new WeakMap,sm=new WeakMap,um=new WeakMap;function nV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(pn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&GC.set(n,t)}).catch(()=>{}),um.set(e,t),e}function rV(t){if(am.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});am.set(t,e)}var cm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return am.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zC(t){cm=t(cm)}function iV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Cl(this),e,...n);return qC.set(r,e.sort?e.sort():[e]),pn(r)}:tV().includes(t)?function(...e){return t.apply(Cl(this),e),pn(GC.get(this))}:function(...e){return pn(t.apply(Cl(this),e))}}function oV(t){return typeof t=="function"?iV(t):(t instanceof IDBTransaction&&rV(t),XL(t,eV())?new Proxy(t,cm):t)}function pn(t){if(t instanceof IDBRequest)return nV(t);if(sm.has(t))return sm.get(t);let e=oV(t);return e!==t&&(sm.set(t,e),um.set(e,t)),e}var Cl=t=>um.get(t);function KC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=pn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(pn(s.result),u.oldVersion,u.newVersion,pn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var sV=["get","getKey","getAll","getAllKeys","count"],aV=["put","add","delete","clear"],lm=new Map;function WC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lm.get(e))return lm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=aV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sV.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return lm.set(e,o),o}zC(t=>ae(V({},t),{get:(e,n,r)=>WC(e,n)||t.get(e,n,r),has:(e,n)=>!!WC(e,n)||t.has(e,n)}));var fm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function cV(t){return t.getComponent()?.type==="VERSION"}var hm="@firebase/app",QC="0.14.6";var kn=new Er("@firebase/app"),uV="@firebase/app-compat",lV="@firebase/analytics-compat",dV="@firebase/analytics",fV="@firebase/app-check-compat",hV="@firebase/app-check",pV="@firebase/auth",gV="@firebase/auth-compat",mV="@firebase/database",yV="@firebase/data-connect",_V="@firebase/database-compat",vV="@firebase/functions",EV="@firebase/functions-compat",IV="@firebase/installations",wV="@firebase/installations-compat",TV="@firebase/messaging",DV="@firebase/messaging-compat",bV="@firebase/performance",CV="@firebase/performance-compat",SV="@firebase/remote-config",AV="@firebase/remote-config-compat",NV="@firebase/storage",RV="@firebase/storage-compat",MV="@firebase/firestore",xV="@firebase/ai",PV="@firebase/firestore-compat",OV="firebase",kV="12.6.0";var pm="[DEFAULT]",FV={[hm]:"fire-core",[uV]:"fire-core-compat",[dV]:"fire-analytics",[lV]:"fire-analytics-compat",[hV]:"fire-app-check",[fV]:"fire-app-check-compat",[pV]:"fire-auth",[gV]:"fire-auth-compat",[mV]:"fire-rtdb",[yV]:"fire-data-connect",[_V]:"fire-rtdb-compat",[vV]:"fire-fn",[EV]:"fire-fn-compat",[IV]:"fire-iid",[wV]:"fire-iid-compat",[TV]:"fire-fcm",[DV]:"fire-fcm-compat",[bV]:"fire-perf",[CV]:"fire-perf-compat",[SV]:"fire-rc",[AV]:"fire-rc-compat",[NV]:"fire-gcs",[RV]:"fire-gcs-compat",[MV]:"fire-fst",[PV]:"fire-fst-compat",[xV]:"fire-vertex","fire-js":"fire-js",[OV]:"fire-js-all"};var Sl=new Map,LV=new Map,gm=new Map;function YC(t,e){try{t.container.addComponent(e)}catch(n){kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wr(t){let e=t.name;if(gm.has(e))return kn.debug(`There were multiple attempts to register component ${e}.`),!1;gm.set(e,t);for(let n of Sl.values())YC(n,t);for(let n of LV.values())YC(n,t);return!0}function ua(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ct(t){return t==null?!1:t.settings!==void 0}var VV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new On("app","Firebase",VV);var mm=class{constructor(e,n,r){this._isDeleted=!1,this._options=V({},e),this._config=V({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}};var Tr=kV;function vm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=V({name:pm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ir.create("bad-app-name",{appName:String(i)});if(n||(n=nm()),!n)throw Ir.create("no-options");let o=Sl.get(i);if(o){if(hn(n,o.options)&&hn(r,o.config))return o;throw Ir.create("duplicate-app",{appName:i})}let s=new bl(i);for(let u of gm.values())s.addComponent(u);let c=new mm(n,r,s);return Sl.set(i,c),c}function Al(t=pm){let e=Sl.get(t);if(!e&&t===pm&&nm())return vm();if(!e)throw Ir.create("no-app",{appName:t});return e}function Qt(t,e,n){let r=FV[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kn.warn(s.join(" "));return}wr(new Lt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var jV="firebase-heartbeat-database",BV=1,ca="firebase-heartbeat-store",dm=null;function eS(){return dm||(dm=KC(jV,BV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),dm}async function UV(t){try{let n=(await eS()).transaction(ca),r=await n.objectStore(ca).get(tS(t));return await n.done,r}catch(e){if(e instanceof bt)kn.warn(e.message);else{let n=Ir.create("idb-get",{originalErrorMessage:e?.message});kn.warn(n.message)}}}async function JC(t,e){try{let r=(await eS()).transaction(ca,"readwrite");await r.objectStore(ca).put(e,tS(t)),await r.done}catch(n){if(n instanceof bt)kn.warn(n.message);else{let r=Ir.create("idb-set",{originalErrorMessage:n?.message});kn.warn(r.message)}}}function tS(t){return`${t.name}!${t.options.appId}`}var HV=1024,$V=30,ym=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new _m(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ZC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>$V){let i=qV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){kn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=ZC(),{heartbeatsToSend:n,unsentEntries:r}=GV(this._heartbeatsCache.heartbeats),i=sa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return kn.warn(e),""}}};function ZC(){return new Date().toISOString().substring(0,10)}function GV(t,e=HV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),XC(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),XC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var _m=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return im()?jC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await UV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return JC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return JC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function XC(t){return sa(JSON.stringify({version:2,heartbeats:t})).length}function qV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function zV(t){wr(new Lt("platform-logger",e=>new fm(e),"PRIVATE")),wr(new Lt("heartbeat",e=>new ym(e),"PRIVATE")),Qt(hm,QC,t),Qt(hm,QC,"esm2020"),Qt("fire-js","")}zV("");var WV="firebase",KV="12.6.0";Qt(WV,KV,"app");function mS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yS=mS,_S=new On("auth","Firebase",mS());var Ol=new Er("@firebase/auth");function QV(t,...e){Ol.logLevel<=re.WARN&&Ol.warn(`Auth (${Tr}): ${t}`,...e)}function Rl(t,...e){Ol.logLevel<=re.ERROR&&Ol.error(`Auth (${Tr}): ${t}`,...e)}function Sr(t,...e){throw jm(t,...e)}function _i(t,...e){return jm(t,...e)}function vS(t,e,n){let r=ae(V({},yS()),{[e]:n});return new On("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return vS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _S.create(t,...e)}function K(t,e,...n){if(!t)throw jm(e,...n)}function Fn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Rl(e),new Error(e)}function Ar(t,e){t||Fn(e)}function Tm(){return typeof self<"u"&&self.location?.href||""}function YV(){return nS()==="http:"||nS()==="https:"}function nS(){return typeof self<"u"&&self.location?.protocol||null}function JV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YV()||kC()||"connection"in navigator)?navigator.onLine:!0}function ZV(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var vi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=PC()||FC()}get(){return JV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Bm(t,e){Ar(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var kl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var XV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var e2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],t2=new vi(3e4,6e4);function zl(t,e){return t.tenantId&&!e.tenantId?ae(V({},e),{tenantId:t.tenantId}):e}async function go(t,e,n,r,i={}){return ES(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=aa(V({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=V({method:e,headers:u},o);return OC()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&vr(t.emulatorConfig.host)&&(l.credentials="include"),kl.fetch()(await wS(t,t.config.apiHost,n,c),l)})}async function ES(t,e,n){t._canInitEmulator=!1;let r=V(V({},XV),e);try{let i=new Dm(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Nl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Nl(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw vS(t,f,l);Sr(t,f)}}catch(i){if(i instanceof bt)throw i;Sr(t,"network-request-failed",{message:String(i)})}}async function IS(t,e,n,r,i={}){let o=await go(t,e,n,r,i);return"mfaPendingCredential"in o&&Sr(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function wS(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Bm(t.config,i):`${t.config.apiScheme}://${i}`;return e2.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var Dm=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_i(this.auth,"network-request-failed")),t2.get())})}};function Nl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=_i(t,e,r);return i.customData._tokenResponse=n,i}async function n2(t,e){return go(t,"POST","/v1/accounts:delete",e)}async function Fl(t,e){return go(t,"POST","/v1/accounts:lookup",e)}function la(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TS(t,e=!1){let n=dt(t),r=await n.getIdToken(e),i=Um(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:la(Em(i.auth_time)),issuedAtTime:la(Em(i.iat)),expirationTime:la(Em(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Em(t){return Number(t)*1e3}function Um(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Il(n);return i?JSON.parse(i):(Rl("Failed to decode base64 JWT payload"),null)}catch(i){return Rl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rS(t){let e=Um(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bt&&r2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function r2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var bm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ha=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Ll(t){let e=t.auth,n=await t.getIdToken(),r=await fa(t,Fl(e,{idToken:n}));K(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?bS(i.providerUserInfo):[],s=i2(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ha(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,f)}async function DS(t){let e=dt(t);await Ll(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bS(t){return t.map(r=>{var i=r,{providerId:e}=i,n=ss(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function o2(t,e){let n=await ES(t,{},async()=>{let r=aa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await wS(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return t.emulatorConfig&&vr(t.emulatorConfig.host)&&(u.credentials="include"),kl.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function s2(t,e){return go(t,"POST","/v2/accounts:revokeToken",zl(t,e))}var da=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=rS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await o2(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Fn("not implemented")}};function Dr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var br=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=ss(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ha(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await fa(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TS(this,e)}reload(){return DS(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>V({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(ae(V({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ll(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ct(this.auth.app))return Promise.reject(Cr(this.auth));let e=await this.getIdToken();return await fa(this,n2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ae(V({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>V({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:C,stsTokenManager:A}=n;K(p&&A,e,"internal-error");let N=da.fromJSON(this.name,A);K(typeof p=="string",e,"internal-error"),Dr(r,e.name),Dr(i,e.name),K(typeof m=="boolean",e,"internal-error"),K(typeof y=="boolean",e,"internal-error"),Dr(o,e.name),Dr(s,e.name),Dr(c,e.name),Dr(u,e.name),Dr(l,e.name),Dr(f,e.name);let L=new t({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:c,stsTokenManager:N,createdAt:l,lastLoginAt:f});return C&&Array.isArray(C)&&(L.providerData=C.map(X=>V({},X))),u&&(L._redirectEventId=u),L}static async _fromIdTokenResponse(e,n,r=!1){let i=new da;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ll(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?bS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new da;c.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ha(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var iS=new Map;function Ln(t){Ar(t instanceof Function,"Expected a class definition");let e=iS.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iS.set(t,e),e)}var a2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Cm=a2;function Ml(t,e,n){return`firebase:${t}:${e}:${n}`}var Vl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Ml(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ml("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Fl(this.auth,{idToken:e}).catch(()=>{});return n?br._fromGetAccountInfoResponse(this.auth,n,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Ln(Cm),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Ln(Cm),s=Ml(r,e.config.apiKey,e.name),c=null;for(let l of n)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let m=await Fl(e,{idToken:f}).catch(()=>{});if(!m)break;p=await br._fromGetAccountInfoResponse(e,m,f)}else p=br._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function oS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MS(e))return"Blackberry";if(xS(e))return"Webos";if(SS(e))return"Safari";if((e.includes("chrome/")||AS(e))&&!e.includes("edge/"))return"Chrome";if(RS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function CS(t=$e()){return/firefox\//i.test(t)}function SS(t=$e()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AS(t=$e()){return/crios\//i.test(t)}function NS(t=$e()){return/iemobile/i.test(t)}function RS(t=$e()){return/android/i.test(t)}function MS(t=$e()){return/blackberry/i.test(t)}function xS(t=$e()){return/webos/i.test(t)}function Hm(t=$e()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function c2(t=$e()){return Hm(t)&&!!window.navigator?.standalone}function u2(){return LC()&&document.documentMode===10}function PS(t=$e()){return Hm(t)||RS(t)||xS(t)||MS(t)||/windows phone/i.test(t)||NS(t)}function OS(t,e=[]){let n;switch(t){case"Browser":n=oS($e());break;case"Worker":n=`${oS($e())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tr}/${r}`}var Sm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function l2(t,e={}){return go(t,"GET","/v2/passwordPolicy",zl(t,e))}var d2=6,Am=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??d2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Nm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jl(this),this.idTokenSubscription=new jl(this),this.beforeStateQueue=new Sm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ln(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Fl(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ct(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ll(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ct(this.app))return Promise.reject(Cr(this));let n=e?dt(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ct(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ct(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await l2(this),n=new Am(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new On("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await s2(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Ln(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Vl.create(this,[Ln(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=OS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ct(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&QV(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Wl(t){return dt(t)}var jl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=UC(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function f2(t){$m=t}function h2(t){return $m.loadJS(t)}function p2(){return $m.gapiScript}function kS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function FS(t,e){let n=ua(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(hn(o,e??{}))return i;Sr(i,"already-initialized")}return n.initialize({options:e})}function g2(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ln);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function LS(t,e,n){let r=Wl(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=VS(e),{host:s,port:c}=m2(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(hn(l,r.config.emulator)&&hn(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,vr(s)?(Tl(`${o}//${s}${u}`),Dl("Auth",!0)):i||y2()}function VS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function m2(t){let e=VS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:sS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:sS(s)}}}function sS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function y2(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Bl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}};async function Im(t,e){return IS(t,"POST","/v1/accounts:signInWithIdp",zl(t,e))}var Ul=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Rm=class extends Ul{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function _2(t,e){return IS(t,"POST","/v1/accounts:signUp",zl(t,e))}var Ei=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await br._fromIdTokenResponse(e,r,i),s=aS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=aS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function aS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function Gm(t){if(Ct(t.app))return Promise.reject(Cr(t));let e=Wl(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ei({user:e.currentUser,providerId:null,operationType:"signIn"});let n=await _2(e,{returnSecureToken:!0}),r=await Ei._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}var Mm=class t extends bt{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function jS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Mm._fromErrorAndOperation(t,o,e,r):o})}async function v2(t,e,n=!1){let r=await fa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ei._forOperation(t,"link",r)}async function E2(t,e,n=!1){let{auth:r}=t;if(Ct(r.app))return Promise.reject(Cr(r));let i="reauthenticate";try{let o=await fa(t,jS(r,i,e,t),n);K(o.idToken,r,"internal-error");let s=Um(o.idToken);K(s,r,"internal-error");let{sub:c}=s;return K(t.uid===c,r,"user-mismatch"),Ei._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sr(r,"user-mismatch"),o}}async function I2(t,e,n=!1){if(Ct(t.app))return Promise.reject(Cr(t));let r="signIn",i=await jS(t,r,e),o=await Ei._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function BS(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function US(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}function qm(t,e,n,r){return dt(t).onAuthStateChanged(e,n,r)}var Hl="__sak";var $l=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hl,"1"),this.storage.removeItem(Hl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var w2=1e3,T2=10,D2=(()=>{class t extends $l{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);u2()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,T2):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},w2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),HS=D2;var b2=(()=>{class t extends $l{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),zm=b2;function C2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var S2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(async f=>f(r.origin,s)),l=await C2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function $S(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var xm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=$S("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function gn(){return window}function A2(t){gn().location.href=t}function GS(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}async function N2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function R2(){return navigator?.serviceWorker?.controller||null}function M2(){return GS()?self:null}var qS="firebaseLocalStorageDb",x2=1,Gl="firebaseLocalStorage",zS="fbase_key",Ii=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Kl(t,e){return t.transaction([Gl],e?"readwrite":"readonly").objectStore(Gl)}function P2(){let t=indexedDB.deleteDatabase(qS);return new Ii(t).toPromise()}function Pm(){let t=indexedDB.open(qS,x2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Gl,{keyPath:zS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Gl)?e(r):(r.close(),await P2(),e(await Pm()))})})}async function cS(t,e,n){let r=Kl(t,!0).put({[zS]:e,value:n});return new Ii(r).toPromise()}async function O2(t,e){let n=Kl(t,!1).get(e),r=await new Ii(n).toPromise();return r===void 0?null:r.value}function uS(t,e){let n=Kl(t,!0).delete(e);return new Ii(n).toPromise()}var k2=800,F2=3,L2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pm(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>F2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=S2._getInstance(M2()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await N2(),!this.activeServiceWorker)return;this.sender=new xm(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||R2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await Pm();return await cS(n,Hl,"1"),await uS(n,Hl),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>cS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>O2(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Kl(o,!1).getAll();return new Ii(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),WS=L2;var oQ=kS("rcb"),sQ=new vi(3e4,6e4);function V2(t,e){return e?Ln(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var pa=class extends Bl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Im(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Im(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Im(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function j2(t){return I2(t.auth,new pa(t),t.bypassAuthState)}function B2(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),E2(n,new pa(t),t.bypassAuthState)}async function U2(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),v2(n,new pa(t),t.bypassAuthState)}var Om=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j2;case"linkViaPopup":case"linkViaRedirect":return U2;case"reauthViaPopup":case"reauthViaRedirect":return B2;default:Sr(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var aQ=new vi(2e3,1e4);var H2="pendingRedirect",xl=new Map,km=class extends Om{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xl.get(this.auth._key());if(!e){try{let r=await $2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xl.set(this.auth._key(),e)}return this.bypassAuthState||xl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function $2(t,e){let n=z2(e),r=q2(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function G2(t,e){xl.set(t._key(),e)}function q2(t){return Ln(t._redirectPersistence)}function z2(t){return Ml(H2,t.config.apiKey,t.name)}async function W2(t,e,n=!1){if(Ct(t.app))return Promise.reject(Cr(t));let r=Wl(t),i=V2(r,e),s=await new km(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var K2=600*1e3,Fm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!KS(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(_i(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K2&&this.cachedEventUids.clear(),this.cachedEventUids.has(lS(e))}saveEventToCache(e){this.cachedEventUids.add(lS(e)),this.lastProcessedEventTime=Date.now()}};function lS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Q2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KS(t);default:return!1}}async function Y2(t,e={}){return go(t,"GET","/v1/projects",e)}var J2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z2=/^https?/;async function X2(t){if(t.config.emulator)return;let{authorizedDomains:e}=await Y2(t);for(let n of e)try{if(ej(n))return}catch{}Sr(t,"unauthorized-domain")}function ej(t){let e=Tm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Z2.test(n))return!1;if(J2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var tj=new vi(3e4,6e4);function dS(){let t=gn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nj(t){return new Promise((e,n)=>{function r(){dS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dS(),n(_i(t,"network-request-failed"))},timeout:tj.get()})}if(gn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gn().gapi?.load)r();else{let i=kS("iframefcb");return gn()[i]=()=>{gapi.load?r():n(_i(t,"network-request-failed"))},h2(`${p2()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw Pl=null,e})}var Pl=null;function rj(t){return Pl=Pl||nj(t),Pl}var ij=new vi(5e3,15e3),oj="__/auth/iframe",sj="emulator/auth/iframe",aj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uj(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Bm(e,sj):`https://${t.config.authDomain}/${oj}`,r={apiKey:e.apiKey,appName:t.name,v:Tr},i=cj.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${aa(r).slice(1)}`}async function lj(t){let e=await rj(t),n=gn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:uj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aj,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=_i(t,"network-request-failed"),c=gn().setTimeout(()=>{o(s)},ij.get());function u(){gn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var dj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fj=500,hj=600,pj="_blank",gj="http://localhost",ql=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function mj(t,e,n,r=fj,i=hj){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=ae(V({},dj),{width:r.toString(),height:i.toString(),top:o,left:s}),l=$e().toLowerCase();n&&(c=AS(l)?pj:n),CS(l)&&(e=e||gj,u.scrollbars="yes");let f=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(c2(l)&&c!=="_self")return yj(e||"",c),new ql(null);let p=window.open(e||"",c,f);K(p,t,"popup-blocked");try{p.focus()}catch{}return new ql(p)}function yj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _j="__/auth/handler",vj="emulator/auth/handler",Ej=encodeURIComponent("fac");async function fS(t,e,n,r,i,o){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Tr,eventId:i};if(e instanceof Ul){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",BC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof Rm){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=await t._getAppCheckToken(),l=u?`#${Ej}=${encodeURIComponent(u)}`:"";return`${Ij(t)}?${aa(c).slice(1)}${l}`}function Ij({config:t}){return t.emulator?Bm(t,vj):`https://${t.authDomain}/${_j}`}var wm="webStorageSupport",Lm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zm,this._completeRedirectFn=W2,this._overrideRedirectResult=G2}async _openPopup(e,n,r,i){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await fS(e,n,r,Tm(),i);return mj(e,o,$S())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await fS(e,n,r,Tm(),i);return A2(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ar(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await lj(e),r=new Fm(e);return n.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wm,{type:wm},i=>{let o=i?.[0]?.[wm];o!==void 0&&n(!!o),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PS()||SS()||Hm()}},QS=Lm;var hS="@firebase/auth",pS="1.11.1";var Vm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function wj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Tj(t){wr(new Lt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:OS(t)},l=new Nm(r,i,o,u);return g2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wr(new Lt("auth-internal",e=>{let n=Wl(e.getProvider("auth").getImmediate());return(r=>new Vm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qt(hS,pS,wj(t)),Qt(hS,pS,"esm2020")}var Dj=300,bj=rm("authIdTokenMaxAge")||Dj,gS=null,Cj=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>bj)return;let i=n?.token;gS!==i&&(gS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Wm(t=Al()){let e=ua(t,"auth");if(e.isInitialized())return e.getImmediate();let n=FS(t,{popupRedirectResolver:QS,persistence:[WS,HS,zm]}),r=rm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Cj(o.toString());US(n,s,()=>s(n.currentUser)),BS(n,c=>s(c))}}let i=tm("auth");return i&&LS(n,`http://${i}`),n}function Sj(){return document.getElementsByTagName("head")?.[0]??document}f2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=_i("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Sj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Tj("Browser");var YS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JS={};var Vn,Km;(function(){var t;function e(w,_){function E(){}E.prototype=_.prototype,w.F=_.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,b){for(var v=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)v[ht-2]=arguments[ht];return _.prototype[I].apply(T,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,_,E){E||(E=0);let T=Array(16);if(typeof _=="string")for(var I=0;I<16;++I)T[I]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=w.g[0],E=w.g[1],I=w.g[2];let b=w.g[3],v;v=_+(b^E&(I^b))+T[0]+3614090360&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+T[1]+3905402710&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+T[2]+606105819&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+T[3]+3250441966&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(b^E&(I^b))+T[4]+4118548399&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+T[5]+1200080426&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+T[6]+2821735955&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+T[7]+4249261313&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(b^E&(I^b))+T[8]+1770035416&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+T[9]+2336552879&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+T[10]+4294925233&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+T[11]+2304563134&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(b^E&(I^b))+T[12]+1804603682&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+T[13]+4254626195&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+T[14]+2792965006&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+T[15]+1236535329&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(I^b&(E^I))+T[1]+4129170786&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+T[6]+3225465664&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+T[11]+643717713&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+T[0]+3921069994&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(I^b&(E^I))+T[5]+3593408605&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+T[10]+38016083&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+T[15]+3634488961&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+T[4]+3889429448&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(I^b&(E^I))+T[9]+568446438&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+T[14]+3275163606&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+T[3]+4107603335&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+T[8]+1163531501&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(I^b&(E^I))+T[13]+2850285829&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+T[2]+4243563512&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+T[7]+1735328473&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+T[12]+2368359562&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(E^I^b)+T[5]+4294588738&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+T[8]+2272392833&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+T[11]+1839030562&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+T[14]+4259657740&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(E^I^b)+T[1]+2763975236&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+T[4]+1272893353&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+T[7]+4139469664&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+T[10]+3200236656&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(E^I^b)+T[13]+681279174&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+T[0]+3936430074&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+T[3]+3572445317&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+T[6]+76029189&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(E^I^b)+T[9]+3654602809&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+T[12]+3873151461&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+T[15]+530742520&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+T[2]+3299628645&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(I^(E|~b))+T[0]+4096336452&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+T[7]+1126891415&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+T[14]+2878612391&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+T[5]+4237533241&4294967295,E=I+(v<<21&4294967295|v>>>11),v=_+(I^(E|~b))+T[12]+1700485571&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+T[3]+2399980690&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+T[10]+4293915773&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+T[1]+2240044497&4294967295,E=I+(v<<21&4294967295|v>>>11),v=_+(I^(E|~b))+T[8]+1873313359&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+T[15]+4264355552&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+T[6]+2734768916&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+T[13]+1309151649&4294967295,E=I+(v<<21&4294967295|v>>>11),v=_+(I^(E|~b))+T[4]+4149444226&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+T[11]+3174756917&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+T[2]+718787259&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(I+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,_){_===void 0&&(_=w.length);let E=_-this.blockSize,T=this.C,I=this.h,b=0;for(;b<_;){if(I==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<_;)if(T[I++]=w.charCodeAt(b++),I==this.blockSize){i(this,T),I=0;break}}else for(;b<_;)if(T[I++]=w[b++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=_},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;_=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=_&255,_/=256;for(this.v(w),w=Array(16),_=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[_++]=this.g[E]>>>T&255;return w};function o(w,_){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=_(w)}function s(w,_){this.h=_;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let b=w[I]|0;T&&b==_||(E[I]=b,T=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?o(w,function(_){return new s([_|0],_<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return N(l(-w));let _=[],E=1;for(let T=0;w>=E;T++)_[T]=w/E|0,E*=4294967296;return new s(_,0)}function f(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return N(f(w.substring(1),_));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(_,8)),T=p;for(let b=0;b<w.length;b+=8){var I=Math.min(8,w.length-b);let v=parseInt(w.substring(b,b+I),_);I<8?(I=l(Math.pow(_,I)),T=T.j(I).add(l(v))):(T=T.j(E),T=T.add(l(v)))}return T}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-N(this).m();let w=0,_=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*_,_*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(A(this))return"-"+N(this).toString(w);let _=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=Ve(E,_).g;E=L(E,I.j(_));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,C(E))return b+T;for(;b.length<6;)b="0"+b;T=b+T}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(let _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function A(w){return w.h==-1}t.l=function(w){return w=L(this,w),A(w)?-1:C(w)?0:1};function N(w){let _=w.g.length,E=[];for(let T=0;T<_;T++)E[T]=~w.g[T];return new s(E,~w.h).add(m)}t.abs=function(){return A(this)?N(this):this},t.add=function(w){let _=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=_;I++){let b=T+(this.i(I)&65535)+(w.i(I)&65535),v=(b>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=v>>>16,b&=65535,v&=65535,E[I]=v<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function L(w,_){return w.add(N(_))}t.j=function(w){if(C(this)||C(w))return p;if(A(this))return A(w)?N(this).j(N(w)):N(N(this).j(w));if(A(w))return N(this.j(N(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let _=this.g.length+w.g.length,E=[];for(var T=0;T<2*_;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let b=this.i(T)>>>16,v=this.i(T)&65535,ht=w.i(I)>>>16,Wn=w.i(I)&65535;E[2*T+2*I]+=v*Wn,X(E,2*T+2*I),E[2*T+2*I+1]+=b*Wn,X(E,2*T+2*I+1),E[2*T+2*I+1]+=v*ht,X(E,2*T+2*I+1),E[2*T+2*I+2]+=b*ht,X(E,2*T+2*I+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new s(E,0)};function X(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function ie(w,_){this.g=w,this.h=_}function Ve(w,_){if(C(_))throw Error("division by zero");if(C(w))return new ie(p,p);if(A(w))return _=Ve(N(w),_),new ie(N(_.g),N(_.h));if(A(_))return _=Ve(w,N(_)),new ie(N(_.g),_.h);if(w.g.length>30){if(A(w)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var E=m,T=_;T.l(w)<=0;)E=Ke(E),T=Ke(T);var I=Ue(E,1),b=Ue(T,1);for(T=Ue(T,2),E=Ue(E,2);!C(T);){var v=b.add(T);v.l(w)<=0&&(I=I.add(E),b=v),T=Ue(T,1),E=Ue(E,1)}return _=L(w,I.j(_)),new ie(I,_)}for(I=p;w.l(_)>=0;){for(E=Math.max(1,Math.floor(w.m()/_.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),b=l(E),v=b.j(_);A(v)||v.l(w)>0;)E-=T,b=l(E),v=b.j(_);C(b)&&(b=m),I=I.add(b),w=L(w,v)}return new ie(I,w)}t.B=function(w){return Ve(this,w).h},t.and=function(w){let _=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},t.or=function(w){let _=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},t.xor=function(w){let _=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<_;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function Ke(w){let _=w.g.length+1,E=[];for(let T=0;T<_;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function Ue(w,_){let E=_>>5;_%=32;let T=w.g.length-E,I=[];for(let b=0;b<T;b++)I[b]=_>0?w.i(b+E)>>>_|w.i(b+E+1)<<32-_:w.i(b+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Km=JS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Vn=JS.Integer=s}).apply(typeof YS<"u"?YS:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jn={};var Qm,Aj,mo,Ym,ga,Yl,Jm,Zm,Xm;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var D=a[g];if(!(D in h))break e;h=h[D]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,h){return a.call.apply(a.bind,arguments)}function l(a,d,h){return l=u,l.apply(null,arguments)}function f(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function h(){}h.prototype=d.prototype,a.Z=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Ob=function(g,D,S){for(var O=Array(arguments.length-2),te=2;te<arguments.length;te++)O[te-2]=arguments[te];return d.prototype[D].apply(g,O)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function C(a,d){for(let g=1;g<arguments.length;g++){let D=arguments[g];var h=typeof D;if(h=h!="object"?h:D?Array.isArray(D)?"array":h:"null",h=="array"||h=="object"&&typeof D.length=="number"){h=a.length||0;let S=D.length||0;a.length=h+S;for(let O=0;O<S;O++)a[h+O]=D[O]}else a.push(D)}}class A{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(a){s.setTimeout(()=>{throw a},0)}function L(){var a=w;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class X{constructor(){this.h=this.g=null}add(d,h){let g=ie.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var ie=new A(()=>new Ve,a=>a.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,Ue=!1,w=new X,_=()=>{let a=Promise.resolve(void 0);Ke=()=>{a.then(E)}};function E(){for(var a;a=L();){try{a.h.call(a.g)}catch(h){N(h)}var d=ie;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Ue=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return a})();function v(a){return/^[\s\xa0]*$/.test(a)}function ht(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(ht,I),ht.prototype.init=function(a,d){let h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ht.Z.h.call(this)},ht.prototype.h=function(){ht.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Wn="closure_listenable_"+(Math.random()*1e6|0),vN=0;function EN(a,d,h,g,D){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=D,this.key=++vN,this.da=this.fa=!1}function ka(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Fa(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function IN(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function hv(a){let d={};for(let h in a)d[h]=a[h];return d}let pv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gv(a,d){let h,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(h in g)a[h]=g[h];for(let S=0;S<pv.length;S++)h=pv[S],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function La(a){this.src=a,this.g={},this.h=0}La.prototype.add=function(a,d,h,g,D){let S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);let O=Gd(a,d,g,D);return O>-1?(d=a[O],h||(d.fa=!1)):(d=new EN(d,this.src,S,!!g,D),d.fa=h,a.push(d)),d};function $d(a,d){let h=d.type;if(h in a.g){var g=a.g[h],D=Array.prototype.indexOf.call(g,d,void 0),S;(S=D>=0)&&Array.prototype.splice.call(g,D,1),S&&(ka(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Gd(a,d,h,g){for(let D=0;D<a.length;++D){let S=a[D];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return D}return-1}var qd="closure_lm_"+(Math.random()*1e6|0),zd={};function mv(a,d,h,g,D){if(g&&g.once)return _v(a,d,h,g,D);if(Array.isArray(d)){for(let S=0;S<d.length;S++)mv(a,d[S],h,g,D);return null}return h=Yd(h),a&&a[Wn]?a.J(d,h,c(g)?!!g.capture:!!g,D):yv(a,d,h,!1,g,D)}function yv(a,d,h,g,D,S){if(!d)throw Error("Invalid event type");let O=c(D)?!!D.capture:!!D,te=Kd(a);if(te||(a[qd]=te=new La(a)),h=te.add(d,h,g,O,S),h.proxy)return h;if(g=wN(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)b||(D=O),D===void 0&&(D=!1),a.addEventListener(d.toString(),g,D);else if(a.attachEvent)a.attachEvent(Ev(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function wN(){function a(h){return d.call(a.src,a.listener,h)}let d=TN;return a}function _v(a,d,h,g,D){if(Array.isArray(d)){for(let S=0;S<d.length;S++)_v(a,d[S],h,g,D);return null}return h=Yd(h),a&&a[Wn]?a.K(d,h,c(g)?!!g.capture:!!g,D):yv(a,d,h,!0,g,D)}function vv(a,d,h,g,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)vv(a,d[S],h,g,D);else g=c(g)?!!g.capture:!!g,h=Yd(h),a&&a[Wn]?(a=a.i,S=String(d).toString(),S in a.g&&(d=a.g[S],h=Gd(d,h,g,D),h>-1&&(ka(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete a.g[S],a.h--)))):a&&(a=Kd(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Gd(d,h,g,D)),(h=a>-1?d[a]:null)&&Wd(h))}function Wd(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Wn])$d(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(Ev(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Kd(d))?($d(h,a),h.h==0&&(h.src=null,d[qd]=null)):ka(a)}}}function Ev(a){return a in zd?zd[a]:zd[a]="on"+a}function TN(a,d){if(a.da)a=!0;else{d=new ht(d,this);let h=a.listener,g=a.ha||a.src;a.fa&&Wd(a),a=h.call(g,d)}return a}function Kd(a){return a=a[qd],a instanceof La?a:null}var Qd="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yd(a){return typeof a=="function"?a:(a[Qd]||(a[Qd]=function(d){return a.handleEvent(d)}),a[Qd])}function Qe(){T.call(this),this.i=new La(this),this.M=this,this.G=null}p(Qe,T),Qe.prototype[Wn]=!0,Qe.prototype.removeEventListener=function(a,d,h,g){vv(this,a,d,h,g)};function nt(a,d){var h,g=a.G;if(g)for(h=[];g;g=g.G)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var D=d;d=new I(g,a),gv(d,D)}D=!0;let S,O;if(h)for(O=h.length-1;O>=0;O--)S=d.g=h[O],D=Va(S,g,!0,d)&&D;if(S=d.g=a,D=Va(S,g,!0,d)&&D,D=Va(S,g,!1,d)&&D,h)for(O=0;O<h.length;O++)S=d.g=h[O],D=Va(S,g,!1,d)&&D}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let h=a.g[d];for(let g=0;g<h.length;g++)ka(h[g]);delete a.g[d],a.h--}}this.G=null},Qe.prototype.J=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},Qe.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Va(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let D=!0;for(let S=0;S<d.length;++S){let O=d[S];if(O&&!O.da&&O.capture==h){let te=O.listener,je=O.ha||O.src;O.fa&&$d(a.i,O),D=te.call(je,g)!==!1&&D}}return D&&!g.defaultPrevented}function DN(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function Iv(a){a.g=DN(()=>{a.g=null,a.i&&(a.i=!1,Iv(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class bN extends T{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Iv(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Go(a){T.call(this),this.h=a,this.g={}}p(Go,T);var wv=[];function Tv(a){Fa(a.g,function(d,h){this.g.hasOwnProperty(h)&&Wd(d)},a),a.g={}}Go.prototype.N=function(){Go.Z.N.call(this),Tv(this)},Go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jd=s.JSON.stringify,CN=s.JSON.parse,SN=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function Dv(){}function bv(){}var qo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zd(){I.call(this,"d")}p(Zd,I);function Xd(){I.call(this,"c")}p(Xd,I);var Lr={},Cv=null;function ja(){return Cv=Cv||new Qe}Lr.Ia="serverreachability";function Sv(a){I.call(this,Lr.Ia,a)}p(Sv,I);function zo(a){let d=ja();nt(d,new Sv(d))}Lr.STAT_EVENT="statevent";function Av(a,d){I.call(this,Lr.STAT_EVENT,a),this.stat=d}p(Av,I);function rt(a){let d=ja();nt(d,new Av(d,a))}Lr.Ja="timingevent";function Nv(a,d){I.call(this,Lr.Ja,a),this.size=d}p(Nv,I);function Wo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Ko(){this.g=!0}Ko.prototype.ua=function(){this.g=!1};function AN(a,d,h,g,D,S){a.info(function(){if(a.g)if(S){var O="",te=S.split("&");for(let Ee=0;Ee<te.length;Ee++){var je=te[Ee].split("=");if(je.length>1){let He=je[0];je=je[1];let Xt=He.split("_");O=Xt.length>=2&&Xt[1]=="type"?O+(He+"="+je+"&"):O+(He+"=redacted&")}}}else O=null;else O=S;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+h+`
`+O})}function NN(a,d,h,g,D,S,O){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+h+`
`+S+" "+O})}function ki(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+MN(a,h)+(g?" "+g:"")})}function RN(a,d){a.info(function(){return"TIMEOUT: "+d})}Ko.prototype.info=function(){};function MN(a,d){if(!a.g)return d;if(!d)return null;try{let S=JSON.parse(d);if(S){for(a=0;a<S.length;a++)if(Array.isArray(S[a])){var h=S[a];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var D=g[0];if(D!="noop"&&D!="stop"&&D!="close")for(let O=1;O<g.length;O++)g[O]=""}}}}return Jd(S)}catch{return d}}var Ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rv={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mv;function ef(){}p(ef,Dv),ef.prototype.g=function(){return new XMLHttpRequest},Mv=new ef;function Qo(a){return encodeURIComponent(String(a))}function xN(a){var d=1;a=a.split(":");let h=[];for(;d>0&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function Kn(a,d,h,g){this.j=a,this.i=d,this.l=h,this.S=g||1,this.V=new Go(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xv}function xv(){this.i=null,this.g="",this.h=!1}var Pv={},tf={};function nf(a,d,h){a.M=1,a.A=Ha(Zt(d)),a.u=h,a.R=!0,Ov(a,null)}function Ov(a,d){a.F=Date.now(),Ua(a),a.B=Zt(a.A);var h=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Wv(h.i,"t",g),a.C=0,h=a.j.L,a.h=new xv,a.g=dE(a.j,h?d:null,!a.u),a.P>0&&(a.O=new bN(l(a.Y,a,a.g),a.P)),d=a.V,h=a.g,g=a.ba;var D="readystatechange";Array.isArray(D)||(D&&(wv[0]=D.toString()),D=wv);for(let S=0;S<D.length;S++){let O=mv(h,D[S],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=a.J?hv(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),zo(),AN(a.i,a.v,a.B,a.l,a.S,a.u)}Kn.prototype.ba=function(a){a=a.target;let d=this.O;d&&Jn(a)==3?d.j():this.Y(a)},Kn.prototype.Y=function(a){try{if(a==this.g)e:{let te=Jn(this.g),je=this.g.ya(),Ee=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||eE(this.g)))){this.K||te!=4||je==7||(je==8||Ee<=0?zo(3):zo(2)),rf(this);var d=this.g.ca();this.X=d;var h=PN(this);if(this.o=d==200,NN(this.i,this.v,this.B,this.l,this.S,te,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,D=this.g;if((g=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(g)){var S=g;break t}}S=null}if(a=S)ki(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,of(this,a);else{this.o=!1,this.m=3,rt(12),Vr(this),Yo(this);break e}}if(this.R){a=!0;let He;for(;!this.K&&this.C<h.length;)if(He=ON(this,h),He==tf){te==4&&(this.m=4,rt(14),a=!1),ki(this.i,this.l,null,"[Incomplete Response]");break}else if(He==Pv){this.m=4,rt(15),ki(this.i,this.l,h,"[Invalid Chunk]"),a=!1;break}else ki(this.i,this.l,He,null),of(this,He);if(kv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||h.length!=0||this.h.h||(this.m=1,rt(16),a=!1),this.o=this.o&&a,!a)ki(this.i,this.l,h,"[Invalid Chunked Response]"),Vr(this),Yo(this);else if(h.length>0&&!this.W){this.W=!0;var O=this.j;O.g==this&&O.aa&&!O.P&&(O.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),ff(O),O.P=!0,rt(11))}}else ki(this.i,this.l,h,null),of(this,h);te==4&&Vr(this),this.o&&!this.K&&(te==4?aE(this.j,this):(this.o=!1,Ua(this)))}else KN(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),Vr(this),Yo(this)}}}catch{}finally{}};function PN(a){if(!kv(a))return a.g.la();let d=eE(a.g);if(d==="")return"";let h="",g=d.length,D=Jn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Vr(a),Yo(a),"";a.h.i=new s.TextDecoder}for(let S=0;S<g;S++)a.h.h=!0,h+=a.h.i.decode(d[S],{stream:!(D&&S==g-1)});return d.length=0,a.h.g+=h,a.C=0,a.h.g}function kv(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function ON(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?tf:(h=Number(d.substring(h,g)),isNaN(h)?Pv:(g+=1,g+h>d.length?tf:(d=d.slice(g,g+h),a.C=g+h,d)))}Kn.prototype.cancel=function(){this.K=!0,Vr(this)};function Ua(a){a.T=Date.now()+a.H,Fv(a,a.H)}function Fv(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Wo(l(a.aa,a),d)}function rf(a){a.D&&(s.clearTimeout(a.D),a.D=null)}Kn.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(RN(this.i,this.B),this.M!=2&&(zo(),rt(17)),Vr(this),this.m=2,Yo(this)):Fv(this,this.T-a)};function Yo(a){a.j.I==0||a.K||aE(a.j,a)}function Vr(a){rf(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,Tv(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function of(a,d){try{var h=a.j;if(h.I!=0&&(h.g==a||sf(h.h,a))){if(!a.L&&sf(h.h,a)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<a.F)Ka(h),za(h);else break e;df(h),rt(18)}}else h.xa=D[1],0<h.xa-h.K&&D[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=Wo(l(h.Va,h),6e3));jv(h.h)<=1&&h.ta&&(h.ta=void 0)}else Br(h,11)}else if((a.L||h.g==a)&&Ka(h),!v(d))for(D=h.Ba.g.parse(d),d=0;d<D.length;d++){let Ee=D[d],He=Ee[0];if(!(He<=h.K))if(h.K=He,Ee=Ee[1],h.I==2)if(Ee[0]=="c"){h.M=Ee[1],h.ba=Ee[2];let Xt=Ee[3];Xt!=null&&(h.ka=Xt,h.j.info("VER="+h.ka));let Ur=Ee[4];Ur!=null&&(h.za=Ur,h.j.info("SVER="+h.za));let Zn=Ee[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(g=1.5*Zn,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let Xn=a.g;if(Xn){let Ya=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ya){var S=g.h;S.g||Ya.indexOf("spdy")==-1&&Ya.indexOf("quic")==-1&&Ya.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(af(S,S.h),S.h=null))}if(g.G){let hf=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;hf&&(g.wa=hf,De(g.J,g.G,hf))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-a.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var O=a;if(g.na=lE(g,g.L?g.ba:null,g.W),O.L){Bv(g.h,O);var te=O,je=g.O;je&&(te.H=je),te.D&&(rf(te),Ua(te)),g.g=O}else oE(g);h.i.length>0&&Wa(h)}else Ee[0]!="stop"&&Ee[0]!="close"||Br(h,7);else h.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Br(h,7):lf(h):Ee[0]!="noop"&&h.l&&h.l.qa(Ee),h.A=0)}}zo(4)}catch{}}var kN=class{constructor(a,d){this.g=a,this.map=d}};function Lv(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vv(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jv(a){return a.h?1:a.g?a.g.size:0}function sf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function af(a,d){a.g?a.g.add(d):a.h=d}function Bv(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Lv.prototype.cancel=function(){if(this.i=Uv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Uv(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.G);return d}return y(a.i)}var Hv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FN(a,d){if(a){a=a.split("&");for(let h=0;h<a.length;h++){let g=a[h].indexOf("="),D,S=null;g>=0?(D=a[h].substring(0,g),S=a[h].substring(g+1)):D=a[h],d(D,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Qn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Qn?(this.l=a.l,Jo(this,a.j),this.o=a.o,this.g=a.g,Zo(this,a.u),this.h=a.h,cf(this,Kv(a.i)),this.m=a.m):a&&(d=String(a).match(Hv))?(this.l=!1,Jo(this,d[1]||"",!0),this.o=Xo(d[2]||""),this.g=Xo(d[3]||"",!0),Zo(this,d[4]),this.h=Xo(d[5]||"",!0),cf(this,d[6]||"",!0),this.m=Xo(d[7]||"")):(this.l=!1,this.i=new ts(null,this.l))}Qn.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(es(d,$v,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(es(d,$v,!0),"@"),a.push(Qo(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&a.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(es(h,h.charAt(0)=="/"?jN:VN,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",es(h,UN)),a.join("")},Qn.prototype.resolve=function(a){let d=Zt(this),h=!!a.j;h?Jo(d,a.j):h=!!a.o,h?d.o=a.o:h=!!a.g,h?d.g=a.g:h=a.u!=null;var g=a.h;if(h)Zo(d,a.u);else if(h=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var D=d.h.lastIndexOf("/");D!=-1&&(g=d.h.slice(0,D+1)+g)}if(D=g,D==".."||D==".")g="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){g=D.lastIndexOf("/",0)==0,D=D.split("/");let S=[];for(let O=0;O<D.length;){let te=D[O++];te=="."?g&&O==D.length&&S.push(""):te==".."?((S.length>1||S.length==1&&S[0]!="")&&S.pop(),g&&O==D.length&&S.push("")):(S.push(te),g=!0)}g=S.join("/")}else g=D}return h?d.h=g:h=a.i.toString()!=="",h?cf(d,Kv(a.i)):h=!!a.m,h&&(d.m=a.m),d};function Zt(a){return new Qn(a)}function Jo(a,d,h){a.j=h?Xo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Zo(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function cf(a,d,h){d instanceof ts?(a.i=d,HN(a.i,a.l)):(h||(d=es(d,BN)),a.i=new ts(d,a.l))}function De(a,d,h){a.i.set(d,h)}function Ha(a){return De(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Xo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function es(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,LN),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function LN(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var $v=/[#\/\?@]/g,VN=/[#\?:]/g,jN=/[#\?]/g,BN=/[#\?@]/g,UN=/#/g;function ts(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function jr(a){a.g||(a.g=new Map,a.h=0,a.i&&FN(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=ts.prototype,t.add=function(a,d){jr(this),this.i=null,a=Fi(this,a);let h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function Gv(a,d){jr(a),d=Fi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function qv(a,d){return jr(a),d=Fi(a,d),a.g.has(d)}t.forEach=function(a,d){jr(this),this.g.forEach(function(h,g){h.forEach(function(D){a.call(d,D,g,this)},this)},this)};function zv(a,d){jr(a);let h=[];if(typeof d=="string")qv(a,d)&&(h=h.concat(a.g.get(Fi(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)h=h.concat(a[d]);return h}t.set=function(a,d){return jr(this),this.i=null,a=Fi(this,a),qv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=zv(this,a),a.length>0?String(a[0]):d):d};function Wv(a,d,h){Gv(a,d),h.length>0&&(a.i=null,a.g.set(Fi(a,d),y(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let D=Qo(h);h=zv(this,h);for(let S=0;S<h.length;S++){let O=D;h[S]!==""&&(O+="="+Qo(h[S])),a.push(O)}}return this.i=a.join("&")};function Kv(a){let d=new ts;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function Fi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function HN(a,d){d&&!a.j&&(jr(a),a.i=null,a.g.forEach(function(h,g){let D=g.toLowerCase();g!=D&&(Gv(this,g),Wv(this,D,h))},a)),a.j=d}function $N(a,d){let h=new Ko;if(s.Image){let g=new Image;g.onload=f(Yn,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(Yn,h,"TestLoadImage: error",!1,d,g),g.onabort=f(Yn,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(Yn,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function GN(a,d){let h=new Ko,g=new AbortController,D=setTimeout(()=>{g.abort(),Yn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(S=>{clearTimeout(D),S.ok?Yn(h,"TestPingServer: ok",!0,d):Yn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Yn(h,"TestPingServer: error",!1,d)})}function Yn(a,d,h,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(h)}catch{}}function qN(){this.g=new SN}function $a(a){this.i=a.Sb||null,this.h=a.ab||!1}p($a,Dv),$a.prototype.g=function(){return new Ga(this.i,this.h)};function Ga(a,d){Qe.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ga,Qe),t=Ga.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,rs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qv(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qv(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ns(this):rs(this),this.readyState==3&&Qv(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ns(this))},t.Na=function(a){this.g&&(this.response=a,ns(this))},t.ga=function(){this.g&&ns(this)};function ns(a){a.readyState=4,a.l=null,a.j=null,a.B=null,rs(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function rs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Yv(a){let d="";return Fa(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function uf(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=Yv(h),typeof a=="string"?h!=null&&Qo(h):De(a,d,h))}function Ae(a){Qe.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ae,Qe);var zN=/^https?$/i,WN=["POST","PUT"];t=Ae.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mv.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(S){Jv(this,S);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)h.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),D=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(WN,d,void 0)>=0)||g||D||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of h)this.g.setRequestHeader(S,O);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(S){Jv(this,S)}};function Jv(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,Zv(a),qa(a)}function Zv(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,nt(this,"complete"),nt(this,"abort"),qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qa(this,!0)),Ae.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Xv(this):this.Xa())},t.Xa=function(){Xv(this)};function Xv(a){if(a.h&&typeof o<"u"){if(a.v&&Jn(a)==4)setTimeout(a.Ca.bind(a),0);else if(nt(a,"readystatechange"),Jn(a)==4){a.h=!1;try{let S=a.ca();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=S===0){let O=String(a.D).match(Hv)[1]||null;!O&&s.self&&s.self.location&&(O=s.self.location.protocol.slice(0,-1)),g=!zN.test(O?O.toLowerCase():"")}h=g}if(h)nt(a,"complete"),nt(a,"success");else{a.o=6;try{var D=Jn(a)>2?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.ca()+"]",Zv(a)}}finally{qa(a)}}}}function qa(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let h=a.g;a.g=null,d||nt(a,"ready");try{h.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Jn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Jn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),CN(d)}};function eE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function KN(a){let d={};a=(a.g&&Jn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(v(a[g]))continue;var h=xN(a[g]);let D=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[D]||[];d[D]=S,S.push(h)}IN(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function is(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function tE(a){this.za=0,this.i=[],this.j=new Ko,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=is("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=is("baseRetryDelayMs",5e3,a),this.Za=is("retryDelaySeedMs",1e4,a),this.Ta=is("forwardChannelMaxRetries",2,a),this.va=is("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Lv(a&&a.concurrentRequestLimit),this.Ba=new qN,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=tE.prototype,t.ka=8,t.I=1,t.connect=function(a,d,h,g){rt(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=lE(this,null,this.W),Wa(this)};function lf(a){if(nE(a),a.I==3){var d=a.V++,h=Zt(a.J);if(De(h,"SID",a.M),De(h,"RID",d),De(h,"TYPE","terminate"),os(a,h),d=new Kn(a,a.j,d),d.M=2,d.A=Ha(Zt(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=dE(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ua(d)}uE(a)}function za(a){a.g&&(ff(a),a.g.cancel(),a.g=null)}function nE(a){za(a),a.v&&(s.clearTimeout(a.v),a.v=null),Ka(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Wa(a){if(!Vv(a.h)&&!a.m){a.m=!0;var d=a.Ea;Ke||_(),Ue||(Ke(),Ue=!0),w.add(d,a),a.D=0}}function QN(a,d){return jv(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Wo(l(a.Ea,a,d),cE(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let D=new Kn(this,this.j,a),S=this.o;if(this.U&&(S?(S=hv(S),gv(S,this.U)):S=this.U),this.u!==null||this.R||(D.J=S,S=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=iE(this,D,d),h=Zt(this.J),De(h,"RID",a),De(h,"CVER",22),this.G&&De(h,"X-HTTP-Session-Id",this.G),os(this,h),S&&(this.R?d="headers="+Qo(Yv(S))+"&"+d:this.u&&uf(h,this.u,S)),af(this.h,D),this.Ra&&De(h,"TYPE","init"),this.S?(De(h,"$req",d),De(h,"SID","null"),D.U=!0,nf(D,h,null)):nf(D,h,d),this.I=2}}else this.I==3&&(a?rE(this,a):this.i.length==0||Vv(this.h)||rE(this))};function rE(a,d){var h;d?h=d.l:h=a.V++;let g=Zt(a.J);De(g,"SID",a.M),De(g,"RID",h),De(g,"AID",a.K),os(a,g),a.u&&a.o&&uf(g,a.u,a.o),h=new Kn(a,a.j,h,a.D+1),a.u===null&&(h.J=a.o),d&&(a.i=d.G.concat(a.i)),d=iE(a,h,1e3),h.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),af(a.h,h),nf(h,g,d)}function os(a,d){a.H&&Fa(a.H,function(h,g){De(d,g,h)}),a.l&&Fa({},function(h,g){De(d,g,h)})}function iE(a,d,h){h=Math.min(a.i.length,h);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var D=a.i;let te=-1;for(;;){let je=["count="+h];te==-1?h>0?(te=D[0].g,je.push("ofs="+te)):te=0:je.push("ofs="+te);let Ee=!0;for(let He=0;He<h;He++){var S=D[He].g;let Xt=D[He].map;if(S-=te,S<0)te=Math.max(0,D[He].g-100),Ee=!1;else try{S="req"+S+"_"||"";try{var O=Xt instanceof Map?Xt:Object.entries(Xt);for(let[Ur,Zn]of O){let Xn=Zn;c(Zn)&&(Xn=Jd(Zn)),je.push(S+Ur+"="+encodeURIComponent(Xn))}}catch(Ur){throw je.push(S+"type="+encodeURIComponent("_badmap")),Ur}}catch{g&&g(Xt)}}if(Ee){O=je.join("&");break e}}O=void 0}return a=a.i.splice(0,h),d.G=a,O}function oE(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;Ke||_(),Ue||(Ke(),Ue=!0),w.add(d,a),a.A=0}}function df(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Wo(l(a.Da,a),cE(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,sE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Wo(l(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),za(this),sE(this))};function ff(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function sE(a){a.g=new Kn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=Zt(a.na);De(d,"RID","rpc"),De(d,"SID",a.M),De(d,"AID",a.K),De(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&De(d,"TO",a.ia),De(d,"TYPE","xmlhttp"),os(a,d),a.u&&a.o&&uf(d,a.u,a.o),a.O&&(a.g.H=a.O);var h=a.g;a=a.ba,h.M=1,h.A=Ha(Zt(d)),h.u=null,h.R=!0,Ov(h,a)}t.Va=function(){this.C!=null&&(this.C=null,za(this),df(this),rt(19))};function Ka(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function aE(a,d){var h=null;if(a.g==d){Ka(a),ff(a),a.g=null;var g=2}else if(sf(a.h,d))h=d.G,Bv(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var D=a.D;g=ja(),nt(g,new Nv(g,h)),Wa(a)}else oE(a);else if(D=d.m,D==3||D==0&&d.X>0||!(g==1&&QN(a,d)||g==2&&df(a)))switch(h&&h.length>0&&(d=a.h,d.i=d.i.concat(h)),D){case 1:Br(a,5);break;case 4:Br(a,10);break;case 3:Br(a,6);break;default:Br(a,2)}}}function cE(a,d){let h=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(h*=2),h*d}function Br(a,d){if(a.j.info("Error code "+d),d==2){var h=l(a.bb,a),g=a.Ua;let D=!g;g=new Qn(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Jo(g,"https"),Ha(g),D?$N(g.toString(),h):GN(g.toString(),h)}else rt(2);a.I=0,a.l&&a.l.pa(d),uE(a),nE(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function uE(a){if(a.I=0,a.ja=[],a.l){let d=Uv(a.h);(d.length!=0||a.i.length!=0)&&(C(a.ja,d),C(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function lE(a,d,h){var g=h instanceof Qn?Zt(h):new Qn(h);if(g.g!="")d&&(g.g=d+"."+g.g),Zo(g,g.u);else{var D=s.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;let S=new Qn(null);g&&Jo(S,g),d&&(S.g=d),D&&Zo(S,D),h&&(S.h=h),g=S}return h=a.G,d=a.wa,h&&d&&De(g,h,d),De(g,"VER",a.ka),os(a,g),g}function dE(a,d,h){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Ae(new $a({ab:h})):new Ae(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fE(){}t=fE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qa(){}Qa.prototype.g=function(a,d){return new mt(a,d)};function mt(a,d){Qe.call(this),this.g=new tE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!v(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Li(this)}p(mt,Qe),mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){lf(this.g)},mt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.v&&(h={},h.__data__=Jd(a),a=h);d.i.push(new kN(d.Ya++,a)),d.I==3&&Wa(d)},mt.prototype.N=function(){this.g.l=null,delete this.j,lf(this.g),delete this.g,mt.Z.N.call(this)};function hE(a){Zd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(hE,Zd);function pE(){Xd.call(this),this.status=1}p(pE,Xd);function Li(a){this.g=a}p(Li,fE),Li.prototype.ra=function(){nt(this.g,"a")},Li.prototype.qa=function(a){nt(this.g,new hE(a))},Li.prototype.pa=function(a){nt(this.g,new pE)},Li.prototype.oa=function(){nt(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,Xm=jn.createWebChannelTransport=function(){return new Qa},Zm=jn.getStatEventTarget=function(){return ja()},Jm=jn.Event=Lr,Yl=jn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ba.NO_ERROR=0,Ba.TIMEOUT=8,Ba.HTTP_ERROR=6,ga=jn.ErrorCode=Ba,Rv.COMPLETE="complete",Ym=jn.EventType=Rv,bv.EventType=qo,qo.OPEN="a",qo.CLOSE="b",qo.ERROR="c",qo.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,mo=jn.WebChannel=bv,Aj=jn.FetchXmlHttpFactory=$a,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,Qm=jn.XhrIo=Ae}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});var ZS="@firebase/firestore",XS="4.9.2";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var Bo="12.3.0";var Ci=new Er("@firebase/firestore");function yo(){return Ci.logLevel}function F(t,...e){if(Ci.logLevel<=re.DEBUG){let n=e.map(B_);Ci.debug(`Firestore (${Bo}): ${t}`,...n)}}function Un(t,...e){if(Ci.logLevel<=re.ERROR){let n=e.map(B_);Ci.error(`Firestore (${Bo}): ${t}`,...n)}}function Co(t,...e){if(Ci.logLevel<=re.WARN){let n=e.map(B_);Ci.warn(`Firestore (${Bo}): ${t}`,...n)}}function B_(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,U0(t,r,n)}function U0(t,e,n){let r=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Un(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||U0(e,i,r)}function Y(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends bt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var rd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},sy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ay=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Bn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Bn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new rd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ge(e)}},cy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},uy=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cy(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},id=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ly=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ct(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new id(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new id(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Nj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ia=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Nj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function dy(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return ey(i)===ey(o)?oe(i,o):ey(i)?1:-1}return oe(t.length,e.length)}var Rj=55296,Mj=57343;function ey(t){let e=t.charCodeAt(0);return e>=Rj&&e<=Mj}function So(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var e0="__name__",od=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return oe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):dy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vn.fromString(e.substring(4,e.length-2))}},Se=class t extends od{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},xj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,St=class t extends od{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return xj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e0}static keyField(){return new t([e0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new B(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new B(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new B(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};function H0(t,e,n){if(!n)throw new B(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pj(t,e,n,r){if(e===!0&&r===!0)throw new B(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t0(t){if(!G.isDocumentKey(t))throw new B(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n0(t){if(G.isDocumentKey(t))throw new B(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function U_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function wo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=U_(t);throw new B(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Fe(t,e){let n={typeString:t};return e&&(n.value=e),n}function xa(t,e){if(!$0(t))throw new B(R.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new B(R.INVALID_ARGUMENT,n);return!0}var r0=-62135596800,i0=1e6,Le=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r0)throw new B(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i0}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xa(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:Fe("string",Le._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};var Z=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Le(0,0))}static max(){return new t(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wa=-1,fy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};fy.UNKNOWN_ID=-1;function Oj(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Si(i,G.empty(),e)}function kj(t){return new Si(t.readTime,t.key,wa)}var Si=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Z.min(),G.empty(),wa)}static max(){return new t(Z.max(),G.empty(),wa)}};function Fj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var Lj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Uo(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==Lj)throw t;F("LocalStore","Unexpectedly lost primary lease")}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function Vj(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(t){return t.name==="IndexedDbTransactionError"}var H_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),$_=-1;function kd(t){return t==null}function Ta(t){return t===0&&1/t==-1/0}function jj(t){return typeof t=="number"&&Number.isInteger(t)&&!Ta(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var G0="";function Bj(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o0(e)),e=Uj(t.get(n),e);return o0(e)}function Uj(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case G0:n+="";break;default:n+=o}}return n}function o0(t){return t+G0+""}var Hj="remoteDocuments",q0="owner";var z0="mutationQueues";var W0="mutations";var K0="documentMutations",$j="remoteDocumentsV14";var Q0="remoteDocumentGlobal";var Y0="targets";var J0="targetDocuments";var Z0="targetGlobal",X0="collectionParents";var eA="clientMetadata";var tA="bundles";var nA="namedQueries";var Gj="indexConfiguration";var qj="indexState";var zj="indexEntries";var rA="documentOverlays";var Wj="globals";var Kj=[z0,W0,K0,Hj,Y0,q0,Z0,J0,eA,Q0,X0,tA,nA],qY=[...Kj,rA],Qj=[z0,W0,K0,$j,Y0,q0,Z0,J0,eA,Q0,X0,tA,nA,rA],Yj=Qj,Jj=[...Yj,Gj,qj,zj];var zY=[...Jj,Wj];function s0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Io(this.root,e,this.comparator,!1)}getReverseIterator(){return new Io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Io(this.root,e,this.comparator,!0)}},Io=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sd(this.data.getIterator())}getIteratorFrom(e){return new sd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},sd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mn=class t{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new t([])}unionWith(e){let n=new qe(St.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ad=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var tt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ad("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};tt.EMPTY_BYTE_STRING=new tt("");var Zj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(t){if(ge(!!t,39018),typeof t=="string"){let e=0,n=Zj.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $n(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}var oA="server_timestamp",sA="__type__",aA="__previous_value__",cA="__local_write_time__";function G_(t){return(t?.mapValue?.fields||{})[sA]?.stringValue===oA}function Fd(t){let e=t.mapValue.fields[aA];return G_(e)?Fd(e):e}function Da(t){let e=Hn(t.mapValue.fields[cA].timestampValue);return new Le(e.seconds,e.nanos)}var py=class{constructor(e,n,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},cd="(default)",ud=class t{constructor(e,n){this.projectId=e,this.database=n||cd}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===cd}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var q_="__type__",uA="__max__",Jl={mapValue:{fields:{__type__:{stringValue:uA}}}},z_="__vector__",Ao="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?G_(t)?4:dA(t)?9007199254740991:lA(t)?10:11:q(28295,{value:t})}function En(t,e){if(t===e)return!0;let n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Da(t).isEqual(Da(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Hn(i.timestampValue),c=Hn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return $n(i.bytesValue).isEqual($n(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),c=Ce(o.doubleValue);return s===c?Ta(s)===Ta(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return So(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(s0(s)!==s0(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!En(s[u],c[u])))return!1;return!0})(t,e);default:return q(52216,{left:t})}}function ba(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function No(t,e){if(t===e)return 0;let n=Or(t),r=Or(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return a0(t.timestampValue,e.timestampValue);case 4:return a0(Da(t),Da(e));case 5:return dy(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=$n(o),u=$n(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=oe(c[l],u[l]);if(f!==0)return f}return oe(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=oe(Ce(o.latitude),Ce(s.latitude));return c!==0?c:oe(Ce(o.longitude),Ce(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return c0(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[Ao]?.arrayValue,f=u[Ao]?.arrayValue,p=oe(l?.values?.length||0,f?.values?.length||0);return p!==0?p:c0(l,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Jl.mapValue&&s===Jl.mapValue)return 0;if(o===Jl.mapValue)return 1;if(s===Jl.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=dy(u[p],f[p]);if(m!==0)return m;let y=No(c[u[p]],l[f[p]]);if(y!==0)return y}return oe(u.length,f.length)})(t.mapValue,e.mapValue);default:throw q(23264,{he:n})}}function a0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=Hn(t),r=Hn(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function c0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=No(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function Ro(t){return gy(t)}function gy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Hn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $n(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return G.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=gy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${gy(n.fields[s])}`;return i+"}"})(t.mapValue):q(61005,{value:t})}function ed(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Fd(t);return e?16+ed(e):16;case 5:return 2*t.stringValue.length;case 6:return $n(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+ed(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Pi(r.fields,(o,s)=>{i+=o.length+ed(s)}),i})(t.mapValue);default:throw q(13486,{value:t})}}function my(t){return!!t&&"integerValue"in t}function W_(t){return!!t&&"arrayValue"in t}function u0(t){return!!t&&"nullValue"in t}function l0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function td(t){return!!t&&"mapValue"in t}function lA(t){return(t?.mapValue?.fields||{})[q_]?.stringValue===z_}function ya(t){if(t.geoPointValue)return{geoPointValue:V({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:V({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ya(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ya(t.arrayValue.values[n]);return e}return V({},t)}function dA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uA}var KY={mapValue:{fields:{[q_]:{stringValue:z_},[Ao]:{arrayValue:{}}}}};var Yt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!td(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ya(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=ya(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());td(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(ya(this.value))}};function fA(t){let e=[];return Pi(t.fields,(n,r)=>{let i=new St([n]);if(td(r)){let o=fA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new mn(e)}var Jt=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,Z.min(),Z.min(),Z.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Z.min(),Z.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Z.min(),Z.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mo=class{constructor(e,n){this.position=e,this.inclusive=n}};function d0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=No(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function f0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}var xo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Xj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ld=class{},Be=class t extends ld{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _y(e,n,r):n==="array-contains"?new Iy(e,r):n==="in"?new wy(e,r):n==="not-in"?new Ty(e,r):n==="array-contains-any"?new Dy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vy(e,r):new Ey(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(No(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},In=class t extends ld{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return hA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function hA(t){return t.op==="and"}function pA(t){return eB(t)&&hA(t)}function eB(t){for(let e of t.filters)if(e instanceof In)return!1;return!0}function yy(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+Ro(t.value);if(pA(t))return t.filters.map(e=>yy(e)).join(",");{let e=t.filters.map(n=>yy(n)).join(",");return`${t.op}(${e})`}}function gA(t,e){return t instanceof Be?(function(r,i){return i instanceof Be&&r.op===i.op&&r.field.isEqual(i.field)&&En(r.value,i.value)})(t,e):t instanceof In?(function(r,i){return i instanceof In&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&gA(s,i.filters[c]),!0):!1})(t,e):void q(19439)}function mA(t){return t instanceof Be?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ro(n.value)}`})(t):t instanceof In?(function(n){return n.op.toString()+" {"+n.getFilters().map(mA).join(" ,")+"}"})(t):"Filter"}var _y=class extends Be{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},vy=class extends Be{constructor(e,n){super(e,"in",n),this.keys=yA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Ey=class extends Be{constructor(e,n){super(e,"not-in",n),this.keys=yA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function yA(t,e){return(e.arrayValue?.values||[]).map(n=>G.fromName(n.referenceValue))}var Iy=class extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return W_(n)&&ba(n.arrayValue,this.value)}},wy=class extends Be{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ba(this.value.arrayValue,n)}},Ty=class extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ba(this.value.arrayValue,n)}},Dy=class extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!W_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ba(this.value.arrayValue,r))}};var by=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function h0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new by(t,e,n,r,i,o,s)}function K_(t){let e=Y(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),kd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ro(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ro(r)).join(",")),e.Te=n}return e.Te}function Q_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Xj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!f0(t.startAt,e.startAt)&&f0(t.endAt,e.endAt)}function Cy(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Po=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function tB(t,e,n,r,i,o,s,c){return new Po(t,e,n,r,i,o,s,c)}function Y_(t){return new Po(t)}function p0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nB(t){return t.collectionGroup!==null}function _a(t){let e=Y(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new qe(St.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new xo(o,r))}),n.has(St.keyField().canonicalString())||e.Ie.push(new xo(St.keyField(),r))}return e.Ie}function _n(t){let e=Y(t);return e.Ee||(e.Ee=rB(e,_a(t))),e.Ee}function rB(t,e){if(t.limitType==="F")return h0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new xo(i.field,o)});let n=t.endAt?new Mo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mo(t.startAt.position,t.startAt.inclusive):null;return h0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sy(t,e,n){return new Po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ld(t,e){return Q_(_n(t),_n(e))&&t.limitType===e.limitType}function _A(t){return`${K_(_n(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mA(i)).join(", ")}]`),kd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ro(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ro(i)).join(",")),`Target(${r})`})(_n(t))}; limitType=${t.limitType})`}function Vd(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of _a(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=d0(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,_a(r),i)||r.endAt&&!(function(s,c,u){let l=d0(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,_a(r),i))})(t,e)}function iB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vA(t){return(e,n)=>{let r=!1;for(let i of _a(t)){let o=oB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function oB(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?No(u,l):q(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var Gn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return iA(this.inner)}size(){return this.innerSize}};var sB=new Ne(G.comparator);function qn(){return sB}var EA=new Ne(G.comparator);function ma(...t){let e=EA;for(let n of t)e=e.insert(n.key,n);return e}function IA(t){let e=EA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wi(){return va()}function wA(){return va()}function va(){return new Gn(t=>t.toString(),(t,e)=>t.isEqual(e))}var aB=new Ne(G.comparator),cB=new qe(G.comparator);function se(...t){let e=cB;for(let n of t)e=e.add(n);return e}var uB=new qe(oe);function lB(){return uB}function J_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ta(e)?"-0":e}}function TA(t){return{integerValue:""+t}}function dB(t,e){return jj(e)?TA(e):J_(t,e)}var Oo=class{constructor(){this._=void 0}};function fB(t,e,n){return t instanceof ko?(function(i,o){let s={fields:{[sA]:{stringValue:oA},[cA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&G_(o)&&(o=Fd(o)),o&&(s.fields[aA]=o),{mapValue:s}})(n,e):t instanceof Ai?bA(t,e):t instanceof Ni?CA(t,e):(function(i,o){let s=DA(i,o),c=g0(s)+g0(i.Ae);return my(s)&&my(i.Ae)?TA(c):J_(i.serializer,c)})(t,e)}function hB(t,e,n){return t instanceof Ai?bA(t,e):t instanceof Ni?CA(t,e):n}function DA(t,e){return t instanceof Fo?(function(r){return my(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ko=class extends Oo{},Ai=class extends Oo{constructor(e){super(),this.elements=e}};function bA(t,e){let n=SA(e);for(let r of t.elements)n.some(i=>En(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ni=class extends Oo{constructor(e){super(),this.elements=e}};function CA(t,e){let n=SA(e);for(let r of t.elements)n=n.filter(i=>!En(i,r));return{arrayValue:{values:n}}}var Fo=class extends Oo{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function g0(t){return Ce(t.integerValue||t.doubleValue)}function SA(t){return W_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pB(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Ai&&i instanceof Ai||r instanceof Ni&&i instanceof Ni?So(r.elements,i.elements,En):r instanceof Fo&&i instanceof Fo?En(r.Ae,i.Ae):r instanceof ko&&i instanceof ko})(t.transform,e.transform)}var Ay=class{constructor(e,n){this.version=e,this.transformResults=n}},Nr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Lo=class{};function AA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ca(t.key,Nr.none()):new Ri(t.key,t.data,Nr.none());{let n=t.data,r=Yt.empty(),i=new qe(St.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new zn(t.key,r,new mn(i.toArray()),Nr.none())}}function gB(t,e,n){t instanceof Ri?(function(i,o,s){let c=i.value.clone(),u=y0(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof zn?(function(i,o,s){if(!nd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=y0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(NA(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Ea(t,e,n,r){return t instanceof Ri?(function(o,s,c,u){if(!nd(o.precondition,s))return c;let l=o.value.clone(),f=_0(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof zn?(function(o,s,c,u){if(!nd(o.precondition,s))return c;let l=_0(o.fieldTransforms,u,s),f=s.data;return f.setAll(NA(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return nd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function mB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=DA(r.transform,i||null);o!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,o))}return n||null}function m0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&So(r,i,(o,s)=>pB(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ri=class extends Lo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zn=class extends Lo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function NA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function y0(t,e,n){let r=new Map;ge(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,hB(s,c,n[i]))}return r}function _0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,fB(o,s,e))}return r}var Ca=class extends Lo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ny=class extends Lo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ry=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ea(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ea(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=wA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=AA(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(n,r)=>m0(n,r))&&So(this.baseMutations,e.baseMutations,(n,r)=>m0(n,r))}},My=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return aB})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var xy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Py=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Oe,ue;function yB(t){switch(t){case R.OK:return q(64938);case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function RA(t){if(t===void 0)return Un("GRPC error has no .code"),R.UNKNOWN;switch(t){case Oe.OK:return R.OK;case Oe.CANCELLED:return R.CANCELLED;case Oe.UNKNOWN:return R.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return R.INTERNAL;case Oe.UNAVAILABLE:return R.UNAVAILABLE;case Oe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Oe.NOT_FOUND:return R.NOT_FOUND;case Oe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Oe.ABORTED:return R.ABORTED;case Oe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Oe.DATA_LOSS:return R.DATA_LOSS;default:return q(39323,{code:t})}}(ue=Oe||(Oe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";var _B=null;function vB(){return new TextEncoder}var EB=new Vn([4294967295,4294967295],0);function v0(t){let e=vB().encode(t),n=new Km;return n.update(e),new Uint8Array(n.digest())}function E0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vn([n,r],0),new Vn([i,o],0)]}var Oy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ti(`Invalid padding: ${n}`);if(r<0)throw new Ti(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ti(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ti(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Vn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Vn.fromNumber(r)));return i.compare(EB)===1&&(i=new Vn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=v0(e),[r,i]=E0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=v0(e),[r,i]=E0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ti=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var dd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(Z.min(),i,new Ne(oe),qn(),se())}},Sa=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,se(),se(),se())}};var To=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},fd=class{constructor(e,n){this.targetId=e,this.Ce=n}},hd=class{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},pd=class{constructor(){this.ve=0,this.Fe=I0(),this.Me=tt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Sa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=I0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},ky=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=qn(),this.Je=Zl(),this.He=Zl(),this.Ye=new Ne(oe)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Cy(o))if(r===0){let s=new G(o.path);this.et(n,s,Jt.newNoDocument(s,Z.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}_B?.lt((function(f,p,m,y,C){let A={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(A.bloomFilter={applied:C===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:L=>y?.mightContain(L)??!1}),A})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=$n(r).toUint8Array()}catch(u){if(u instanceof ad)return Co("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Oy(s,i,o)}catch(u){return Co(u instanceof Ti?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Cy(c.target)){let u=new G(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,Jt.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=se();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new dd(e,n,this.Ye,this.je,r);return this.je=qn(),this.Je=Zl(),this.He=Zl(),this.Ye=new Ne(oe),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new pd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qe(oe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qe(oe),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new pd),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function Zl(){return new Ne(G.comparator)}function I0(){return new Ne(G.comparator)}var IB={asc:"ASCENDING",desc:"DESCENDING"},wB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TB={and:"AND",or:"OR"},Fy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ly(t,e){return t.useProto3Json||kd(e)?e:{value:e}}function gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DB(t,e){return gd(t,e.toTimestamp())}function vn(t){return ge(!!t,49232),Z.fromTimestamp((function(n){let r=Hn(n);return new Le(r.seconds,r.nanos)})(t))}function Z_(t,e){return Vy(t,e).canonicalString()}function Vy(t,e){let n=(function(i){return new Se(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function xA(t){let e=Se.fromString(t);return ge(LA(e),10190,{key:e.toString()}),e}function jy(t,e){return Z_(t.databaseId,e.path)}function ty(t,e){let n=xA(e);if(n.get(1)!==t.databaseId.projectId)throw new B(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(OA(n))}function PA(t,e){return Z_(t.databaseId,e)}function bB(t){let e=xA(t);return e.length===4?Se.emptyPath():OA(e)}function By(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OA(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function w0(t,e,n){return{name:jy(t,e),fields:n.value.mapValue.fields}}function CB(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(ge(f===void 0||typeof f=="string",58123),tt.fromBase64String(f||"")):(ge(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),tt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let f=l.code===void 0?R.UNKNOWN:RA(l.code);return new B(f,l.message||"")})(s);n=new hd(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ty(t,r.document.name),o=vn(r.document.updateTime),s=r.document.createTime?vn(r.document.createTime):Z.min(),c=new Yt({mapValue:{fields:r.document.fields}}),u=Jt.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new To(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ty(t,r.document),o=r.readTime?vn(r.readTime):Z.min(),s=Jt.newNoDocument(i,o),c=r.removedTargetIds||[];n=new To([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ty(t,r.document),o=r.removedTargetIds||[];n=new To([],o,i,null)}else{if(!("filter"in e))return q(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Py(i,o),c=r.targetId;n=new fd(c,s)}}return n}function SB(t,e){let n;if(e instanceof Ri)n={update:w0(t,e.key,e.value)};else if(e instanceof Ca)n={delete:jy(t,e.key)};else if(e instanceof zn)n={update:w0(t,e.key,e.data),updateMask:FB(e.fieldMask)};else{if(!(e instanceof Ny))return q(16599,{Vt:e.type});n={verify:jy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof ko)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ai)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ni)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fo)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:DB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(t,e.precondition)),n}function AB(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?vn(i.updateTime):vn(o);return s.isEqual(Z.min())&&(s=vn(o)),new Ay(s,i.transformResults||[])})(n,e))):[]}function NB(t,e){return{documents:[PA(t,e.path)]}}function RB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PA(t,i);let o=(function(l){if(l.length!==0)return FA(In.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:vo(m.field),direction:PB(m.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=Ly(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function MB(t){let e=bB(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let m=kA(p);return m instanceof In&&pA(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(C){return new xo(Eo(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,kd(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Mo(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Mo(y,m)})(n.endAt)),tB(e,i,s,o,c,"F",u,l)}function xB(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kA(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Eo(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Eo(n.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Eo(n.unaryFilter.field);return Be.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Eo(n.unaryFilter.field);return Be.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Be.create(Eo(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return In.create(n.compositeFilter.filters.map(r=>kA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(n.compositeFilter.op))})(t):q(30097,{filter:t})}function PB(t){return IB[t]}function OB(t){return wB[t]}function kB(t){return TB[t]}function vo(t){return{fieldPath:t.canonicalString()}}function Eo(t){return St.fromServerFormat(t.fieldPath)}function FA(t){return t instanceof Be?(function(n){if(n.op==="=="){if(l0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NAN"}};if(u0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(l0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NAN"}};if(u0(n.value))return{unaryFilter:{field:vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(n.field),op:OB(n.op),value:n.value}}})(t):t instanceof In?(function(n){let r=n.getFilters().map(i=>FA(i));return r.length===1?r[0]:{compositeFilter:{op:kB(n.op),filters:r}}})(t):q(54877,{filter:t})}function FB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Aa=class t{constructor(e,n,r,i,o=Z.min(),s=Z.min(),c=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Uy=class{constructor(e){this.yt=e}};function LB(t){let e=MB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sy(e,e.limit,"L"):e}var md=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Ta(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Hn(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt($n(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?dA(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):lA(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):q(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=Ao,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ce(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};md.Kt=new md;var Hy=class{constructor(){this.Cn=new $y}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(Si.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},$y=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qe(Se.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(Se.comparator)).toArray()}};var QY=new Uint8Array(0);var T0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VA=41943040,Vt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(VA,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);var Na=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var D0="LruGarbageCollector",VB=1048576;function b0([t,e],[n,r]){let i=oe(t,n);return i===0?oe(e,r):i}var Gy=class{constructor(e){this.Ir=e,this.buffer=new qe(b0),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();b0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},qy=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){F(D0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?F(D0,"Ignoring IndexedDB error during garbage collection: ",n):await Uo(n)}await this.Vr(3e5)})}},zy=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(H_.ce);let r=new Gy(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(T0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),yo()<=re.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function jB(t,e){return new zy(t,e)}var Wy=class{constructor(){this.changes=new Gn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ky=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Qy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ea(r.mutation,i,mn.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){let i=wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ma();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=qn(),s=va(),c=(function(){return va()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof zn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Ea(f.mutation,l,f.mutation.getFieldMask(),Le.now())):s.set(l.key,mn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>c.set(l,new Ky(f,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=va(),i=new Ne((s,c)=>s-c),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||mn.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||se()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=wA();f.forEach(m=>{if(!o.has(m)){let y=AA(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nB(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(wi()),c=wa,u=o;return s.next(l=>M.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(f=>({batchId:c,changes:IA(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=ma();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=ma();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let l=(function(p,m){return new Po(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,Jt.newInvalidDocument(f)))});let c=ma();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Ea(f.mutation,l,mn.empty(),Le.now()),Vd(n,l)&&(c=c.insert(u,l))}),c})}};var Yy=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:vn(i.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:LB(i.bundledQuery),readTime:vn(i.readTime)}})(n)),M.resolve()}};var Jy=class{constructor(){this.overlays=new Ne(G.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=wi();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=wi(),o=n.length+1,s=new G(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ne((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=wi(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=wi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return M.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new xy(n,r));let o=this.qr.get(n);o===void 0&&(o=se(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var Zy=class{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var Ra=class{constructor(){this.Qr=new qe(ke.$r),this.Ur=new qe(ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new ke(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ke(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new G(new Se([])),r=new ke(n,e),i=new ke(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new G(new Se([])),r=new ke(n,e),i=new ke(n,e+1),o=se();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ke(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ke=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||oe(e.Yr,n.Yr)}static Kr(e,n){return oe(e.Yr,n.Yr)||G.comparator(e.key,n.key)}};var Xy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qe(ke.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ry(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new ke(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?$_:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ke(n,0),i=new ke(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(oe);return n.forEach(i=>{let o=new ke(i,0),s=new ke(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new ke(new G(o),0),c=new qe(oe);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},s),M.resolve(this.ti(c))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,i=>{let o=new ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new ke(n,0),i=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var e_=class{constructor(e){this.ri=e,this.docs=(function(){return new Ne(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=qn();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Jt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=qn(),s=n.path,c=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Fj(kj(f),r)<=0||(i.has(f.key)||Vd(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new t_(this)}getSize(e){return M.resolve(this.size)}},t_=class extends Wy{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var n_=class{constructor(e){this.persistence=e,this.si=new Gn(n=>K_(n),Q_),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.oi=0,this._i=new Ra,this.targetCount=0,this.ai=Na.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Na(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}};var yd=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new H_(0),this.li=!1,this.li=!0,this.hi=new Zy,this.referenceDelegate=e(this),this.Pi=new n_(this),this.indexManager=new Hy,this.remoteDocumentCache=(function(i){return new e_(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new Uy(n),this.Ii=new Yy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Xy(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new r_(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},r_=class extends hy{constructor(e){super(),this.currentSequenceNumber=e}},i_=class t{constructor(e){this.persistence=e,this.Ri=new Ra,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{let i=G.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},_d=class t{constructor(e,n){this.persistence=e,this.pi=new Gn(r=>Bj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jB(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(c=>{c||(r++,o.removeEntry(s,Z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ed(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var o_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=se(),i=se();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var s_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var a_=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VC()?8:Vj($e())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new s_;return this.Ss(e,n,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,s,c.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(yo()<=re.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(yo()<=re.DEBUG&&F("QueryEngine","Query:",_o(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(yo()<=re.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):M.resolve())}ys(e,n){if(p0(n))return M.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sy(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,c);return this.Cs(n,l,s,u.readTime)?this.ys(e,Sy(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return p0(n)||i.isEqual(Z.min())?M.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?M.resolve(null):(yo()<=re.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_o(n)),this.vs(e,s,n,Oj(i,wa)).next(c=>c))})}Ds(e,n){let r=new qe(vA(e));return n.forEach((i,o)=>{Vd(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return yo()<=re.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",_o(n)),this.ps.getDocumentsMatchingQuery(e,n,Si.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var X_="LocalStore",BB=3e8,c_=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ne(oe),this.xs=new Gn(o=>K_(o),Q_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qy(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function UB(t,e,n,r){return new c_(t,e,n,r)}async function jA(t,e){let n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=se();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:c}))})})}function HB(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,f){let p=l.batch,m=p.keys(),y=M.resolve();return m.forEach(C=>{y=y.next(()=>f.getEntry(u,C)).next(A=>{let N=l.docVersions.get(C);ge(N!==null,48541),A.version.compareTo(N)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),f.addEntry(A)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=se();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function BA(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function $B(t,e){let n=Y(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let c=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(tt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(A,N,L){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=BB?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(m,y,f)&&c.push(n.Pi.updateTargetData(o,y))});let u=qn(),l=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(GB(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(Z.min())){let f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function GB(t,e,n){let r=se(),i=se();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=qn();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):F(X_,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function qB(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function zB(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Aa(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function u_(t,e,n){let r=Y(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Ho(s))throw s;F(X_,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function C0(t,e,n){let r=Y(t),i=Z.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=Y(u),m=p.xs.get(f);return m!==void 0?M.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)})(r,s,_n(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:Z.min(),n?o:se())).next(c=>(WB(r,iB(e),c),{documents:c,Qs:o})))}function WB(t,e,n){let r=t.Os.get(e)||Z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var vd=class{constructor(){this.activeTargetIds=lB()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var l_=class{constructor(){this.Mo=new vd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var d_=class{Oo(e){}shutdown(){}};var S0="ConnectivityMonitor",Ed=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(S0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){F(S0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Xl=null;function f_(){return Xl===null?Xl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xl++,"0x"+Xl.toString(16)}var ny="RestConnection",KB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},h_=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===cd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=f_(),c=this.zo(e,n.toUriEncodedString());F(ny,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(c),f=vr(l);return this.Jo(e,c,u,r,f).then(p=>(F(ny,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Co(ny,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=KB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var p_=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var et="WebChannelConnection",g_=class extends h_{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=f_();return new Promise((c,u)=>{let l=new Qm;l.setWithCredentials(!0),l.listenOnce(Ym.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ga.NO_ERROR:let p=l.getResponseJson();F(et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case ga.TIMEOUT:F(et,`RPC '${e}' ${s} timed out`),u(new B(R.DEADLINE_EXCEEDED,"Request time out"));break;case ga.HTTP_ERROR:let m=l.getStatus();if(F(et,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let A=(function(L){let X=L.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(X)>=0?X:R.UNKNOWN})(C.status);u(new B(A,C.message))}else u(new B(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new B(R.UNAVAILABLE,"Connection failed."));break;default:q(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{F(et,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);F(et,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=f_(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Xm(),c=Zm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");F(et,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,C=new p_({Yo:N=>{y?F(et,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(F(et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(et,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),A=(N,L,X)=>{N.listen(L,ie=>{try{X(ie)}catch(Ve){setTimeout(()=>{throw Ve},0)}})};return A(p,mo.EventType.OPEN,()=>{y||(F(et,`RPC '${e}' stream ${i} transport opened.`),C.o_())}),A(p,mo.EventType.CLOSE,()=>{y||(y=!0,F(et,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(p))}),A(p,mo.EventType.ERROR,N=>{y||(y=!0,Co(et,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),C.a_(new B(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,mo.EventType.MESSAGE,N=>{if(!y){let L=N.data[0];ge(!!L,16349);let X=L,ie=X?.error||X[0]?.error;if(ie){F(et,`RPC '${e}' stream ${i} received error:`,ie);let Ve=ie.status,Ke=(function(_){let E=Oe[_];if(E!==void 0)return RA(E)})(Ve),Ue=ie.message;Ke===void 0&&(Ke=R.INTERNAL,Ue="Unknown error status: "+Ve+" with message "+ie.message),y=!0,C.a_(new B(Ke,Ue)),p.close()}else F(et,`RPC '${e}' stream ${i} received:`,L),C.u_(L)}}),A(c,Jm.STAT_EVENT,N=>{N.stat===Yl.PROXY?F(et,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Yl.NOPROXY&&F(et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function ry(){return typeof document<"u"?document:null}function jd(t){return new Fy(t,!0)}var Id=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var A0="PersistentStream",wd=class{constructor(e,n,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Id(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new B(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(A0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(F(A0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},m_=class extends wd{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=CB(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Z.min():s.readTime?vn(s.readTime):Z.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=By(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=Cy(u)?{documents:NB(o,u)}:{query:RB(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=MA(o,s.resumeToken);let l=Ly(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Z.min())>0){c.readTime=gd(o,s.snapshotVersion.toTimestamp());let l=Ly(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=xB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=By(this.serializer),n.removeTarget=e,this.q_(n)}},y_=class extends wd{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=AB(e.writeResults,e.commitTime),r=vn(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=By(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>SB(this.serializer,r))};this.q_(n)}};var __=class{},v_=class extends __{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new B(R.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Vy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(R.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Vy(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(R.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},E_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Un(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Mi="RemoteStore",I_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Oi(this)&&(F(Mi,"Restarting streams for network reachability change."),await(async function(u){let l=Y(u);l.Ea.add(4),await Pa(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Bd(l)})(this))})}),this.Ra=new E_(r,i)}};async function Bd(t){if(Oi(t))for(let e of t.da)await e(!0)}async function Pa(t){for(let e of t.da)await e(!1)}function UA(t,e){let n=Y(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rv(n)?nv(n):$o(n).O_()&&tv(n,e))}function ev(t,e){let n=Y(t),r=$o(n);n.Ia.delete(e),r.O_()&&HA(n,e),n.Ia.size===0&&(r.O_()?r.L_():Oi(n)&&n.Ra.set("Unknown"))}function tv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$o(t).Y_(e)}function HA(t,e){t.Va.Ue(e),$o(t).Z_(e)}function nv(t){t.Va=new ky({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),$o(t).start(),t.Ra.ua()}function rv(t){return Oi(t)&&!$o(t).x_()&&t.Ia.size>0}function Oi(t){return Y(t).Ea.size===0}function $A(t){t.Va=void 0}async function QB(t){t.Ra.set("Online")}async function YB(t){t.Ia.forEach((e,n)=>{tv(t,e)})}async function JB(t,e){$A(t),rv(t)?(t.Ra.ha(e),nv(t)):t.Ra.set("Unknown")}async function ZB(t,e,n){if(t.Ra.set("Online"),e instanceof hd&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){F(Mi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Td(t,r)}else if(e instanceof To?t.Va.Ze(e):e instanceof fd?t.Va.st(e):t.Va.tt(e),!n.isEqual(Z.min()))try{let r=await BA(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),HA(o,u);let p=new Aa(f.target,u,l,f.sequenceNumber);tv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){F(Mi,"Failed to raise snapshot:",r),await Td(t,r)}}async function Td(t,e,n){if(!Ho(e))throw e;t.Ea.add(1),await Pa(t),t.Ra.set("Offline"),n||(n=()=>BA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(Mi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bd(t)})}function GA(t,e){return e().catch(n=>Td(t,n,e))}async function Ud(t){let e=Y(t),n=kr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$_;for(;XB(e);)try{let i=await qB(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,eU(e,i)}catch(i){await Td(e,i)}qA(e)&&zA(e)}function XB(t){return Oi(t)&&t.Ta.length<10}function eU(t,e){t.Ta.push(e);let n=kr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qA(t){return Oi(t)&&!kr(t).x_()&&t.Ta.length>0}function zA(t){kr(t).start()}async function tU(t){kr(t).ra()}async function nU(t){let e=kr(t);for(let n of t.Ta)e.ea(n.mutations)}async function rU(t,e,n){let r=t.Ta.shift(),i=My.from(r,e,n);await GA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ud(t)}async function iU(t,e){e&&kr(t).X_&&await(async function(r,i){if((function(s){return yB(s)&&s!==R.ABORTED})(i.code)){let o=r.Ta.shift();kr(r).B_(),await GA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ud(r)}})(t,e),qA(t)&&zA(t)}async function N0(t,e){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),F(Mi,"RemoteStore received new credentials");let r=Oi(n);n.Ea.add(3),await Pa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bd(n)}async function oU(t,e){let n=Y(t);e?(n.Ea.delete(2),await Bd(n)):e||(n.Ea.add(2),await Pa(n),n.Ra.set("Unknown"))}function $o(t){return t.ma||(t.ma=(function(n,r,i){let o=Y(n);return o.sa(),new m_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:QB.bind(null,t),t_:YB.bind(null,t),r_:JB.bind(null,t),H_:ZB.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),rv(t)?nv(t):t.Ra.set("Unknown")):(await t.ma.stop(),$A(t))})),t.ma}function kr(t){return t.fa||(t.fa=(function(n,r,i){let o=Y(n);return o.sa(),new y_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:tU.bind(null,t),r_:iU.bind(null,t),ta:nU.bind(null,t),na:rU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ud(t)):(await t.fa.stop(),t.Ta.length>0&&(F(Mi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var w_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iv(t,e){if(Un("AsyncQueue",`${e}: ${t}`),Ho(t))return new B(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Dd=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=ma(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var bd=class{constructor(){this.ga=new Ne(G.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Vo=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,Dd.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var T_=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},D_=class{constructor(){this.queries=R0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=R0(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new B(R.ABORTED,"Firestore shutting down"))}};function R0(){return new Gn(t=>_A(t),Ld)}async function sU(t,e){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new T_,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=iv(s,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&ov(n)}async function aU(t,e){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cU(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&ov(n)}function uU(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function ov(t){t.Ca.forEach(e=>{e.next()})}var b_,M0;(M0=b_||(b_={})).Ma="default",M0.Cache="cache";var C_=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==b_.Cache}};var Cd=class{constructor(e){this.key=e}},Sd=class{constructor(e){this.key=e}},S_=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=vA(e),this.tu=new Dd(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new bd,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=Vd(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?C!==A&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(c=!0)),N&&(y?(s=s.add(y),o=A?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>(function(y,C){let A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Rt:N})}};return A(y)-A(C)})(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Vo(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Sd(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Cd(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},sv="SyncEngine",A_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},N_=class{constructor(e){this.key=e,this.hu=!1}},R_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Gn(c=>_A(c),Ld),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(G.comparator),this.Au=new Map,this.Ru=new Ra,this.Vu={},this.mu=new Map,this.fu=Na.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function lU(t,e,n=!0){let r=ZA(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await WA(r,e,n,!0),i}async function dU(t,e){let n=ZA(t);await WA(n,e,!0,!1)}async function WA(t,e,n,r){let i=await zB(t.localStore,_n(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await fU(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&UA(t.remoteStore,i),c}async function fU(t,e,n,r,i){t.pu=(p,m,y)=>(async function(A,N,L,X){let ie=N.view.ru(L);ie.Cs&&(ie=await C0(A.localStore,N.query,!1).then(({documents:w})=>N.view.ru(w,ie)));let Ve=X&&X.targetChanges.get(N.targetId),Ke=X&&X.targetMismatches.get(N.targetId)!=null,Ue=N.view.applyChanges(ie,A.isPrimaryClient,Ve,Ke);return P0(A,N.targetId,Ue.au),Ue.snapshot})(t,p,m,y);let o=await C0(t.localStore,e,!0),s=new S_(e,o.Qs),c=s.ru(o.documents),u=Sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);P0(t,n,l.au);let f=new A_(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function hU(t,e,n){let r=Y(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Ld(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await u_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ev(r.remoteStore,i.targetId),M_(r,i.targetId)}).catch(Uo)):(M_(r,i.targetId),await u_(r.localStore,i.targetId,!0))}async function pU(t,e){let n=Y(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ev(n.remoteStore,r.targetId))}async function gU(t,e,n){let r=wU(t);try{let i=await(function(s,c){let u=Y(s),l=Le.now(),f=c.reduce((y,C)=>y.add(C.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=qn(),A=se();return u.Ns.getEntries(y,f).next(N=>{C=N,C.forEach((L,X)=>{X.isValidDocument()||(A=A.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(N=>{p=N;let L=[];for(let X of c){let ie=mB(X,p.get(X.key).overlayedDocument);ie!=null&&L.push(new zn(X.key,ie,fA(ie.value.mapValue),Nr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,c)}).next(N=>{m=N;let L=N.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,N.batchId,L)})}).then(()=>({batchId:m.batchId,changes:IA(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Ne(oe)),l=l.insert(c,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await Oa(r,i.changes),await Ud(r.remoteStore)}catch(i){let o=iv(i,"Failed to persist write");n.reject(o)}}async function KA(t,e){let n=Y(t);try{let r=await $B(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ge(s.hu,14607):i.removedDocuments.size>0&&(ge(s.hu,42227),s.hu=!1))}),await Oa(n,r,e)}catch(r){await Uo(r)}}function x0(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=Y(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(c)&&(l=!0)}),l&&ov(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mU(t,e,n){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ne(G.comparator);s=s.insert(o,Jt.newNoDocument(o,Z.min()));let c=se().add(o),u=new dd(Z.min(),new Map,new Ne(oe),s,c);await KA(r,u),r.du=r.du.remove(o),r.Au.delete(e),av(r)}else await u_(r.localStore,e,!1).then(()=>M_(r,e,n)).catch(Uo)}async function yU(t,e){let n=Y(t),r=e.batch.batchId;try{let i=await HB(n.localStore,e);YA(n,r,null),QA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oa(n,i)}catch(i){await Uo(i)}}async function _U(t,e,n){let r=Y(t);try{let i=await(function(s,c){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(ge(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);YA(r,e,n),QA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Oa(r,i)}catch(i){await Uo(i)}}function QA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function YA(t,e,n){let r=Y(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function M_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||JA(t,r)})}function JA(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(ev(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),av(t))}function P0(t,e,n){for(let r of n)r instanceof Cd?(t.Ru.addReference(r.key,e),vU(t,r)):r instanceof Sd?(F(sv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||JA(t,r.key)):q(19791,{wu:r})}function vU(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(F(sv,"New document in limbo: "+n),t.Eu.add(r),av(t))}function av(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new G(Se.fromString(e)),r=t.fu.next();t.Au.set(r,new N_(n)),t.du=t.du.insert(n,r),UA(t.remoteStore,new Aa(_n(Y_(n.path)),r,"TargetPurposeLimboResolution",H_.ce))}}async function Oa(t,e,n){let r=Y(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=o_.As(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let f=Y(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ho(p))throw p;F(X_,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),C=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(C);f.Ms=f.Ms.insert(m,A)}}})(r.localStore,o))}async function EU(t,e){let n=Y(t);if(!n.currentUser.isEqual(e)){F(sv,"User change. New user:",e.toKey());let r=await jA(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new B(R.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Oa(n,r.Ls)}}function IU(t,e){let n=Y(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let i=se(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function ZA(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mU.bind(null,e),e.Pu.H_=cU.bind(null,e.eventManager),e.Pu.yu=uU.bind(null,e.eventManager),e}function wU(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_U.bind(null,e),e}var XA=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=jd(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return UB(this.persistence,new a_,n.initialUser,this.serializer)}Cu(n){return new yd(i_.mi,this.serializer)}Du(n){return new l_}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),x_=class extends XA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof _d,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new qy(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new yd(r=>_d.mi(r,n),this.serializer)}};var TU=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>x0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=EU.bind(null,this.syncEngine),await oU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new D_})()}createDatastore(n){let r=jd(n.databaseInfo.databaseId),i=(function(s){return new g_(s)})(n.databaseInfo);return(function(s,c,u,l){return new v_(s,c,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new I_(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>x0(this.syncEngine,r,0),(function(){return Ed.v()?new Ed:new d_})())}createSyncEngine(n,r){return(function(o,s,c,u,l,f,p){let m=new R_(o,s,c,u,l,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Y(r);F(Mi,"RemoteStore shutting down."),i.Ea.add(5),await Pa(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var P_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Fr="FirestoreClient",O_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=Ia.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(Fr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(Fr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=iv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function iy(t,e){t.asyncQueue.verifyOperationInProgress(),F(Fr,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function O0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await DU(t);F(Fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>N0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>N0(e.remoteStore,i)),t._onlineComponents=e}async function DU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(Fr,"Using user provided OfflineComponentProvider");try{await iy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Co("Error using user provided cache. Falling back to memory cache: "+n),await iy(t,new XA)}}else F(Fr,"Using default OfflineComponentProvider"),await iy(t,new x_(void 0));return t._offlineComponents}async function eN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(Fr,"Using user provided OnlineComponentProvider"),await O0(t,t._uninitializedComponentsProvider._online)):(F(Fr,"Using default OnlineComponentProvider"),await O0(t,new TU))),t._onlineComponents}function bU(t){return eN(t).then(e=>e.syncEngine)}async function k0(t){let e=await eN(t),n=e.eventManager;return n.onListen=lU.bind(null,e.syncEngine),n.onUnlisten=hU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pU.bind(null,e.syncEngine),n}function tN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var F0=new Map;var nN="firestore.googleapis.com",L0=!0,Ad=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nN,this.ssl=L0}else this.host=e.host,this.ssl=e.ssl??L0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VB)throw new B(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tN(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},jo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ad({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ad(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new oy;switch(r.type){case"firstParty":return new uy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=F0.get(n);r&&(F("ComponentProvider","Removing Datastore"),F0.delete(n),r.terminate())})(this),Promise.resolve()}};function CU(t,e,n,r={}){t=wo(t,jo);let i=vr(e),o=t._getSettings(),s=ae(V({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(Tl(`https://${c}`),Dl("Firestore",!0)),o.host!==nN&&o.host!==c&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ae(V({},o),{host:c,ssl:i,emulatorOptions:r});if(!hn(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=Ge.MOCK_USER;else{l=xC(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new B(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ge(p)}t._authCredentials=new sy(new rd(l,f))}}var Nd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ft=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(xa(n,t._jsonSchema))return new t(e,r||null,new G(Se.fromString(n.referencePath)))}};ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:Fe("string",ft._jsonSchemaVersion),referencePath:Fe("string")};var Rr=class t extends Nd{constructor(e,n,r){super(e,n,Y_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function cv(t,e,...n){if(t=dt(t),H0("collection","path",e),t instanceof jo){let r=Se.fromString(e,...n);return n0(r),new Rr(t,null,r)}{if(!(t instanceof ft||t instanceof Rr))throw new B(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return n0(r),new Rr(t.firestore,null,r)}}function uv(t,e,...n){if(t=dt(t),arguments.length===1&&(e=Ia.newId()),H0("doc","path",e),t instanceof jo){let r=Se.fromString(e,...n);return t0(r),new ft(t,null,new G(r))}{if(!(t instanceof ft||t instanceof Rr))throw new B(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return t0(r),new ft(t.firestore,t instanceof Rr?t.converter:null,new G(r))}}var V0="AsyncQueue",Rd=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Id(this,"async_queue_retry"),this._c=()=>{let r=ry();r&&F(V0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=ry();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=ry();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new Bn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;F(V0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Un("INTERNAL UNHANDLED ERROR: ",j0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=w_.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&q(47125,{Pc:j0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function j0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function B0(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var xi=class extends jo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Rd,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Rd(e),this._firestoreClient=void 0,await e}}};function rN(t,e){let n=typeof t=="object"?t:Al(),r=typeof t=="string"?t:e||cd,i=ua(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=MC("firestore");o&&CU(i,...o)}return i}function iN(t){if(t._terminated)throw new B(R.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SU(t),t._firestoreClient}function SU(t){let e=t._freezeSettings(),n=(function(i,o,s,c){return new py(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,tN(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new O_(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var Mr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(tt.fromBase64String(e))}catch(n){throw new B(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xa(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Mr._jsonSchemaVersion="firestore/bytes/1.0",Mr._jsonSchema={type:Fe("string",Mr._jsonSchemaVersion),bytes:Fe("string")};var Ma=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Md=class{constructor(e){this._methodName=e}};var xr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(xa(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:Fe("string",xr._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};var Pr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xa(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new B(R.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Pr._jsonSchemaVersion="firestore/vectorValue/1.0",Pr._jsonSchema={type:Fe("string",Pr._jsonSchemaVersion),vectorValues:Fe("object")};var AU=/^__.*__$/,k_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ri(e,this.data,n,this.fieldTransforms)}};function oN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ac:t})}}var F_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(V(V({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return xd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oN(this.Ac)&&AU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},L_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jd(e)}Cc(e,n,r,i=!1){return new F_({Ac:e,methodName:n,Dc:r,path:St.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function NU(t){let e=t._freezeSettings(),n=jd(t._databaseId);return new L_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RU(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);uN("Data must be an object, but it was:",s,r);let c=aN(r,s),u,l;if(o.merge)u=new mn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=MU(e,p,n);if(!s.contains(m))throw new B(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);PU(f,m)||f.push(m)}u=new mn(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new k_(new Yt(c),u,l)}function sN(t,e){if(cN(t=dt(t)))return uN("Unsupported field value:",e,t),aN(t,e);if(t instanceof Md)return(function(r,i){if(!oN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=sN(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Le.fromDate(r);return{timestampValue:gd(i.serializer,o)}}if(r instanceof Le){let o=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gd(i.serializer,o)}}if(r instanceof xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mr)return{bytesValue:MA(i.serializer,r._byteString)};if(r instanceof ft){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Z_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pr)return(function(s,c){return{mapValue:{fields:{[q_]:{stringValue:z_},[Ao]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return J_(c.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${U_(r)}`)})(t,e)}function aN(t,e){let n={};return iA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(t,(r,i)=>{let o=sN(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function cN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof xr||t instanceof Mr||t instanceof ft||t instanceof Md||t instanceof Pr)}function uN(t,e,n){if(!cN(n)||!$0(n)){let r=U_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function MU(t,e,n){if((e=dt(e))instanceof Ma)return e._internalPath;if(typeof e=="string")return lN(t,e);throw xd("Field path arguments must be of type string or ",t,!1,void 0,n)}var xU=new RegExp("[~\\*/\\[\\]]");function lN(t,e,n){if(e.search(xU)>=0)throw xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ma(...e.split("."))._internalPath}catch{throw xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xd(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new B(R.INVALID_ARGUMENT,c+t+u)}function PU(t,e){return t.some(n=>n.isEqual(e))}var Pd=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new V_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(dN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},V_=class extends Pd{data(){return super.data()}};function dN(t,e){return typeof e=="string"?lN(t,e):e instanceof Ma?e._internalPath:e._delegate._internalPath}function OU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var j_=class{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Pi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[Ao].arrayValue?.values?.map(r=>Ce(r.doubleValue));return new Pr(n)}convertGeoPoint(e){return new xr(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Fd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){let n=Hn(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);ge(LA(r),9688,{name:e});let i=new ud(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||Un(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function kU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Di=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bi=class t extends Pd{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Do(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(dN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(R.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",bi._jsonSchema={type:Fe("string",bi._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var Do=class extends bi{data(e={}){return super.data(e)}},bo=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Di(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Do(this._firestore,this._userDataWriter,r.key,r,new Di(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Do(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Di(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Do(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Di(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:FU(c.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(R.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ia.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function FU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}bo._jsonSchemaVersion="firestore/querySnapshot/1.0",bo._jsonSchema={type:Fe("string",bo._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};var Od=class extends j_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}};function fN(t){return pN(wo(t.firestore,xi),[new Ca(t._key,Nr.none())])}function lv(t,e){let n=wo(t.firestore,xi),r=uv(t),i=kU(t.converter,e);return pN(n,[RU(NU(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}function hN(t,...e){t=dt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||B0(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(B0(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(t instanceof ft)s=wo(t.firestore,xi),c=Y_(t._key.path),o={next:u=>{e[r]&&e[r](LU(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=wo(t,Nd);s=wo(u.firestore,xi),c=u._query;let l=new Od(s);o={next:f=>{e[r]&&e[r](new bo(s,l,u,f))},error:e[r+1],complete:e[r+2]},OU(t._query)}return(function(l,f,p,m){let y=new P_(m),C=new C_(f,y,p);return l.asyncQueue.enqueueAndForget(async()=>sU(await k0(l),C)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>aU(await k0(l),C))}})(iN(s),c,i,o)}function pN(t,e){return(function(r,i){let o=new Bn;return r.asyncQueue.enqueueAndForget(async()=>gU(await bU(r),i,o)),o.promise})(iN(t),e)}function LU(t,e,n){let r=n.docs.get(e._key),i=new Od(t);return new bi(t,i,e._key,r,new Di(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Bo=i})(Tr),wr(new Lt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new xi(new ay(r.getProvider("auth-internal")),new ly(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ud(l.options.projectId,f)})(s,i),s);return o=V({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Qt(ZS,XS,e),Qt(ZS,XS,"esm2020")})();var VU=(t,e)=>e.id;function jU(t,e){if(t&1&&(x(0,"option",21),k(1),P()),t&2){let n=e.$implicit;xn("value",n),W(),fn(n)}}function BU(t,e){t&1&&(x(0,"div",33)(1,"p",35),k(2,"No hay resultados. \xA1A\xF1ade uno nuevo!"),P()())}function UU(t,e){if(t&1){let n=Ft();x(0,"div",36)(1,"button",37),Te("click",function(){let i=fe(n).$implicit,o=ee(3);return he(o.handleDelete(i.id))}),qc(),x(2,"svg",38),hi(3,"path",39)(4,"path",40)(5,"path",41),P()(),zc(),x(6,"div",42)(7,"h3",43),k(8),P(),x(9,"p",44),k(10),P()(),x(11,"div",45)(12,"button",46),Te("click",function(){let i=fe(n).$implicit,o=ee(3);return he(o.handleAIDefine(i))}),k(13," \u2728 "),P(),x(14,"button",47),Te("click",function(){let i=fe(n).$implicit,o=ee(3);return he(o.handleTTS(i.term,i.lang))}),k(15," \u{1F50A} "),P()(),x(16,"div",48)(17,"span"),k(18),P(),x(19,"span",49),k(20),P(),x(21,"span"),k(22),P()()()}if(t&2){let n=e.$implicit;W(8),fn(n.term),W(2),fn(n.translation),W(8),fn(n.lang==="en"?"EN":"FR"),W(2),fn(n.subject),W(2),fn(n.course)}}function HU(t,e){if(t&1&&(x(0,"div",34),Us(1,UU,23,5,"div",36,VU),P()),t&2){let n=ee(2);W(),Hs(n.filteredTerms())}}function $U(t,e){if(t&1){let n=Ft();x(0,"div",11)(1,"div",15)(2,"div")(3,"label",16),k(4,"Idioma"),P(),x(5,"select",17),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.filterLang,i)||(o.filterLang=i),he(i)}),x(6,"option",18),k(7,"Todos"),P(),x(8,"option",19),k(9,"EN Ingl\xE9s"),P(),x(10,"option",20),k(11,"\u{1F1EB}\u{1F1F7} Franc\xE9s"),P()()(),x(12,"div")(13,"label",16),k(14,"Asignatura"),P(),x(15,"select",17),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.filterSubject,i)||(o.filterSubject=i),he(i)}),x(16,"option",18),k(17,"Todas"),P(),Us(18,jU,2,2,"option",21,Wu),P()(),x(20,"div")(21,"label",16),k(22,"Curso"),P(),x(23,"select",17),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.filterCourse,i)||(o.filterCourse=i),he(i)}),x(24,"option",18),k(25,"Todos"),P(),x(26,"option",22),k(27,"1\xBA ESO"),P(),x(28,"option",23),k(29,"2\xBA ESO"),P(),x(30,"option",24),k(31,"3\xBA ESO"),P(),x(32,"option",25),k(33,"4\xBA ESO"),P(),x(34,"option",26),k(35,"1\xBA BACH"),P(),x(36,"option",27),k(37,"2\xBA BACH"),P(),x(38,"option",28),k(39,"1\xBA ASIR"),P(),x(40,"option",29),k(41,"2\xBA ASIR"),P()()(),x(42,"div")(43,"label",16),k(44,"Buscar"),P(),x(45,"input",30),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.searchTerm,i)||(o.searchTerm=i),he(i)}),P()()(),x(46,"div",31)(47,"span",32),k(48),P()(),Ot(49,BU,3,0,"div",33)(50,HU,3,0,"div",34),P()}if(t&2){let n=ee();W(5),Ze("ngModel",n.filterLang),W(10),Ze("ngModel",n.filterSubject),W(3),Hs(n.availableSubjects()),W(5),Ze("ngModel",n.filterCourse),W(22),Ze("ngModel",n.searchTerm),W(3),mr("Mostrando ",n.filteredTerms().length," t\xE9rminos"),W(),kt(n.filteredTerms().length===0?49:50)}}function GU(t,e){if(t&1&&(x(0,"option",21),k(1),_g(2,"uppercase"),P()),t&2){let n=e.$implicit;xn("value",n),W(),fn(vg(2,2,n))}}function qU(t,e){if(t&1){let n=Ft();x(0,"select",67),Te("change",function(i){fe(n);let o=ee(2);return he(o.checkNewSubject(i))}),Xe("ngModelChange",function(i){fe(n);let o=ee(2);return lt(o.newTerm.subject,i)||(o.newTerm.subject=i),he(i)}),x(1,"option",68),k(2,"Seleccionar..."),P(),Us(3,GU,3,4,"option",21,Wu),x(5,"option",69),k(6,"+ Nueva"),P()()}if(t&2){let n=ee(2);Ze("ngModel",n.newTerm.subject),W(3),Hs(n.availableSubjects())}}function zU(t,e){if(t&1){let n=Ft();x(0,"div",60)(1,"input",70),Xe("ngModelChange",function(i){fe(n);let o=ee(2);return lt(o.newTerm.subject,i)||(o.newTerm.subject=i),he(i)}),P(),x(2,"button",71),Te("click",function(){fe(n);let i=ee(2);return he(i.isNewSubject.set(!1))}),k(3,"\u2715"),P()()}if(t&2){let n=ee(2);W(),Ze("ngModel",n.newTerm.subject)}}function WU(t,e){if(t&1){let n=Ft();x(0,"div",61)(1,"div")(2,"label",72),k(3,"T\xE9rmino"),P(),x(4,"input",73),Xe("ngModelChange",function(i){fe(n);let o=ee(2);return lt(o.newTerm.term,i)||(o.newTerm.term=i),he(i)}),P()(),x(5,"div")(6,"label",72),k(7,"Traducci\xF3n"),P(),x(8,"input",73),Xe("ngModelChange",function(i){fe(n);let o=ee(2);return lt(o.newTerm.translation,i)||(o.newTerm.translation=i),he(i)}),P()()()}if(t&2){let n=ee(2);W(4),Ze("ngModel",n.newTerm.term),W(4),Ze("ngModel",n.newTerm.translation)}}function KU(t,e){if(t&1){let n=Ft();x(0,"div")(1,"label",72),k(2,"Lista (T\xE9rmino ; Traducci\xF3n)"),P(),x(3,"textarea",74),Xe("ngModelChange",function(i){fe(n);let o=ee(2);return lt(o.bulkText,i)||(o.bulkText=i),he(i)}),P()()}if(t&2){let n=ee(2);W(3),Ze("ngModel",n.bulkText)}}function QU(t,e){if(t&1){let n=Ft();x(0,"div",12)(1,"div",50)(2,"div",51)(3,"h2",52),k(4,"Gesti\xF3n de T\xE9rminos"),P(),x(5,"div",53)(6,"button",54),Te("click",function(){fe(n);let i=ee();return he(i.addMode.set("single"))}),k(7,"Individual"),P(),x(8,"button",54),Te("click",function(){fe(n);let i=ee();return he(i.addMode.set("bulk"))}),k(9,"Masivo"),P()()(),x(10,"div",55)(11,"div",56)(12,"div")(13,"label",57),k(14,"Idioma"),P(),x(15,"select",58),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.newTerm.lang,i)||(o.newTerm.lang=i),he(i)}),x(16,"option",19),k(17,"Ingl\xE9s"),P(),x(18,"option",20),k(19,"Franc\xE9s"),P()()(),x(20,"div")(21,"label",57),k(22,"Curso"),P(),x(23,"select",58),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.newTerm.course,i)||(o.newTerm.course=i),he(i)}),x(24,"option",18),k(25,"Todos"),P(),x(26,"option",22),k(27,"1\xBA ESO"),P(),x(28,"option",23),k(29,"2\xBA ESO"),P(),x(30,"option",24),k(31,"3\xBA ESO"),P(),x(32,"option",25),k(33,"4\xBA ESO"),P(),x(34,"option",26),k(35,"1\xBA BACH"),P(),x(36,"option",27),k(37,"2\xBA BACH"),P(),x(38,"option",28),k(39,"1\xBA ASIR"),P(),x(40,"option",29),k(41,"2\xBA ASIR"),P()()(),x(42,"div")(43,"label",57),k(44,"Asignatura"),P(),Ot(45,qU,7,1,"select",59)(46,zU,4,1,"div",60),P()(),Ot(47,WU,9,2,"div",61)(48,KU,4,1,"div"),x(49,"div",62)(50,"label",63),k(51,"CONTRASE\xD1A PROFESOR"),P(),x(52,"div",64)(53,"input",65),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.passwordInput,i)||(o.passwordInput=i),he(i)}),P(),x(54,"button",66),Te("click",function(){fe(n);let i=ee();return he(i.handleSave())}),k(55),P()()()()()()}if(t&2){let n=ee();W(6),pi("bg-blue-100",n.addMode()==="single"),W(2),pi("bg-blue-100",n.addMode()==="bulk"),W(7),Ze("ngModel",n.newTerm.lang),W(8),Ze("ngModel",n.newTerm.course),W(22),kt(n.isNewSubject()?46:45),W(2),kt(n.addMode()==="single"?47:48),W(6),Ze("ngModel",n.passwordInput),W(),xn("disabled",n.saving()),W(),mr(" ",n.saving()?"Guardando...":n.addMode()==="single"?"Guardar":"Cargar Lista"," ")}}function YU(t,e){if(t&1&&(x(0,"div",79),hi(1,"div",80),P()),t&2){let n=ee(2);W(),xn("innerHTML",n.quizResult(),xu)}}function JU(t,e){if(t&1){let n=Ft();x(0,"div",13)(1,"div",75)(2,"h2",76),k(3,"Quiz con IA"),P(),x(4,"p",77),k(5),P(),x(6,"button",78),Te("click",function(){fe(n);let i=ee();return he(i.handleGenerateQuiz())}),k(7),P()(),Ot(8,YU,2,1,"div",79),P()}if(t&2){let n=ee();W(5),mr("Genera preguntas basadas en los ",n.filteredTerms().length," t\xE9rminos actuales."),W(),xn("disabled",n.loadingQuiz()),W(),mr(" ",n.loadingQuiz()?"Generando...":"\u2728 Generar Quiz"," "),W(),kt(n.quizResult()?8:-1)}}function ZU(t,e){t&1&&(x(0,"div",85),k(1,"Pensando..."),P())}function XU(t,e){if(t&1&&hi(0,"div",86),t&2){let n=ee(2);xn("innerHTML",n.modalContent(),xu)}}function eH(t,e){if(t&1){let n=Ft();x(0,"div",81),Te("click",function(){fe(n);let i=ee();return he(i.modalOpen.set(!1))}),x(1,"div",82),Te("click",function(i){return fe(n),he(i.stopPropagation())}),x(2,"button",83),Te("click",function(){fe(n);let i=ee();return he(i.modalOpen.set(!1))}),k(3,"\u2715"),P(),x(4,"h3",84),k(5,"Definici\xF3n"),P(),Ot(6,ZU,2,0,"div",85)(7,XU,1,1,"div",86),P()()}if(t&2){let n=ee();W(6),kt(n.loadingAI()?6:7)}}function tH(t,e){if(t&1){let n=Ft();x(0,"div",81),Te("click",function(){fe(n);let i=ee();return he(i.deleteModalOpen.set(!1))}),x(1,"div",87),Te("click",function(i){return fe(n),he(i.stopPropagation())}),x(2,"h3",88),k(3,"Borrar T\xE9rmino"),P(),x(4,"p",89),k(5,"Esta acci\xF3n es permanente y afectar\xE1 a todos los usuarios. Introduce la contrase\xF1a para confirmar."),P(),x(6,"input",90),Xe("ngModelChange",function(i){fe(n);let o=ee();return lt(o.deletePasswordInput,i)||(o.deletePasswordInput=i),he(i)}),P(),x(7,"div",91)(8,"button",92),Te("click",function(){fe(n);let i=ee();return he(i.deleteModalOpen.set(!1))}),k(9,"Cancelar"),P(),x(10,"button",93),Te("click",function(){fe(n);let i=ee();return he(i.confirmDelete())}),k(11,"Borrar"),P()()()()}if(t&2){let n=ee();W(6),Ze("ngModel",n.deletePasswordInput)}}var nH={apiKey:"AIzaSyDRviDPYGBpURT0r2_l6_LBJtF91ITwvMI",authDomain:"glosario-d6bc3.firebaseapp.com",projectId:"glosario-d6bc3",storageBucket:"glosario-d6bc3.firebasestorage.app",messagingSenderId:"786251394798",appId:"1:786251394798:web:7e1e08242743c53f218dff",measurementId:"G-HJGVEZQ8K1"},gN="",mN="Triana0??",_N=vm(nH),yN=Wm(_N),dv=rN(_N),fv="1:786251394798:web:7e1e08242743c53f218dff",Hd=class t{user=ve(null,{});terms=ve([],{});activeTab=ve("glosario",{});filterLang=ve("all",{});filterCourse=ve("all",{});filterSubject=ve("all",{});searchTerm=ve("",{});addMode=ve("single",{});newTerm={term:"",translation:"",lang:"en",course:"1eso",subject:""};bulkText=ve("",{});isNewSubject=ve(!1,{});passwordInput=ve("",{});saving=ve(!1,{});modalOpen=ve(!1,{});modalContent=ve("",{});loadingAI=ve(!1,{});loadingQuiz=ve(!1,{});quizResult=ve("",{});deleteModalOpen=ve(!1,{});termToDeleteId=ve(null,{});deletePasswordInput=ve("",{});availableSubjects=Pn(()=>{let e=new Set(this.terms().map(n=>n.subject.toUpperCase()).filter(Boolean));return Array.from(e).sort()},{});filteredTerms=Pn(()=>{let e=this.searchTerm().toLowerCase();return this.terms().filter(n=>{let r=this.filterLang()==="all"||n.lang===this.filterLang(),i=this.filterCourse()==="all"||n.course===this.filterCourse(),o=this.filterSubject()==="all"||n.subject===this.filterSubject(),s=n.term.toLowerCase().includes(e)||n.translation.toLowerCase().includes(e);return r&&i&&o&&s})},{});ngOnInit(){this.initAuth()}async initAuth(){await Gm(yN),qm(yN,e=>{this.user.set(e),e&&this.loadData(e.uid)})}loadData(e){let n=cv(dv,"artifacts",fv,"public","data","glossary_terms");hN(n,r=>{let i=r.docs.map(o=>V({id:o.id},o.data()));this.terms.set(i.sort((o,s)=>s.createdAt-o.createdAt))})}checkNewSubject(e){e.target.value==="new"&&(this.isNewSubject.set(!0),this.newTerm.subject="")}async handleSave(){if(this.passwordInput()!==mN){alert("\u26A0\uFE0F Contrase\xF1a incorrecta");return}if(this.user()){this.saving.set(!0);try{let e=cv(dv,"artifacts",fv,"public","data","glossary_terms"),n={lang:this.newTerm.lang,course:this.newTerm.course,subject:this.newTerm.subject.toUpperCase(),createdAt:Date.now()};if(this.addMode()==="single"){if(!this.newTerm.term)return;await lv(e,ae(V({},n),{term:this.newTerm.term,translation:this.newTerm.translation}))}else{let r=this.bulkText().split(`
`);for(let i of r)if(i.includes(";")){let[o,s]=i.split(";").map(c=>c.trim());await lv(e,ae(V({},n),{term:o,translation:s}))}}this.newTerm.term="",this.newTerm.translation="",this.bulkText.set(""),this.passwordInput.set(""),this.activeTab.set("glosario"),alert("Guardado correctamente")}catch(e){console.error(e),alert("Error al guardar")}finally{this.saving.set(!1)}}}handleDelete(e){this.termToDeleteId.set(e),this.deletePasswordInput.set(""),this.deleteModalOpen.set(!0)}async confirmDelete(){if(this.deletePasswordInput()!==mN){alert("\u26A0\uFE0F Contrase\xF1a incorrecta");return}if(this.termToDeleteId())try{await fN(uv(dv,"artifacts",fv,"public","data","glossary_terms",this.termToDeleteId())),this.deleteModalOpen.set(!1),this.termToDeleteId.set(null)}catch(e){console.error(e),alert("Error al borrar")}}async generateContent(e){return(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${gN}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}]})})).json()).candidates?.[0]?.content?.parts?.[0]?.text||"Error"}async handleAIDefine(e){this.modalOpen.set(!0),this.loadingAI.set(!0),console.log(e.lang);let n="Define muy resumido '"+e.term+"' en el idioma "+e.lang+" para un estudiante de "+e.subject+" del curso "+e.course+". HTML simple (<h3>, <p>, <br>).",r=await this.generateContent(n);this.modalContent.set(r),this.loadingAI.set(!1)}async handleGenerateQuiz(){if(this.filteredTerms().length<3){alert("Necesitas al menos 3 t\xE9rminos filtrados");return}this.loadingQuiz.set(!0);let n=`Crea un quiz HTML de 3 preguntas basado en: ${this.filteredTerms().slice(0,10).map(i=>`${i.term} (${i.translation})`).join(", ")}. Formato: <div><strong>Pregunta</strong><ul><li>Opciones</li></ul><details><summary>Ver respuesta</summary>Respuesta...</details></div>`,r=await this.generateContent(n);this.quizResult.set(r),this.loadingQuiz.set(!1)}async handleTTS(e,n){try{let r=n==="fr"?"Fenrir":"Kore",i=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${gN}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}],generationConfig:{responseModalities:["AUDIO"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:r}}}}})}),o=await i.json();if(!i.ok){console.warn("Gemini TTS Error (Quota/API):",o),this.fallbackTTS(e,n);return}let c=o.candidates?.[0]?.content?.parts?.[0]?.inlineData;if(c){let l=(c.mimeType||"").match(/rate=(\d+)/),f=l?parseInt(l[1],10):24e3;console.log(`Reproduciendo audio a ${f}Hz`);let p=atob(c.data),m=new Uint8Array(p.length);for(let A=0;A<p.length;A++)m[A]=p.charCodeAt(A);let y=this.pcmToWav(m,f);new Audio(URL.createObjectURL(y)).play()}}catch(r){console.error("TTS System Error:",r),this.fallbackTTS(e,n)}}fallbackTTS(e,n){if(!("speechSynthesis"in window)){alert("Tu navegador no soporta lectura de texto.");return}window.speechSynthesis.cancel();let r=new SpeechSynthesisUtterance(e);r.lang=n==="fr"?"fr-FR":"en-GB",console.log(`Usando navegador TTS (Fallback) para: ${e} (${r.lang})`),window.speechSynthesis.speak(r)}pcmToWav(e,n){let o=n*1*2,s=1*(16/8),c=new ArrayBuffer(44+e.length),u=new DataView(c);return this.writeString(u,0,"RIFF"),u.setUint32(4,36+e.length,!0),this.writeString(u,8,"WAVE"),this.writeString(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,1,!0),u.setUint32(24,n,!0),u.setUint32(28,o,!0),u.setUint16(32,s,!0),u.setUint16(34,16,!0),this.writeString(u,36,"data"),u.setUint32(40,e.length,!0),new Uint8Array(c,44).set(e),new Blob([u],{type:"audio/wav"})}writeString(e,n,r){for(let i=0;i<r.length;i++)e.setUint8(n+i,r.charCodeAt(i))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=lg({type:t,selectors:[["app-root"]],decls:30,vars:11,consts:[[1,"min-h-screen","bg-slate-50","font-sans","text-slate-800"],[1,"bg-white","shadow-md","sticky","top-0","z-40","border-b","border-blue-100"],[1,"max-w-6xl","mx-auto","px-4","py-4","flex","flex-col","md:flex-row","items-center","justify-between","gap-4"],[1,"flex","items-center","gap-3"],[1,""],["src","logo.png","width","70","height","70"],[1,"text-2xl","font-bold","text-blue-900","leading-none"],[1,"text-sm","text-blue-600","font-medium"],[1,"flex","bg-slate-100","p-1","rounded-xl"],[1,"flex","items-center","gap-2","px-5","py-2","rounded-lg","text-sm","font-semibold","transition-all",3,"click"],[1,"max-w-6xl","mx-auto","px-4","py-8"],[1,"space-y-6","animate-in","fade-in"],[1,"max-w-2xl","mx-auto","animate-in","fade-in"],[1,"max-w-3xl","mx-auto","space-y-6","text-center","animate-in","fade-in"],[1,"fixed","inset-0","bg-black/50","z-50","flex","items-center","justify-center","p-4","backdrop-blur-sm"],[1,"bg-white","p-5","rounded-2xl","shadow-sm","border","border-slate-200","grid","grid-cols-1","md:grid-cols-4","gap-4"],[1,"block","text-xs","font-semibold","text-slate-500","mb-1","uppercase"],[1,"w-full","bg-slate-50","border","border-slate-200","rounded-lg","p-2.5",3,"ngModelChange","ngModel"],["value","all"],["value","en"],["value","fr"],[3,"value"],["value","1\xBA ESO"],["value","2\xBA ESO"],["value","3\xBA ESO"],["value","4\xBA ESO"],["value","1\xBA BACH"],["value","2\xBA BACH"],["value","1\xBA ASIR"],["value","2\xBA ASIR"],["type","text","placeholder","Buscar...",1,"w-full","bg-slate-50","border","border-slate-200","rounded-lg","p-2.5",3,"ngModelChange","ngModel"],[1,"flex","justify-between","items-center","px-2"],[1,"text-slate-500","text-sm","font-medium"],[1,"text-center","py-20","bg-white","rounded-2xl","border","border-dashed","border-slate-300"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-5"],[1,"text-slate-500"],[1,"bg-white","rounded-xl","shadow-sm","border","border-slate-200","p-5","hover:shadow-md","transition-all","relative","group"],[1,"absolute","top-4","right-4","text-slate-300","hover:text-red-500","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],[1,"mb-3"],[1,"text-xl","font-bold","text-slate-800"],[1,"text-blue-600","font-semibold"],[1,"flex","gap-2","mb-4"],["title","Definici\xF3n",1,"bg-blue-50","text-blue-600","hover:bg-blue-100","p-2","rounded-lg",3,"click"],["title","Escuchar",1,"bg-green-50","text-green-600","hover:bg-green-100","p-2","rounded-lg",3,"click"],[1,"pt-3","border-t","border-slate-100","flex","items-center","justify-between","text-xs","text-slate-500","font-medium","uppercase"],[1,"bg-slate-100","px-2","py-1","rounded"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","overflow-hidden"],[1,"p-6","bg-blue-50","border-b","border-blue-100","flex","justify-between","items-center"],[1,"text-xl","font-bold","text-blue-900"],[1,"bg-white","p-1","rounded-lg","border","border-blue-100","flex","text-xs","font-bold"],[1,"px-3","py-1.5","rounded","transition-colors",3,"click"],[1,"p-8","space-y-6"],[1,"grid","grid-cols-3","gap-4"],[1,"block","text-xs","font-bold","text-slate-500","mb-1"],[1,"w-full","bg-slate-50","rounded","border-slate-200","p-2",3,"ngModelChange","ngModel"],[1,"w-full","bg-slate-50","rounded","border-slate-200","p-2",3,"ngModel"],[1,"flex","gap-1"],[1,"grid","grid-cols-2","gap-4"],[1,"pt-6","border-t","border-slate-100"],[1,"block","text-xs","font-bold","text-red-500","mb-1"],[1,"flex","gap-4"],["type","password","placeholder","Clave requerida",1,"flex-1","bg-red-50","border","border-red-200","rounded-lg","p-3","text-red-900",3,"ngModelChange","ngModel"],[1,"bg-blue-600","text-white","px-6","py-3","rounded-lg","font-bold","hover:bg-blue-700","disabled:opacity-50",3,"click","disabled"],[1,"w-full","bg-slate-50","rounded","border-slate-200","p-2",3,"change","ngModelChange","ngModel"],["value",""],["value","new"],["type","text","placeholder","Nueva...",1,"w-full","bg-slate-50","rounded","border-slate-200","p-2",3,"ngModelChange","ngModel"],[1,"text-slate-400",3,"click"],[1,"block","text-sm","font-semibold","mb-1"],["type","text",1,"w-full","p-3","border","border-slate-300","rounded-lg",3,"ngModelChange","ngModel"],["rows","5",1,"w-full","p-3","border","border-slate-300","rounded-lg","font-mono","text-sm",3,"ngModelChange","ngModel"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","p-8"],[1,"text-2xl","font-bold","text-slate-800","mb-4"],[1,"text-slate-600","mb-6"],[1,"bg-blue-600","text-white","px-8","py-3","rounded-full","font-bold","hover:scale-105","transition-transform","disabled:opacity-50",3,"click","disabled"],[1,"bg-white","rounded-2xl","shadow-sm","border","border-slate-200","p-8","text-left"],[1,"prose","max-w-none",3,"innerHTML"],[1,"fixed","inset-0","bg-black/50","z-50","flex","items-center","justify-center","p-4","backdrop-blur-sm",3,"click"],[1,"bg-white","rounded-2xl","shadow-2xl","max-w-md","w-full","p-6","relative",3,"click"],[1,"absolute","top-4","right-4","text-slate-400",3,"click"],[1,"text-xl","font-bold","text-blue-600","mb-4"],[1,"text-center","py-8","text-slate-500"],[1,"prose","prose-sm",3,"innerHTML"],[1,"bg-white","rounded-2xl","shadow-2xl","max-w-sm","w-full","p-6","relative",3,"click"],[1,"text-xl","font-bold","text-red-600","mb-2"],[1,"text-slate-600","mb-4","text-sm"],["type","password","placeholder","Contrase\xF1a requerida",1,"w-full","bg-red-50","border","border-red-200","rounded-lg","p-3","text-red-900","mb-4","focus:outline-none","focus:ring-2","focus:ring-red-500",3,"ngModelChange","ngModel"],[1,"flex","gap-3","justify-end"],[1,"px-4","py-2","text-slate-500","hover:bg-slate-100","rounded-lg","font-medium","transition-colors",3,"click"],[1,"px-4","py-2","bg-red-600","text-white","rounded-lg","font-bold","hover:bg-red-700","transition-colors",3,"click"]],template:function(n,r){n&1&&(x(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),hi(5,"img",5),P(),x(6,"div")(7,"h1",6),k(8,"IES Triana"),P(),x(9,"p",7),k(10,"Glosario Pluriling\xFCe"),P()()(),x(11,"nav",8)(12,"button",9),Te("click",function(){return r.activeTab.set("glosario")}),x(13,"span"),k(14,"\u{1F4DA}"),P(),k(15," Glosario "),P(),x(16,"button",9),Te("click",function(){return r.activeTab.set("practica")}),x(17,"span"),k(18,"\u{1F9E0}"),P(),k(19," Pr\xE1ctica IA "),P(),x(20,"button",9),Te("click",function(){return r.activeTab.set("add")}),x(21,"span"),k(22,"\u2795"),P(),k(23," A\xF1adir "),P()()()(),x(24,"main",10),Ot(25,$U,51,6,"div",11),Ot(26,QU,56,11,"div",12),Ot(27,JU,9,4,"div",13),P(),Ot(28,eH,8,1,"div",14),Ot(29,tH,12,1,"div",14),P()),n&2&&(W(12),Gs(r.activeTab()==="glosario"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"),W(4),Gs(r.activeTab()==="practica"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"),W(4),Gs(r.activeTab()==="add"?"bg-white text-blue-600 shadow-sm":"text-slate-500 hover:text-slate-700"),W(5),kt(r.activeTab()==="glosario"?25:-1),W(),kt(r.activeTab()==="add"?26:-1),W(),kt(r.activeTab()==="practica"?27:-1),W(),kt(r.modalOpen()?28:-1),W(),kt(r.deleteModalOpen()?29:-1))},dependencies:[il,DC,IC,TC,yl,vl,yC,Jg,Mg],encapsulation:2})};Bg(Hd,eC).catch(t=>console.error(t));
